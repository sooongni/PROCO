
<!-- saved from url=(0031)http://localhost:8080/join.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>회원가입</title>
<link rel="stylesheet" href="./회원가입_files/common.css">
<link rel="stylesheet" href="./회원가입_files/join.css">
<style>
label {
	display: inline-block;
	width: 200px;
	margin: 5px;
	color:#002048;
	font-weight:300
	
}

body {
	background: #002048;
}

a {
	color: #fff;
	text-decoration: none;
}

header {
	color: #fff;
}

header h1 {
	margin-top: 100px;
	font-size: 50px;
	margin-bottom: 20px;
	font-weight: 100;
}

header a {
	font-size: 18px;
	margin-left: 20px;
}

.copyright {
	font-size: 25px;
	font-weight: 100;
	color: #fff;
	text-align: center;
	margin-top: 100px;
}

.ease {
	-webkit-transition: all .5s;
	-moz-transition: all .5s;
	-o-transition: all .5s;
	transition: all .5s;
}

.container {
	width: 1024px;
	min-width: 1024px;
	margin: 0 auto;
	box-sizing: border-box;
}

.tabs {
	background: #fff;
	position: relative;
	margin-bottom: 50px;
}

.tabs>input, .tabs>span {
	width: 20%;
	height: 60px;
	line-height: 60px;
	position: absolute;
	top: 0;
}

.tabs>input {
	cursor: pointer;
	filter: alpha(opacity = 0);
	opacity: 0;
	position: absolute;
	z-index: 99;
}

.tabs>span {
	background: #f0f0f0;
	text-align: center;
	overflow: hidden;
}

.tabs>span i, .tabs>span {
	-webkit-transition: all .5s;
	-moz-transition: all .5s;
	-o-transition: all .5s;
	transition: all .5s;
}

.tabs>input:hover+span {
	background: rgba(255, 255, 255, .1);
}

.tabs>input:checked+span {
	background: #fff;
}

.tabs>input:checked+span, .tabs>input:hover+span {
	color: #002048;
}

#tab-1, #tab-1+span {
	left: 0;
}

#tab-2, #tab-2+span {
	left: 20%;
}

.tab-content {
	padding: 80px 20px 20px;
	width: 100%;
	min-height: 290px;
}

.tab-content section {
	width: 100%;
	display: none;
}

.tab-content section h1 {
	margin-top: 15px;
	font-size: 100px;
	font-weight: 100;
	text-align: center;
}

#tab-1:checked ~ .tab-content #tab-item-1 {
	display: block;
}

#tab-2:checked ~ .tab-content #tab-item-2 {
	display: block;
}

.effect-1>input:checked+span {
	background: #fff;
}

.effect-2 span i {
	padding-right: 15px;
}

@media ( max-width : 600px) {
	.effect-2 span span {
		display: none;
	}
	.effect-2 span i {
		padding: 0;
	}
}

/* effect-3 */
.effect-3 .line {
	background: #002048;
	width: 20%;
	height: 4px;
	position: absolute;
	top: 56px;
}

#tab-1:checked ~ .line {
	left: 0;
}

#tab-2:checked ~ .line {
	left: 20%;
}

/* effect-4 */
.effect-4 span i {
	font-size: 18px;
	display: block;
	position: absolute;
	left: 50%;
	top: 0;
	opacity: 0;
	transform: translateX(-50%);
}


input {
	height: 24px;
	outline: none;
	width: 200px;
}

.agree {
	position: absolute;
	right: 30px;
	color: #444;
	font-size: 0.8rem;
	font-weight: 100;
}

.join-btn {
	border: 1px solid #002048;
	right: 30px;
	position: absolute;
	width: 200px;
	text-align: center;
	height: 30px;
	line-height: 30px;
	background: #004aa5;
	color: white;
	font-weight: 100;
	cursor: pointer;
	top: 245px;
}

.join-btn:hover, .join-btn:focus {
	background: #002048;
	color: white;
}

.sign-in-form2, .sign-in-form {
	margin-bottom: 20px
}

.form2 {
	top: 330px;
}

.modal-frame {
	position:absolute;
	top:0;
	right:0;
	left:0;
	bottom:0;
	z-index:50;
	visibility:hidden;
} 

.modal-body {
	top:0;right:0;bottom:0;left:0;
	width:450px;
	border-radius:3px;
	background:#FFF;
	position:absolute;
	height:200px;
	margin:auto;
	z-index:100;
}


.modal-inner {
	padding: 30px;
    padding-left: 50px;
	opacity:0;
	-webkit-transform:scale(.5);
	-webkit-transition:.2s ease-in-out;
	-moz-transform:scale(.5);
	-moz-transition:.2s ease-in-out;
	-ms-transform:scale(.5);
	-ms-transition:.2s ease-in-out;
	-o-transform:scale(.5);
	-o-transition:.2s ease-in-out;
	transform:scale(.5);
	transition:.2s ease-in-out;
}


/**
 *  Modal overlay
*/

.modal-overlay {
  position:absolute;
  top:0;right:0;bottom:0;left:0;
  visibility:hidden;
  opacity:0;
  background:#002048;
  -webkit-transition:.15s ease-in-out;
  -moz-transition:.15s ease-in-out;
  -ms-transition:.15s ease-in-out;
  -o-transition:.15s ease-in-out;
  transition:.15s ease-in-out;
}

.modal-inner {
  -webkit-transform:scale(.95);
  -moz-transform:scale(.95);
  -ms-transform:scale(.95);
  -o-transform:scale(.95);
  transform:scale(.95);
}

/**
 *  Enter states
 */

.modal-frame.active {
  visibility:visible;
  height:inherit;
  display:block;
}

.modal-frame.active .modal-body {
  -webkit-animation: popperIn .45s;
  -moz-animation: popperIn .45s;
  -ms-animation: popperIn .45s;
  -o-animation: popperIn .45s;
  animation: popperIn .45s;
}

@-webkit-keyframes popperIn {
  0% {
    opacity:0;
    -webkit-transform:scale(1.06);
  }
  40% { opacity:1; }
 
  100% {
    -webkit-transform:scale(1);
  }
}

@-moz-keyframes popperIn {
  0% {
    opacity:0;
    -moz-transform:scale(1.06);
  }
  40% { opacity:1; }
 
  100% {
    -moz-transform:scale(1);
  }
}

@keyframes popperIn {
  0% {
    opacity:0;
    transform:scale(1.06);
  }
  40% { opacity:1; }
 
  100% {
    transform:scale(1);
  }
}

@-webkit-keyframes popperOut {
  0% {
    opacity:1;
    -webkit-transform:scale(1);
  }
  30% { opacity:1; }
  40% {
    -webkit-transform:scale(1.05);
  }
  
  100% {
    opacity:0;
    -webkit-transform:scale(1.15);
  }
}

@-moz-keyframes popperOut {
  0% {
    opacity:1;
    -moz-transform:scale(1);
  }
  30% { opacity:1; }
  40% {
    -moz-transform:scale(1.05);
  }
  
  100% {
    opacity:0;
    -moz-transform:scale(1.15);
  }
}

@keyframes popperOut {
  0% {
    opacity:1;
    transform:scale(1);
  }
  30% { opacity:1; }
  40% {
    transform:scale(1.05);
  }
  
  100% {
    opacity:0;
   transform:scale(1.15);
  }
}

.modal-frame.active .modal-inner {
	opacity:1;
	-webkit-transform: scale(1);
	-webkit-transition:.15s ease-in-out;
	-webkit-transition-delay:.13s;
	-moz-transform: scale(1);
	-moz-transition:.15s ease-in-out;
	-moz-transition-delay:.13s;
	-ms-transform: scale(1);
	-ms-transition:.15s ease-in-out;
	-ms-transition-delay:.13s;
	-o-transform: scale(1);
	-o-transition:.15s ease-in-out;
	-o-webkit-transition-delay:.13s;
	transform: scale(1);
	transition:.15s ease-in-out;
	transition-delay:.13s;
  
}

.modal-frame.active .modal-overlay {
  opacity:.5;
  visibility:visible;
}

/**
 *  Leave States
*/
.modal-frame.leave .modal-body {
	opacity:0;
	-webkit-animation: popperOut .5s;
	-webkit-transition:.3s ease-in-out;
	-webkit-transition-delay:.2s;
	-webkit-transform:scale(.95);
	-moz-animation: popperOut .5s;
	-moz-transition:.3s ease-in-out;
	-moz-transition-delay:.2s;
	-moz-transform:scale(.95);
	-ms-animation: popperOut .5s;
	-ms-transition:.3s ease-in-out;
	-ms-transition-delay:.2s;
	-ms-transform:scale(.95);
	animation: popperOut .5s;
	transition:.3s ease-in-out;
	transition-delay:.2s;
	transform:scale(.95);
}

.modal-frame.leave .modal-inner {
	opacity:0;
	-webkit-transform:scale(.95);
	-webkit-transition:.15s ease-in-out;
	-moz-transform:scale(.95);
	-moz-transition:.15s ease-in-out;
	-ms-transform:scale(.95);
	-ms-transition:.15s ease-in-out;
	-o-transform:scale(.95);
	-o-transition:.15s ease-in-out;
	transform:scale(.95);
	transition:.15s ease-in-out;
}

.modalLabel {
 width: 90px;
}

.close{
    position: absolute;
    top: 18px;
    right: 30px;

}

.fa-times{
font-size:1rem;
 color: crimson
}

#create-brand{
	position: absolute;
    right: 30px;
    outline: none;
    background: #004aa5;
    border: none;
    color: white;
    font-weight: 100;
    bottom: -10px;
    height: 30px;
}

#sucOrfailLetter{
    font-size: 0.8rem;
}

h1 img{
 width: 100px;
}
</style>
</head>

<body>
	<div class="container">
		<header>
			<h1>프로코 회원가입</h1>
		</header>
		<div class="tabs effect-3">
			<!-- tab-title -->
			<input type="radio" id="tab-1" name="tab-effect-3" checked="checked" value="1" class="memberType" onclick="doOpenCheck(this)"> 
			<span>일반회원</span>

			<input type="radio" id="tab-2" name="tab-effect-3" value="2" class="memberType" onclick="doOpenCheck(this)"> 
			<span>사업자회원</span>

			<div class="line ease"></div>

			<!-- tab-content -->
			<div class="tab-content">
				<section id="tab-item-1">
					<div class="sign-in-form">
						<label>이메일:</label> 
						<input class="email" type="email">
						<span><button class="emailAuthBtn">이메일 인증하기</button></span><br>
						
						<label>인증번호:</label> 
						<input class="authCode" type="text" required="">
						<span><button class="emailAuthCheckBtn">인증</button></span><br> 
						
						<label>닉네임:</label>
						<input class="alias" type="alias"><br> 
						
						<label>패스워드:</label>
						<input class="pwd" type="password"><br>

					</div>
					<a class="agree">회원 가입 또는 계속하기를 클릭하면 프로코의 서비스 약관, 결제 서비스 약관,
						개인정보 보호정책 차별 금지 정책에 동의하는 것입니다. </a>

					<div class="join-btn form1">회원가입</div>


				</section>
				<section id="tab-item-2">
					<div class="sign-in-form">

						<label>이메일:</label> <input class="email" type="email" required="">
						<span><button class="emailAuthBtn">이메일 인증하기</button></span><br>
						<label>인증번호:</label> 
						
						<input class="authCode" type="text">
						<span><button class="emailAuthBtn2">인증</button></span><br> 
						
						<label>닉네임:</label>
						<input class="alias" type="alias"><br> 
						
						<label>패스워드:</label>
						<input class="pwd" type="password"><br> 
						
						<label>업체명</label>
						<input class="brname" type="text" id="brname"> <span>
						
						<button class="btn2" id="brnameSearch">조회</button></span><br> 
						
						<label>사업자 인증번호 [11자리]</label> 
						<input id="businessNumber" type="text" maxlength="11">
						<span><button class="btn2">조회</button></span><br> 
						
						<label>대표자 전화번호</label> <input id="ceotel" type="text"><span>
						<button class="btn2">인증</button>
						</span><br>

					</div>
					<a class="agree">회원 가입 또는 계속하기를 클릭하면 프로코의 서비스 약관, 결제 서비스 약관,
						개인정보 보호정책 차별 금지 정책에 동의하는 것입니다. </a>

					<div class="join-btn form2">회원가입</div>
				</section>

			</div>
		</div>

		<div class="modal-frame">
			<div class="modal-body">
				<div class="modal-inner">
					<button id="close" class="close">
						<i class="fa fa-times"></i>
					</button>
					<p id="sucOrfailLetter"></p>
					
					<label class="modalLabel">브랜드명</label>
					<input type="text" class="joinModalInput" id="insertBrname"><br>
					
					<label class="modalLabel">로고</label>
					<input type="text" class="joinModalInput" id="insertLogo"><br>
					
					<button id="create-brand"> 브랜드 추가하기</button>
				
				</div>
			</div>
			<div class="modal-overlay"></div>
		</div>
	</div>




<script src="./회원가입_files/jquery.min.js"></script>
<script type="text/javascript" src="./회원가입_files/email.min.js"></script>
<script>
	$modal = $('.modal-frame');

	function enterNewConvo() {
		$('.create-chat-input').focus();
	}

	function closeModal() {
		$modal.removeClass('active');
		$modal.addClass('leave');
	}

	$('#brnameSearch').click(function() {
		$modal.toggleClass('active');
		$modal.removeClass('leave');
		enterNewConvo();
	})

	$('.modal-overlay').click(function() {
		closeModal();
	})

	$('#close').click(function() {
		closeModal();
	})

	$(document).keyup(function(e) {
		if (e.which === 27) {
			closeModal();
		}
	})

	var fiBrname = $('#brname')
	var insertBrname = $('#insertBrname')
	var insertLogo = $('#insertLogo')
	var brname = 0;
	var joinComno = 0;
	$('#brnameSearch').click(function() {

		brname = fiBrname.val()
		$.getJSON('/brand/listByBrand2.json', {
			'brname' : brname
		}, function(result) {
			console.log(result)
			var inputedBrname = result.data

			if (result.data == "success") {
				$('#sucOrfailLetter').text("이미 등록되어있는 업체입니다. 다시 조회해 주세요.")
			} else {
				$('#sucOrfailLetter').text("등록되어있지 않은 업체입니다. 추가하시겠습니까?")
				insertBrname.val(inputedBrname)

				$('#create-brand').click(function() {
					$.post('/brand/add.json', {
						'brname' : insertBrname.val(),
						'logo' : insertLogo.val()
					}, function(result) {
						if (result.status == 'success') {

							console.log(result)
							joinComno = result.data
							closeModal()
						}
					}, 'json')
				})
			}
		})
	})

	var fiEmail = $('.email'),
		fiPwd = $('#pwd'), 
		fiType = $('.memberType'), 
		fiBrname = $('#brname'), 
		fiBusinessNumber = $('#businessNumber'), 
		fiCeotel = $('#ceotel')
		fiAlias = $('#alias')

	var fiTypeNumber = 0;
	
	$(".sign-in-form2").css('display', 'none')
	var businessJoinSquare = false
	function doOpenCheck(b) {

		console.log("----><",b.value);
		fiTypeNumber = b.value
		if (b.value == 2) {
			businessJoinSquare = true
		} else {
			businessJoinSquare = false
		}
		for (var i = 0; i < fiType.length; i++) {
			if (fiType[i] != b) {
				fiType[i].checked = false;
			}
		}
	}

	$('.join-btn').on('click', function() {
		console.log("회원타입", fiTypeNumber)
		if (fiTypeNumber == 1) {
			console.log(fiEmail.val())
			$.post('/member/add.json', {
				'email' : fiEmail.val(),
				'pwd' : fiPwd.val(),
				'alias' : fiAlias.val(),
				'type' : fiTypeNumber
			}, function(result) {
				console.log(result.status)
				location.href = 'home.html'
			}, 'json')
		} else if (fiTypeNumber == 2) {
			console.log("비지니스멤버포스트단계다.")
			$.post('/busimember/add.json', {
				'email' : fiEmail.val(),
				'pwd' : fiPwd.val(),
				'alias' : fiAlias.val(),
				'type' : fiTypeNumber,
				'comno' : joinComno,
				'busino' : fiBusinessNumber.val(),
				'ceotel' : fiCeotel.val()
			}, function(result) {
				location.href = 'home.html'
			}, 'json')
		}
	})
	
	var authCode = null;
	$('.emailAuthBtn').click(function(){
		if(fiEmail.val() == '') {
			console.log("이메일을 입력해주세요")
		}else{
			var a = parseInt(Math.random()*8+1)*1000
			var b = parseInt(Math.random()*9)*100
			var c = parseInt(Math.random()*9)*10
			var d = parseInt(Math.random()*9)
			authCode = a + b + c + d
			console.log(authCode);
			
			emailjs.init("user_wVlMBEHmBUU8WA0yGJJ90");
			emailjs.send("soongni","template_R5qMCjvf",{authCode: authCode, email: fiEmail.val()})
			.then(function(response) {
			   console.log("SUCCESS. status=%d, text=%s", response.status, response.text);
			}, function(err) {
			   console.log("FAILED. error=", err);
			})
	  }//else
	})
	
	var inputedAuthCode = $('.authCode')
	var authTrue ;
	$(".emailAuthCheckBtn").on('click', function() {
		if(authCode == inputedAuthCode.val()) {
			authTrue = true
			alert("인증에 성공했습니다.")
		} else  {
			authTrue = false
			alert("인증에 실패했습니다.")
		}
	})

</script>

</body></html>
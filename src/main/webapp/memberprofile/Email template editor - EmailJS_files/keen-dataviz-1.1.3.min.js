(function e(b,g,d){function c(m,j){if(!g[m]){if(!b[m]){var i=typeof require=="function"&&require;if(!j&&i){return i(m,!0)}if(a){return a(m,!0)}var k=new Error("Cannot find module '"+m+"'");throw k.code="MODULE_NOT_FOUND",k}var h=g[m]={exports:{}};b[m][0].call(h.exports,function(l){var o=b[m][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[m].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(d,f,b){var g=d("./dataset");var i=d("./utils/extend");f.exports=function(j){if(!arguments.length){return this.dataset.data()}if(j instanceof g){this.dataset=j;return this}else{return h.call(this,j)}};function h(k){var l,m,r,j,s=[],o,q,p,n;m=this.indexBy()?this.indexBy():"timestamp.start";r=k.metadata||{};o=(typeof k.query!=="undefined")?k.query:{};o=i({analysis_type:null,event_collection:null,filters:[],group_by:null,interval:null,timeframe:null,timezone:null},o);if(o.analysis_type==="funnel"){j="funnel"}else{if(o.analysis_type==="extraction"){j="extraction"}else{if(o.analysis_type==="select_unique"){if(!o.group_by&&!o.interval){j="list"}}else{if(o.analysis_type){if(!o.group_by&&!o.interval){j="metric"}else{if(o.group_by&&!o.interval){if(o.group_by instanceof Array&&o.group_by.length>1){j="double-grouped-metric";s.push(o.group_by)}else{j="grouped-metric"}}else{if(o.interval&&!o.group_by){j="interval";s.push(m)}else{if(o.group_by&&o.interval){if(o.group_by instanceof Array&&o.group_by.length>1){j="double-grouped-interval";s.push(o.group_by);s.push(m)}else{j="grouped-interval";s.push(m)}}}}}}}}}if(!j){if(typeof k.result==="number"){j="metric"}if(k.result instanceof Array&&k.result.length>0){if(k.result[0].timeframe&&(typeof k.result[0].value=="number"||k.result[0].value==null)){j="interval";s.push(m)}if(typeof k.result[0].result=="number"){j="grouped-metric"}if(k.result[0].value instanceof Array){j="grouped-interval";s.push(m)}if(typeof k.result[0]==="number"&&typeof k.steps!=="undefined"){j="funnel";o.steps=k.steps}if((typeof k.result[0]==="string"||typeof k.result[0]=="number")&&typeof k.steps==="undefined"){j="list"}if(!j){j="extraction"}}}if(!this.title()){if(r.display_name){p=r.display_name}else{p=c(o)}this.title(p)}if(!this.type()){if(r.visualization&&r.visualization.chart_type){n=r.visualization.chart_type}else{n=a(j)}this.type(n)}q=g.parser.apply(this,[j].concat(s));l=q(i(k,{query:o}));if(j.indexOf("interval")>-1){l.updateColumn(0,function(u,t){return new Date(u)})}this.dataset=l;return this}function c(j){var l=j.analysis_type?j.analysis_type.replace("_"," "):"",k;k=l.replace(/\b./g,function(m){return m.toUpperCase()});if(j.event_collection){k+=" - "+j.event_collection}return k}function a(k){var j;switch(k){case"metric":j="metric";break;case"interval":j="area";break;case"grouped-metric":case"double-grouped-metric":j="bar";break;case"grouped-interval":case"double-grouped-interval":j="line";break;case"funnel":j="horizontal-bar";break;case"list":case"extraction":default:j="table"}return j}},{"./dataset":2,"./utils/extend":27}],2:[function(b,c,a){(function(d){(function(k){var h=b("./modifiers/append"),q=b("./modifiers/delete"),g=b("./modifiers/filter"),p=b("./modifiers/insert"),m=b("./modifiers/select"),j=b("./modifiers/sort"),i=b("./modifiers/update");var o=b("./utils/analyses"),l=b("../utils/extend"),n=b("./utils/parsers");function f(){if(this instanceof f===false){return new f()}this.matrix=[["Index"]];this.meta={type:undefined}}f.prototype.data=function(r){if(!arguments.length){return this.matrix}this.matrix=(r instanceof Array?r:null);return this};f.prototype.set=function(v,u){if(arguments.length<2||v.length<2){throw Error("Incorrect arguments provided for #set method")}var r="number"===typeof v[0]?v[0]:this.matrix[0].indexOf(v[0]),w="number"===typeof v[1]?v[1]:m.selectColumn.call(this,0).indexOf(v[1]);var t=m.selectColumn.call(this,v[0]),s=m.selectRow.call(this,v[1]);if(t.length<1){h.appendColumn.call(this,String(v[0]));r=this.matrix[0].length-1}if(s.length<1){h.appendRow.call(this,String(v[1]));w=this.matrix.length-1}this.matrix[w][r]=u;return this};f.prototype.type=function(r){if(!arguments.length){return this.meta.type}this.meta.type=(r?String(r):undefined);return this};l(f.prototype,h);l(f.prototype,q);l(f.prototype,g);l(f.prototype,p);l(f.prototype,m);l(f.prototype,j);l(f.prototype,i);l(f.prototype,o);f.parser=n(f);if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataset",[],function(){return f})}k.Keen=k.Keen||{};k.Keen.Dataset=f;k.Dataset=f}).call(this,typeof window!=="undefined"?window:typeof d!=="undefined"?d:typeof self!=="undefined"?self:{})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../utils/extend":27,"./modifiers/append":3,"./modifiers/delete":4,"./modifiers/filter":5,"./modifiers/insert":6,"./modifiers/select":7,"./modifiers/sort":8,"./modifiers/update":9,"./utils/analyses":10,"./utils/parsers":13}],3:[function(d,f,c){var b=d("../utils/create-null-list"),h=d("../../utils/each");f.exports={appendColumn:g,appendRow:a};function g(m,j){var i=this,l=Array.prototype.slice.call(arguments,2),k=(m!==undefined)?m:null;if(typeof j==="function"){i.matrix[0].push(k);h(i.matrix,function(p,o){var n;if(o>0){n=j.call(i,p,o);if(typeof n==="undefined"){n=null}i.matrix[o].push(n)}})}else{if(!j||j instanceof Array){j=j||[];if(j.length<=i.matrix.length-1){j=j.concat(b(i.matrix.length-1-j.length))}else{h(j,function(o,n){if(i.matrix.length-1<j.length){a.call(i,String(i.matrix.length))}})}i.matrix[0].push(k);h(j,function(o,n){i.matrix[n+1][i.matrix[0].length-1]=o})}}return i}function a(n,j){var i=this,m=Array.prototype.slice.call(arguments,2),l=(n!==undefined)?n:null,k=[];k.push(l);if(typeof j==="function"){h(i.matrix[0],function(q,r){var p,o;if(r>0){p=i.selectColumn(r);o=j.call(i,p,r);if(typeof o==="undefined"){o=null}k.push(o)}});i.matrix.push(k)}else{if(!j||j instanceof Array){j=j||[];if(j.length<=i.matrix[0].length-1){j=j.concat(b(i.matrix[0].length-1-j.length))}else{h(j,function(p,o){if(i.matrix[0].length-1<j.length){g.call(i,String(i.matrix[0].length))}})}i.matrix.push(k.concat(j))}}return i}},{"../../utils/each":24,"../utils/create-null-list":11}],4:[function(d,f,c){var g=d("../../utils/each");f.exports={deleteColumn:a,deleteRow:b};function a(j){var h=this,i=(typeof j==="number")?j:this.matrix[0].indexOf(j);if(i>-1){g(h.matrix,function(l,k){h.matrix[k].splice(i,1)})}return h}function b(i){var h=(typeof i==="number")?i:this.selectColumn(0).indexOf(i);if(h>-1){this.matrix.splice(h,1)}return this}},{"../../utils/each":24}],5:[function(c,d,b){var f=c("../../utils/each");d.exports={filterColumns:a,filterRows:g};function a(i){var h=this,j=new Array();f(h.matrix,function(l,k){j.push([])});f(h.matrix[0],function(k,l){var m=h.selectColumn(l);if(l==0||i.call(h,m,l)){f(m,function(n,o){j[o].push(n)})}});h.data(j);return h}function g(i){var h=this,j=[];f(h.matrix,function(l,k){if(k==0||i.call(h,l,k)){j.push(l)}});h.data(j);return h}},{"../../utils/each":24}],6:[function(f,b,g){var i=f("../../utils/each");var h=f("../utils/create-null-list");var c=f("./append");var k=c.appendRow,d=c.appendColumn;b.exports={insertColumn:a,insertRow:j};function a(o,p,m){var l=this,n;n=(p!==undefined)?p:null;if(typeof m==="function"){l.matrix[0].splice(o,0,n);i(l.matrix,function(s,r){var q;if(r>0){q=m.call(l,s,r);if(typeof q==="undefined"){q=null}l.matrix[r].splice(o,0,q)}})}else{if(!m||m instanceof Array){m=m||[];if(m.length<=l.matrix.length-1){m=m.concat(h(l.matrix.length-1-m.length))}else{i(m,function(r,q){if(l.matrix.length-1<m.length){k.call(l,String(l.matrix.length))}})}l.matrix[0].splice(o,0,n);i(m,function(r,q){l.matrix[q+1].splice(o,0,r)})}}return l}function j(p,q,m){var l=this,o,n=[];o=(q!==undefined)?q:null;n.push(o);if(typeof m==="function"){i(l.matrix[0],function(t,u){var s,r;if(u>0){s=l.selectColumn(u);r=m.call(l,s,u);if(typeof r==="undefined"){r=null}n.push(r)}});l.matrix.splice(p,0,n)}else{if(!m||m instanceof Array){m=m||[];if(m.length<=l.matrix[0].length-1){m=m.concat(h(l.matrix[0].length-1-m.length))}else{i(m,function(s,r){if(l.matrix[0].length-1<m.length){d.call(l,String(l.matrix[0].length))}})}l.matrix.splice(p,0,n.concat(m))}}return l}},{"../../utils/each":24,"../utils/create-null-list":11,"./append":3}],7:[function(d,f,c){var g=d("../../utils/each");f.exports={selectColumn:b,selectRow:a};function b(j){var h=new Array(),i=(typeof j==="number")?j:this.matrix[0].indexOf(j);if(i>-1&&"undefined"!==typeof this.matrix[0][i]){g(this.matrix,function(l,k){h.push(l[i])})}return h}function a(j){var h=new Array(),i=(typeof j==="number")?j:this.selectColumn(0).indexOf(j);if(i>-1&&"undefined"!==typeof this.matrix[i]){h=this.matrix[i]}return h}},{"../../utils/each":24}],8:[function(d,f,c){var g=d("../../utils/each");f.exports={sortColumns:b,sortRows:a};function b(m,i){var h=this,j=this.matrix[0].slice(1),l=[],n=[],k=i||this.getColumnLabel;g(j,function(o,p){l.push(h.selectColumn(p+1).slice(0))});l.sort(function(p,o){var q=k.call(h,p)>k.call(h,o);if(q){return(m==="asc"?1:-1)}else{if(!q){return(m==="asc"?-1:1)}else{return 0}}});g(l,function(o,p){h.deleteColumn(p+1).insertColumn(p+1,o[0],o.slice(1))});return h}function a(m,j){var i=this,k=this.matrix.slice(0,1),h=this.matrix.slice(1),l=j||this.getRowIndex;h.sort(function(o,n){var p=l.call(i,o)>l.call(i,n);if(p){return(m==="asc"?1:-1)}else{if(!p){return(m==="asc"?-1:1)}else{return 0}}});i.data(k.concat(h));return i}},{"../../utils/each":24}],9:[function(f,a,g){var j=f("../../utils/each");var h=f("../utils/create-null-list");var b=f("./append");var k=b.appendRow,d=b.appendColumn;a.exports={updateColumn:i,updateRow:c};function i(o,m){var l=this,n=(typeof o==="number")?o:this.matrix[0].indexOf(o);if(n>-1){if(typeof m==="function"){j(l.data(),function(r,q){var p;if(q>0){p=m.call(l,r[n],q,r);if(typeof p!=="undefined"){l.matrix[q][n]=p}}})}else{if(!m||m instanceof Array){m=m||[];if(m.length<=l.data().length-1){m=m.concat(h(l.data().length-1-m.length))}else{j(m,function(q,p){if(l.matrix.length-1<m.length){k.call(l,String(l.matrix.length))}})}j(m,function(q,p){l.matrix[p+1][n]=q})}}}return l}function c(o,m){var l=this,n=(typeof o==="number")?o:this.selectColumn(0).indexOf(o);if(n>-1){if(typeof m==="function"){j(l.data()[n],function(s,r){var q=l.selectColumn(r),p=m.call(l,s,r,q);if(typeof p!=="undefined"){l.matrix[n][r]=p}})}else{if(!m||m instanceof Array){m=m||[];if(m.length<=l.matrix[0].length-1){m=m.concat(h(l.matrix[0].length-1-m.length))}else{j(m,function(q,p){if(l.matrix[0].length-1<m.length){d.call(l,String(l.matrix[0].length))}})}j(m,function(q,p){l.matrix[n][p+1]=q})}}}return l}},{"../../utils/each":24,"../utils/create-null-list":11,"./append":3}],10:[function(d,c,h){var l=d("../../utils/each"),k=d("../../utils/extend");var a={};var f={average:b,maximum:g,minimum:j,sum:i};function b(m,r,n){var q=m.slice(r||0,(n?n+1:m.length)),o=0,p=null;l(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){o+=parseFloat(t)}});return o/q.length}function g(m,q,n){var p=m.slice(q||0,(n?n+1:m.length)),o=[];l(p,function(s,r){if(typeof s==="number"&&!isNaN(parseFloat(s))){o.push(parseFloat(s))}});return Math.max.apply(Math,o)}function j(m,q,n){var p=m.slice(q||0,(n?n+1:m.length)),o=[];l(p,function(s,r){if(typeof s==="number"&&!isNaN(parseFloat(s))){o.push(parseFloat(s))}});return Math.min.apply(Math,o)}function i(m,q,n){var p=m.slice(q||0,(n?n+1:m.length)),o=0;l(p,function(s,r){if(typeof s==="number"&&!isNaN(parseFloat(s))){o+=parseFloat(s)}});return o}l(f,function(o,m){var n=m.charAt(0).toUpperCase()+m.slice(1);a["getColumn"+n]=a["getRow"+n]=function(p){return this[m](p,1)}});a.getColumnLabel=a.getRowIndex=function(m){return m[0]};k(f,a);c.exports=f},{"../../utils/each":24,"../../utils/extend":27}],11:[function(b,c,a){c.exports=function(d){var g=new Array();for(var f=0;f<d;f++){g.push(null)}return g}},{}],12:[function(b,c,a){c.exports=d;function d(g){var k={};for(var h in g){if(!g.hasOwnProperty(h)){continue}if((typeof g[h])=="object"&&g[h]!==null){var j=d(g[h]);for(var f in j){if(!j.hasOwnProperty(f)){continue}k[h+"."+f]=j[f]}}else{k[h]=g[h]}}return k}},{}],13:[function(f,c,j){var b;var p=f("../../utils/each"),a=f("../utils/flatten");var q={metric:m,interval:i,"grouped-metric":o,"grouped-interval":r,"double-grouped-metric":h,"double-grouped-interval":g,funnel:n,list:k,extraction:d};c.exports=l;function l(s){b=s;return function(u){var t=Array.prototype.slice.call(arguments,1);if(!q[u]){throw"Requested parser does not exist"}else{return q[u].apply(this,t)}}}function m(){return function(s){return new b().set(["Value","Result"],s.result).type("metric")}}function i(){var s=Array.prototype.slice.call(arguments);return function(t){var u=new b().type("interval");p(t.result,function(v,x){var w=s[0]&&s[0]==="timeframe.end"?v.timeframe.end:v.timeframe.start;u.set(["Result",w],v.value)});return u}}function o(){return function(s){var t=new b().type("grouped-metric");p(s.result,function(u,w){var v;p(u,function(y,x){if(x!=="result"){v=x}});t.set(["Result",String(u[v])],u.result)});return t}}function r(){var s=Array.prototype.slice.call(arguments);return function(t){var u=new b().type("grouped-interval");p(t.result,function(v,x){var w=s[0]&&s[0]==="timeframe.end"?v.timeframe.end:v.timeframe.start;if(v.value.length){p(v.value,function(A,z){var y;p(A,function(C,B){if(B!=="result"){y=B}});u.set([String(A[y]),w],A.result)})}else{u.appendRow(w)}});return u}}function h(){var s=Array.prototype.slice.call(arguments);if(!s[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(t){var u=new b().type("double-grouped-metric");p(t.result,function(v,w){var x=v[s[0][0]]+" "+v[s[0][1]];u.set(["Result",x],v.result)});return u}}function g(){var s=Array.prototype.slice.call(arguments);if(!s[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(t){var u=new b().type("double-grouped-interval");p(t.result,function(v,x){var w=s[1]&&s[1]==="timeframe.end"?v.timeframe.end:v.timeframe.start;p(v.value,function(A,z){var y=A[s[0][0]]+" "+A[s[0][1]];u.set([y,w],A.result)})});return u}}function n(){return function(u){var s,t,v;if(typeof u.steps!=="undefined"&&typeof u.result!=="undefined"&&u.result instanceof Array){s=u.result;t=u.steps}else{if(typeof u.result.steps!=="undefined"&&typeof u.result.result!=="undefined"&&u.result.result instanceof Array){s=u.result.result;t=u.result.steps}}v=new b().type("funnel");v.appendColumn("Step Value");p(s,function(x,w){if(typeof t!=="undefined"&&t[w]){v.appendRow(String(t[w].event_collection),[x])}});return v}}function k(){return function(s){var t=new b().type("list");p(s.result,function(v,u){t.set(["Result",String(u+1)],v)});return t}}function d(){return function(s){var t=new b().type("extraction");p(s.result,function(u,v){p(a(u),function(x,w){t.set([w,String(v+1)],x)})});t.deleteColumn(0);return t}}},{"../../utils/each":24,"../utils/flatten":12}],14:[function(b,c,a){(function(d){(function(o){var g=b("./dataset"),l=b("./data");var q=b("./utils/each"),p=b("./utils/extend"),m=b("./utils/assert-date-string"),k=b("./utils/escape-html");function f(){if(this instanceof f===false){return new f()}this.dataset=new g();this.view={_prepared:false,_rendered:false,_artifacts:{},chartOptions:{},colors:["#00bbde","#fe6672","#eeb058","#8a8ad6","#ff855c","#00cfbb","#5a9eed","#73d483","#c879bb","#0099b6","#d74d58","#cb9141","#6b6bb6","#d86945","#00aa99","#4281c9","#57b566","#ac5c9e","#27cceb","#ff818b","#f6bf71","#9b9be1","#ff9b79","#26dfcd","#73aff4","#87e096","#d88bcb"],colorMapping:{},dateFormat:undefined,el:undefined,height:undefined,indexBy:"timeframe.start",labels:[],labelMapping:{},library:"default",notes:undefined,sortGroups:undefined,sortIntervals:undefined,stacked:false,theme:"keen-dataviz",title:undefined,type:undefined,width:undefined};f.visuals.push(this)}f.libraries={"default":{}};if("undefined"!==typeof window){f.libraries["default"]=b("./libraries")(f)}f.visuals=[];f.register=function(r,s){f.libraries[r]=f.libraries[r]||{};q(s,function(u,t){f.libraries[r][t]=u})};f.find=function(t){if(!arguments.length){return f.visuals}var s=t.nodeName?t:document.querySelector(t),r=null;q(f.visuals,function(u){if(s==u.el()){r=u;return false}});return r};f.prototype.attributes=function(s){if(!arguments.length){return this.view}var r=this.view;q(s,function(u,t){if(t==="chartType"){t="type"}r[t]=u});return this};f.prototype.call=function(r){r.call(this);return this};f.prototype.chartOptions=function(s){var r=this;if(!arguments.length){return this.view.chartOptions}if(s===null){this.view.chartOptions={}}else{if(typeof s==="object"){q(s,function(u,t){r.view.chartOptions[t]=(u?u:null)})}}return this};f.prototype.colors=function(r){if(!arguments.length){return this.view.colors}this.view.colors=(r instanceof Array?r:[]);return this};f.prototype.colorMapping=function(s){var r=this;if(!arguments.length){return this.view.colorMapping}if(s===null){this.view.colorMapping={}}else{if(typeof s==="object"){q(s,function(u,t){r.view.colorMapping[t]=(u?u:null)})}}return this};f.prototype.data=l;f.prototype.dateFormat=function(r){if(!arguments.length){return this.view.dateFormat}if(typeof r==="string"||typeof r==="function"){this.view.dateFormat=r}else{this.view.dateFormat=undefined}return this};f.prototype.destroy=function(){var r=this.library(),t=this.type(),s=this.el();if(f.libraries[r]&&f.libraries[r][t]){f.libraries[r][t].destroy.call(this)}if(s){s.innerHTML=""}this.view._prepared=false;this.view._rendered=false;this.view._artifacts={};return this};f.prototype.el=function(s){var r=this;if(!arguments.length){return this.view.el}j(function(){if(s&&s!==null){if(s.nodeName){r.view.el=s}else{if(document.querySelector){r.view.el=document.querySelector(s)}}}else{r.view.el=undefined}});return this};f.prototype.height=function(r){if(!arguments.length){return this.view.height}this.view.height=(!isNaN(parseInt(r))?parseInt(r):null);return this};f.prototype.indexBy=function(r){if(!arguments.length){return this.view.indexBy}this.view.indexBy=(r?String(r):"timeframe.start");return this};f.prototype.labels=function(r){if(!arguments.length){return this.view.labels}this.view.labels=(r instanceof Array?r:[]);if(this.data()[0].length===2&&!m(this.data()[1][0])){this.dataset.updateColumn(0,function(t,s){if(this.view.labels[s-1]){return String(this.view.labels[s-1])}else{return t}}.bind(this))}else{this.dataset.updateRow(0,function(t,s){if(s>0&&this.view.labels[s-1]){return String(this.view.labels[s-1])}else{return t}}.bind(this))}return this};f.prototype.labelMapping=function(r){if(!arguments.length){return this.view.labelMapping}if(r===null){this.view.labelMapping={}}else{if(typeof r==="object"){q(r,function(t,s){this.view.labelMapping[s]=(t?t:null)}.bind(this))}}if(this.data()[0].length===2&&!m(this.data()[1][0])){this.dataset.updateColumn(0,function(s){if(this.view.labelMapping[s]){return k(String(this.view.labelMapping[s]))}else{return k(s)}}.bind(this))}else{this.dataset.updateRow(0,function(s){if(this.view.labelMapping[s]){return k(String(this.view.labelMapping[s]))}else{return k(s)}}.bind(this))}return this};f.prototype.library=function(r){if(!arguments.length){return this.view.library}this.view.library=(r?String(r):null);return this};f.prototype.message=function(){var r;if(this.view._rendered){this.destroy()}if(this.el()){this.el().innerHTML="";var s=f.libraries["default"].message;if(s.render){s.render.apply(this,arguments)}}return this};f.prototype.notes=function(r){if(!arguments.length){return this.view.notes}this.view.notes=(r?String(r):null);return this};f.prototype.prepare=function(){var s=this,r;if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}j(function(){if(s.view._rendered){s.destroy()}if(s.el()){s.el().innerHTML="";r=f.libraries["default"].spinner;if(r.render){r.render.call(s)}s.view._prepared=true}});return this};f.prototype.render=function(){var t=this,r=f.libraries["default"].spinner,s=this.library(),v=this.type(),u=this.el();if(!this.el()){this.message("A DOM element is required. Check out the .el() method.");throw"A DOM element is required. Check out the .el() method.";return}if(!this.type()){this.message("A chart type is required. Check out the .type() method.");throw"A chart type is required. Check out the .type() method.";return}j(function(){if(t.view._prepared&&r.destroy){r.destroy.apply(t,arguments)}t.el().innerHTML="";if(f.libraries[s]==="undefined"){t.message("Incorrect library");throw"Incorrect library";return}else{if(typeof f.libraries[s][v]==="undefined"){this.message("Incorrect chart type");throw"Incorrect chart type";return}else{n(t.el(),{notes:t.notes(),theme:t.theme(),title:t.title()});f.libraries[s][v].render.call(t);t.view._rendered=true}}});return this};f.prototype.sortGroups=function(r){if(!arguments.length){return this.view.sortGroups}this.view.sortGroups=(r?String(r):null);if(this.view.sortGroups&&this.data().length>1){if(m(this.data()[1][0])){this.dataset.sortColumns(this.view.sortGroups,this.dataset.getColumnSum)}else{this.dataset.sortRows(this.view.sortGroups,this.dataset.getRowSum)}}return this};f.prototype.sortIntervals=function(r){if(!arguments.length){return this.view.sortInterval}this.view.sortIntervals=(r?String(r):null);if(this.view.sortIntervals){this.dataset.sortRows(this.view.sortIntervals)}return this};f.prototype.stacked=function(r){if(!arguments.length){return this.view.stacked}this.view.stacked=r?true:false;return this};f.prototype.theme=function(r){if(!arguments.length){return this.view.theme}this.view.theme=(r?String(r):null);return this};f.prototype.title=function(r){if(!arguments.length){return this.view.title}this.view.title=(r?String(r):null);return this};f.prototype.type=function(r){if(!arguments.length){return this.view.type}this.view.type=(r?i(r):null);return this};f.prototype.update=function(){var r=this.library(),t=this.type(),s=this.el();if(r&&t&&s&&f.libraries[r][t].update){f.libraries[r][t].update.apply(this,arguments)}return this};f.prototype.width=function(r){if(!arguments.length){return this.view.width}this.view.width=(!isNaN(parseInt(r))?parseInt(r):null);return this};f.prototype.chartType=f.prototype.type;f.prototype.error=f.prototype.message;f.prototype.parseRawData=f.prototype.data;f.prototype.parseRequest=function(){return this};f.prototype.initialize=function(){return this};function n(t,r){var s="";s+='<div class="'+r.theme+'">';if(r.title){s+='<div class="'+r.theme+'-title">'+k(r.title)+"</div>"}s+='<div class="'+r.theme+'-stage"><div class="'+r.theme+'-rendering"></div></div>';if(r.notes){s+='<div class="'+r.theme+'-notes">'+k(r.notes)+"</div>"}s+="</div>";t.innerHTML=s}function i(s){var r={areachart:"area",barchart:"horizontal-bar",columnchart:"bar",linechart:"line",piechart:"pie"};return r[s]||s}function j(s){if("undefined"!==typeof document||"undefined"===typeof window){s();return}if(document.readyState==null&&document.addEventListener){document.addEventListener("DOMContentLoaded",function r(){document.removeEventListener("DOMContentLoaded",r,false);document.readyState="complete"},false);document.readyState="loading"}h(s)}function h(r){if(/in/.test(document.readyState)){setTimeout(function(){h(r)},9)}else{r()}}if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataviz",[],function(){return f})}o.Keen=o.Keen||{};o.Keen.Dataviz=f;o.Dataviz=f}).call(this,typeof window!=="undefined"?window:typeof d!=="undefined"?d:typeof self!=="undefined"?self:{})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./data":1,"./dataset":2,"./libraries":22,"./utils/assert-date-string":23,"./utils/each":24,"./utils/escape-html":25,"./utils/extend":27}],15:[function(b,c,a){c.exports=function(f,g){var h=Math.abs(new Date(f).getTime()-new Date(g).getTime());var d=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];if(h>=2419200000){return function(j){var i=new Date(j);return d[i.getMonth()]+" "+i.getFullYear()}}else{if(h>=86400000){return function(j){var i=new Date(j);return d[i.getMonth()]+" "+i.getDate()}}else{if(h>=3600000){return"%I:%M %p"}else{return"%I:%M:%S %p"}}}}},{}],16:[function(c,d,a){var f=c("d3");var b=c("../../../utils/assert-date-string");d.exports=function(q){var w=this,o=this.view._artifacts.c3,h=[],j=this.el().querySelector("."+this.theme()+"-rendering"),t=120;var u=this.view._artifacts.pagination={hidden:[],labels:[],position:0,range:Math.round((j.offsetHeight-78)/20),total:0};if(this.type()==="donut"||this.type()==="pie"){u.range=u.range>=5?5:u.range}for(var l=0;l<q.length;l++){if(q[l][0]!=="x"&&!b(q[l][1])){h.push(q[l][0])}}var m=f.select(j).append("svg").attr({"class":"keen-c3-legend",height:j.offsetHeight-10,width:t}).style({right:-t+"px",top:"10px"});var k=m.append("g").attr("class","keen-c3-legend-items");var g=20*u.range;var p=m.append("g").attr({"class":"keen-c3-legend-pagination",transform:function(){return"translate(2, "+g+")"}});s();function s(){u.labels=h.slice(u.position,u.position+u.range);u.total=h.length;v.call(w,u.labels);if(u.total>u.range){r.call(w)}o.resize()}function v(){k.selectAll("g").remove();var i=k.selectAll("g").data(u.labels);i.enter().append("g").attr("transform",function(y,x){return"translate(0, "+(20*x)+")"}).attr("data-id",function(x){return x}).style("opacity",function(y){var x=u.hidden.indexOf(y);return x<0?1:0.35}).each(function(x){f.select(this).append("text").attr({"font-size":12,"pointer-events":"none",x:15,y:9}).text(x).text(function(y){if(f.select(this).node().getBBox().width>105){return y.length<=15?y:y.substring(0,12)+"..."}else{return y}});f.select(this).append("rect").attr({height:14,width:110,x:0,y:0}).style({cursor:"pointer","fill-opacity":0});f.select(this).append("rect").attr({fill:o.color(x),height:10,"pointer-events":"none",rx:5,ry:5,width:10,x:0,y:0})}).on("mouseover",function(y,x){o.focus(y);if(y.length>15){f.select(j).append("div").attr("class","keen-c3-legend-label-overlay").style({"max-width":"75%",right:-t+"px",top:(5+(x+1)*20)+"px"}).html(y).append("div").attr("class","keen-c3-legend-label-overlay-pointer")}}).on("mouseout",function(x){o.revert();f.select(w.el().querySelector("."+w.theme()+"-rendering .keen-c3-legend-label-overlay")).remove()}).on("click",function(x){f.select(this).style("opacity",function(){var y=u.hidden.indexOf(x);if(y<0){u.hidden.push(x);return 0.35}else{u.hidden.splice(y,1);return 1}});o.toggle(x)});i.exit().remove()}function r(){p.selectAll("g").remove();p.selectAll("g").data([{direction:"reverse",path_d:"M0 10 L10 0 L20 10 Z"},{direction:"forward",path_d:"M0 0 L10 10 L20 0 Z"}]).enter().append("g").attr("transform",function(y,x){return"translate("+(x*20)+", 0)"}).each(function(i){f.select(this).append("path").attr("d",function(x){return x.path_d}).style({cursor:"pointer",fill:"#D7D7D7",stroke:"none"}).on("mouseover",function(x){f.select(this).style("fill","#4D4D4D")}).on("mouseout",function(x){f.select(this).style("fill","#D7D7D7")}).on("click",function(x){if(x.direction==="forward"){if(u.position+u.range<u.total){u.position=u.position+u.range}}else{if(u.position-u.range>=0){u.position=u.position-u.range}}s();n()})})}function n(){var i;if(document.selection&&document.selection.empty){i=document.selection;i.empty()}else{if(window.getSelection){i=window.getSelection();i.removeAllRanges()}}}}},{"../../../utils/assert-date-string":23,d3:31}],17:[function(c,d,b){var a=c("../../../utils/escape-html");d.exports=function(o,g,h,k){var s,f,j,r,p,m,q,n;j=this.config.tooltip_format_name||function(i){return i};m=this.config.tooltip_format_title||g;n=this.config.tooltip_format_value||h;for(var l=0;l<o.length;l++){if(!(o[l]&&(o[l].value||o[l].value===0))){continue}if(!r){p=m?m(o[l].x):o[l].x;r="<table class='"+this.CLASS.tooltip+"'>"+(p||p===0?"<tr><th colspan='2'>"+a(p)+"</th></tr>":"")}f=j(o[l].name);q=n(o[l].value,o[l].ratio,o[l].id,o[l].index);s=this.levelColor?this.levelColor(o[l].value):k(o[l].id);if(q){r+="<tr class='"+this.CLASS.tooltipName+"-"+o[l].id+"'>";r+="<td class='name'><span style='background-color:"+s+"'></span>"+a(f)+"</td>";r+="<td class='value'>"+a(q)+"</td>";r+="</tr>"}}return r+"</table>"}},{"../../../utils/escape-html":25}],18:[function(c,d,b){var a=c("../../utils/escape-html");d.exports={render:function(m){var j=document.createElement("div");var h=document.createElement("div");var l=document.createElement("span");var g=this.height()||140;var f=document.createElement("div");var k=document.createElement("div");j.className=this.theme();h.className=this.theme()+"-message";h.style.width=this.width()+"px";f.className=this.theme()+"-title";f.innerHTML=a(this.title()||"");k.className=this.theme()+"-notes";k.innerHTML=a(this.notes()||"");l.innerHTML=a(m)||"";h.appendChild(l);j.appendChild(f);j.appendChild(h);j.appendChild(k);this.el().innerHTML="";this.el().appendChild(j);var i=g-f.offsetHeight-k.offsetHeight;h.style.height=i+"px";h.style.paddingTop=(i/2-12)+"px"},update:function(){this.render()},destroy:function(){}}},{"../../utils/escape-html":25}],19:[function(d,f,c){var b=d("../../utils/pretty-number");var a=d("../../utils/escape-html");f.exports={render:function(){var k=this.colors()[0],l=this.theme(),o=this.title(),p="-",r=this.height()||140,i=this.width(),h=this.chartOptions(),m="",n="",q="",g,j;if(typeof this.data()[1][1]==="number"){p=this.data()[1][1]}g=p;if((typeof h.prettyNumber==="undefined"||h.prettyNumber===true)&&!isNaN(parseInt(p))){g=b(p)}if(h.prefix){n='<span class="'+l+'-metric-prefix">'+h.prefix+"</span>"}if(h.suffix){q='<span class="'+l+'-metric-suffix">'+h.suffix+"</span>"}m+='<div class="'+l+'">';m+='<div class="'+l+'-metric" style="background-color: '+k+"; width: "+(i?i+"px":"auto")+';" title="'+a(p)+'">';m+='<span class="'+l+'-metric-value">'+n+a(g)+q+"</span>";if(o){m+='<span class="'+l+'-metric-title">'+a(o)+"</span>"}m+="</div>";m+="</div>";this.el().innerHTML=m;j=this.el().querySelector("."+l+"-metric-value");j.style.paddingTop=((r-this.el().offsetHeight)/2)+"px";this.el().querySelector("."+l+"-metric").style.height=r+"px"},update:function(){this.render()},destroy:function(){}}},{"../../utils/escape-html":25,"../../utils/pretty-number":28}],20:[function(b,c,a){c.exports={render:function(){var h="",g=this.view._artifacts.spinner={},f=this.height()||35,j=(f-35)/2,i=["webkit","Moz","ms","O"],d=this.view._artifacts.radius=0,k;h+='<div class="'+this.theme()+'">';h+='<div class="keen-spinner-container" style="height: '+f+"px; padding-top: "+j+'px;">';h+='<div class="keen-spinner-indicator"></div>';h+="</div>";h+="</div>";this.el().innerHTML=h;k=this.el().querySelector(".keen-spinner-indicator");if(k.style.animationName===undefined){d=0;g.interval=setInterval(function(){d=(d===350)?0:d+10;for(var l=0;l<i.length;l++){k.style[i[l]]="rotate("+g.radius+"deg)"}},15)}},update:function(){this.render()},destroy:function(){if(this.view._artifacts.spinner){if(this.view._artifacts.spinner.interval){clearInterval(this.view._artifacts.spinner.interval)}this.view._artifacts.spinner.radius=0;try{delete this.view._artifacts.spinner}catch(d){this.view._artifacts.spinner=undefined}}this.el().innerHTML=""}}},{}],21:[function(d,f,b){var g=d("../../utils/each");var a=d("../../utils/escape-html");var h={height:undefined,width:undefined,stickyHeader:true,stickyFooter:false};function c(p,k,m){var o="";for(var n=0;n<p.length;n++){if(n>0){o+="<tr>";for(var l=0;l<p[n].length;l++){o+='<td style="min-width: '+(10*k[l])+"px; text-align: "+m[l]+';">'+a(p[n][l])+"</td>"}o+="</tr>"}}return o}f.exports={render:function(){var m=this.data(),l=this.el(),s=(this.height()||h.height)-this.el().offsetHeight,p=this.theme(),k=this.width()||h.width;var q="",r=new Array(m[0].length),t=new Array(m[0].length),j;var o=m.length===1&&m[0].length===0;if(o){this.message("No data to display");return}g(m,function(i){g(i,function(u,v){if(!t[v]){t[v]=0}r[v]=(typeof u==="number")?"right":"left";t[v]=(String(u).length>t[v])?String(u).length:t[v]})});q+='<div class="'+p+'-table" style="height: '+(s?s+"px":"auto")+"; width: "+(k?k+"px":"auto")+';">';q+='<table class="'+p+'-table-dataset">';q+="<thead>";q+="<tr>";for(var n=0;n<m[0].length;n++){q+='<th style="width: '+(10*t[n])+"px; text-align: "+r[n]+';">'+a(m[0][n])+"</th>"}q+="</tr>";q+="</thead>";q+="<tbody>";q+=c.bind(this,m,t,r)();q+="</tbody>";q+="</table>";q+='<table class="'+p+'-table-fixed-header">';q+="<thead>";q+="<tr>";for(var n=0;n<m[0].length;n++){q+='<th style="min-width: '+(10*t[n])+"px; text-align: "+r[n]+';">'+a(m[0][n])+"</th>"}q+="</tr>";q+="</thead>";q+="</table>";q+="</div>";l.querySelector("."+p+"-rendering").innerHTML=q;j=l.querySelector("."+p+"-table-fixed-header");l.querySelector("."+p+"-table").onscroll=function(i){j.style.top=i.target.scrollTop+"px"}},update:function(){this.render()},destroy:function(){var i=this.el().querySelector("."+this.theme()+"-table");if(i&&i.onscroll){i.onscroll=undefined}}}},{"../../utils/each":24,"../../utils/escape-html":25}],22:[function(d,c,h){var g=d("c3"),r=d("d3");var q=d("../utils/each"),n=d("../utils/extend"),o=d("../utils/extend-deep"),j=d("../utils/assert-date-string");var k=d("./c3/extensions/default-date-format");var i=d("./c3/extensions/paginating-legend");var m=d("./c3/extensions/tooltip-contents");var l={message:d("./default/message"),metric:d("./default/metric"),table:d("./default/table"),spinner:d("./default/spinner")};c.exports=function(t){var u,s;f(function(){if(u){clearTimeout(u)}s=(t.visuals.length>12)?1000:250;u=setTimeout(function(){q(t.visuals,function(v){if(v.view._artifacts.c3){v.view._artifacts.c3.resize()}})},s)});p();return l};function p(){var t=["area","area-spline","area-step","bar","donut","gauge","line","pie","step","spline","horizontal-area","horizontal-area-spline","horizontal-area-step","horizontal-bar","horizontal-line","horizontal-step","horizontal-spline"];function s(){var w,u,v;w={axis:{},color:{},data:{order:null},legend:{position:"right",show:true},padding:{},point:{focus:{expand:{enabled:false}},r:2,show:true},tooltip:{}};u={bindto:this.el().querySelector("."+this.theme()+"-rendering"),color:{pattern:this.colors()},data:{colors:n({},this.colorMapping()),columns:[],type:this.type().replace("horizontal-","")},size:{height:this.height()?this.height()-this.el().offsetHeight:400,width:this.width()},tooltip:{},transition:{duration:0}};v=o({},w,this.chartOptions());v=o(v,u);v.color.pattern=u.color.pattern;v.data.colors=u.data.colors;v.data.columns=u.data.columns;return v}q(t,function(v,u){l[v]={render:function(){var w=s.call(this);if(this.data()[0].length===1||this.data().length===1){this.message("No data to display");return}if(v==="gauge"){w.legend.position="bottom";w.data.columns=[[this.title()||this.data()[1][0],this.data()[1][1]]]}else{if(v==="pie"||v==="donut"){w.data.columns=this.data().slice(1)}else{if(v.indexOf("horizontal-")>-1){w.axis.rotated=v.indexOf("horizontal-")>-1}if(j(this.data()[1][0])){w.axis.x=w.axis.x||{};w.axis.x.type="timeseries";w.axis.x.tick=w.axis.x.tick||{format:this.dateFormat()||k(this.data()[1][0],this.data()[2]?this.data()[2][0]:this.data()[1][0]),culling:{max:5}};w.data.columns[0]=[];q(this.dataset.selectColumn(0),function(y,z){if(z>0){y=new Date(y)}w.data.columns[0][z]=y});w.data.columns[0][0]="x";w.data.x="x";if(this.stacked()&&this.data()[0].length>2){w.data.groups=[this.dataset.selectRow(0).slice(1)]}}else{w.axis.x=w.axis.x||{};w.axis.x.type="category";w.axis.x.categories=this.dataset.selectColumn(0).slice(1);if(this.stacked()&&this.data()[0].length>2){w.data.groups=[this.dataset.selectRow(0).slice(1)]}}if(this.data()[0].length===2){w.legend.show=false}q(this.data()[0],function(y,z){if(z>0){w.data.columns.push(this.dataset.selectColumn(z))}}.bind(this))}}if(w.legend.show===true&&w.legend.position==="right"&&["gauge"].indexOf(v.replace("horizontal-",""))){w.data.color=b.bind(this);w.tooltip={contents:m,format:{value:a.bind(this)}};w.legend.show=false;var x=this.el().querySelector("."+this.theme()+"-rendering").offsetWidth-100;w.size.width=w.size.width||x;this.el().querySelector("."+this.theme()+"-rendering").setAttribute("style","margin-right: 120px;");this.view._artifacts.c3=g.generate(w);i.call(this,w.data.columns)}else{w.legend.show=false;this.view._artifacts.c3=g.generate(w)}},update:function(){this.render()},destroy:function(){if(this.view._artifacts.c3){this.view._artifacts.c3.destroy();this.view._artifacts.c3=null}}}})}function b(s,u){var t;if(this.view._artifacts.pagination&&this.type()!=="gauge"){t=this.view._artifacts.pagination.labels;if((u.id&&t.indexOf(u.id)>-1)||(u&&!u.id&&t.indexOf(u)>-1)){return s}else{if(this.type()==="donut"||this.type()==="pie"){return"rgba(0,0,0,.1)"}else{return"rgba(0,0,0,.07)"}}}else{return s}}function a(v,u,w,s){var t;if(this.view._artifacts.pagination&&this.type()!=="gauge"){t=this.view._artifacts.pagination.labels;if(t.indexOf(w)>-1){return v}}else{return v}}function f(s){if("undefined"===typeof window){return}window.onresize=window.resize=function(){};if(window.addEventListener){window.addEventListener("resize",s,true)}else{if(window.attachEvent){window.attachEvent("onresize",s)}}}},{"../utils/assert-date-string":23,"../utils/each":24,"../utils/extend":27,"../utils/extend-deep":26,"./c3/extensions/default-date-format":15,"./c3/extensions/paginating-legend":16,"./c3/extensions/tooltip-contents":17,"./default/message":18,"./default/metric":19,"./default/spinner":20,"./default/table":21,c3:29,d3:31}],23:[function(d,f,a){f.exports=function(g){if(typeof g==="object"){return c(g)}else{if(typeof g==="string"){return b(g)}}return false};function c(g){if(g!==null&&typeof g.getTime==="function"&&!isNaN(g.getTime())){return true}return false}function b(g){var h=/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i;return h.test(g)}},{}],24:[function(b,c,a){c.exports=d;function d(h,f,g){var i;if(!h){return 0}g=!g?h:g;if(h instanceof Array){for(i=0;i<h.length;i++){if(f.call(g,h[i],i,h)===false){return 0}}}else{for(i in h){if(h.hasOwnProperty(i)){if(f.call(g,h[i],i,h)===false){return 0}}}}return 1}},{}],25:[function(c,d,b){var f=/["'&<>]/;d.exports=a;function a(i){var l=""+i;var h=f.exec(l);if(!h){return l}var k;var j="";var g=0;var m=0;for(g=h.index;g<l.length;g++){switch(l.charCodeAt(g)){case 34:k="&quot;";break;case 38:k="&amp;";break;case 39:k="&#39;";break;case 60:k="&lt;";break;case 62:k="&gt;";break;default:continue}if(m!==g){j+=l.substring(m,g)}m=g+1;j+=k}return m!==g?j+l.substring(m,g):j}},{}],26:[function(b,c,a){var f=b("./each");c.exports=d;function d(h){for(var g=1;g<arguments.length;g++){f(arguments[g],function(j,i){if((typeof h[i]!=="undefined"&&typeof j!=="undefined")&&(typeof h[i]==="object"&&typeof j==="object")&&(h[i]!==null&&j!==null)){d(h[i],j)}else{h[i]=j}})}return h}},{"./each":24}],27:[function(b,c,a){c.exports=d;function d(g){for(var f=1;f<arguments.length;f++){for(var h in arguments[f]){g[h]=arguments[f][h]}}return g}},{}],28:[function(c,d,b){d.exports=a;function a(f){var f=Number(f),i=f.toPrecision(3),j="",g=["","k","M","B","T"];if(Number(i)==f&&String(f).length<=4){return String(f)}if(Math.abs(f)>=1000000000000000){return i}if(f>=1||f<=-1){if(f<0){f=-f;j="-"}return j+h(f,0)}else{return f.toPrecision(3)}function h(k,m){var k=String(k);var l=k.split(".");if(l.length>1){k=l[0];var o=l[1];if(k.length==2&&o.length>0){if(o.length>0){k=k+"."+o.charAt(0)}else{k+="0"}}else{if(k.length==1&&o.length>0){k=k+"."+o.charAt(0);if(o.length>1){k+=o.charAt(1)}else{k+="0"}}}}var n=k.length;if(k.split(".").length>1){n--}if(n<=3){return String(k)+g[m]}else{return h(Number(k)/1000,m+1)}}}},{}],29:[function(b,c,a){(function(ad){var m={version:"0.4.10"};var B,F,p;function U(aw){this.owner=aw}function z(ay,aw){if(Object.create){aw.prototype=Object.create(ay.prototype)}else{var ax=function ax(){};ax.prototype=ay.prototype;aw.prototype=new ax()}aw.prototype.constructor=aw;return aw}function Z(ay){var ax=this.internal=new ap(this);ax.loadConfig(ay);ax.init();(function aw(az,aB,aA){Object.keys(az).forEach(function(aC){aB[aC]=az[aC].bind(aA);if(Object.keys(az[aC]).length>0){aw(az[aC],aB[aC],aA)}})})(B,this,this)}function ap(ax){var aw=this;aw.d3=ad.d3?ad.d3:typeof b!=="undefined"?b("d3"):undefined;aw.api=ax;aw.config=aw.getDefaultConfig();aw.data={};aw.cache={};aw.axes={}}m.generate=function(aw){return new Z(aw)};m.chart={fn:Z.prototype,internal:{fn:ap.prototype,axis:{fn:x.prototype}}};B=m.chart.fn;F=m.chart.internal.fn;p=m.chart.internal.axis.fn;F.init=function(){var aw=this,ax=aw.config;aw.initParams();if(ax.data_url){aw.convertUrlToData(ax.data_url,ax.data_mimeType,ax.data_keys,aw.initWithData)}else{if(ax.data_json){aw.initWithData(aw.convertJsonToData(ax.data_json,ax.data_keys))}else{if(ax.data_rows){aw.initWithData(aw.convertRowsToData(ax.data_rows))}else{if(ax.data_columns){aw.initWithData(aw.convertColumnsToData(ax.data_columns))}else{throw Error("url or json or rows or columns is required.")}}}}};F.initParams=function(){var aw=this,ay=aw.d3,ax=aw.config;aw.clipId="c3-"+(+new Date())+"-clip",aw.clipIdForXAxis=aw.clipId+"-xaxis",aw.clipIdForYAxis=aw.clipId+"-yaxis",aw.clipIdForGrid=aw.clipId+"-grid",aw.clipIdForSubchart=aw.clipId+"-subchart",aw.clipPath=aw.getClipPath(aw.clipId),aw.clipPathForXAxis=aw.getClipPath(aw.clipIdForXAxis),aw.clipPathForYAxis=aw.getClipPath(aw.clipIdForYAxis);aw.clipPathForGrid=aw.getClipPath(aw.clipIdForGrid),aw.clipPathForSubchart=aw.getClipPath(aw.clipIdForSubchart),aw.dragStart=null;aw.dragging=false;aw.flowing=false;aw.cancelClick=false;aw.mouseover=false;aw.transiting=false;aw.color=aw.generateColor();aw.levelColor=aw.generateLevelColor();aw.dataTimeFormat=ax.data_xLocaltime?ay.time.format:ay.time.format.utc;aw.axisTimeFormat=ax.axis_x_localtime?ay.time.format:ay.time.format.utc;aw.defaultAxisTimeFormat=aw.axisTimeFormat.multi([[".%L",function(az){return az.getMilliseconds()}],[":%S",function(az){return az.getSeconds()}],["%I:%M",function(az){return az.getMinutes()}],["%I %p",function(az){return az.getHours()}],["%-m/%-d",function(az){return az.getDay()&&az.getDate()!==1}],["%-m/%-d",function(az){return az.getDate()!==1}],["%-m/%-d",function(az){return az.getMonth()}],["%Y/%-m/%-d",function(){return true}]]);aw.hiddenTargetIds=[];aw.hiddenLegendIds=[];aw.focusedTargetIds=[];aw.defocusedTargetIds=[];aw.xOrient=ax.axis_rotated?"left":"bottom";aw.yOrient=ax.axis_rotated?(ax.axis_y_inner?"top":"bottom"):(ax.axis_y_inner?"right":"left");aw.y2Orient=ax.axis_rotated?(ax.axis_y2_inner?"bottom":"top"):(ax.axis_y2_inner?"left":"right");aw.subXOrient=ax.axis_rotated?"left":"bottom";aw.isLegendRight=ax.legend_position==="right";aw.isLegendInset=ax.legend_position==="inset";aw.isLegendTop=ax.legend_inset_anchor==="top-left"||ax.legend_inset_anchor==="top-right";aw.isLegendLeft=ax.legend_inset_anchor==="top-left"||ax.legend_inset_anchor==="bottom-left";aw.legendStep=0;aw.legendItemWidth=0;aw.legendItemHeight=0;aw.currentMaxTickWidths={x:0,y:0,y2:0};aw.rotated_padding_left=30;aw.rotated_padding_right=ax.axis_rotated&&!ax.axis_x_show?0:30;aw.rotated_padding_top=5;aw.withoutFadeIn={};aw.intervalForObserveInserted=undefined;aw.axes.subx=ay.selectAll([])};F.initChartElements=function(){if(this.initBar){this.initBar()}if(this.initLine){this.initLine()}if(this.initArc){this.initArc()}if(this.initGauge){this.initGauge()}if(this.initText){this.initText()}};F.initWithData=function(aB){var ay=this,aA=ay.d3,az=ay.config;var ax,aw,aC=true;ay.axis=new x(ay);if(ay.initPie){ay.initPie()}if(ay.initBrush){ay.initBrush()}if(ay.initZoom){ay.initZoom()}if(!az.bindto){ay.selectChart=aA.selectAll([])}else{if(typeof az.bindto.node==="function"){ay.selectChart=az.bindto}else{ay.selectChart=aA.select(az.bindto)}}if(ay.selectChart.empty()){ay.selectChart=aA.select(document.createElement("div")).style("opacity",0);ay.observeInserted(ay.selectChart);aC=false}ay.selectChart.html("").classed("c3",true);ay.data.xs={};ay.data.targets=ay.convertDataToTargets(aB);if(az.data_filter){ay.data.targets=ay.data.targets.filter(az.data_filter)}if(az.data_hide){ay.addHiddenTargetIds(az.data_hide===true?ay.mapToIds(ay.data.targets):az.data_hide)}if(az.legend_hide){ay.addHiddenLegendIds(az.legend_hide===true?ay.mapToIds(ay.data.targets):az.legend_hide)}if(ay.hasType("gauge")){az.legend_show=false}ay.updateSizes();ay.updateScales();ay.x.domain(aA.extent(ay.getXDomain(ay.data.targets)));ay.y.domain(ay.getYDomain(ay.data.targets,"y"));ay.y2.domain(ay.getYDomain(ay.data.targets,"y2"));ay.subX.domain(ay.x.domain());ay.subY.domain(ay.y.domain());ay.subY2.domain(ay.y2.domain());ay.orgXDomain=ay.x.domain();if(ay.brush){ay.brush.scale(ay.subX)}if(az.zoom_enabled){ay.zoom.scale(ay.x)}ay.svg=ay.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return az.onmouseover.call(ay)}).on("mouseleave",function(){return az.onmouseout.call(ay)});ax=ay.svg.append("defs");ay.clipChart=ay.appendClip(ax,ay.clipId);ay.clipXAxis=ay.appendClip(ax,ay.clipIdForXAxis);ay.clipYAxis=ay.appendClip(ax,ay.clipIdForYAxis);ay.clipGrid=ay.appendClip(ax,ay.clipIdForGrid);ay.clipSubchart=ay.appendClip(ax,ay.clipIdForSubchart);ay.updateSvgSize();aw=ay.main=ay.svg.append("g").attr("transform",ay.getTranslate("main"));if(ay.initSubchart){ay.initSubchart()}if(ay.initTooltip){ay.initTooltip()}if(ay.initLegend){ay.initLegend()}aw.append("text").attr("class",D.text+" "+D.empty).attr("text-anchor","middle").attr("dominant-baseline","middle");ay.initRegion();ay.initGrid();aw.append("g").attr("clip-path",ay.clipPath).attr("class",D.chart);if(az.grid_lines_front){ay.initGridLines()}ay.initEventRect();ay.initChartElements();aw.insert("rect",az.zoom_privileged?null:"g."+D.regions).attr("class",D.zoomRect).attr("width",ay.width).attr("height",ay.height).style("opacity",0).on("dblclick.zoom",null);if(az.axis_x_extent){ay.brush.extent(ay.getDefaultExtent())}ay.axis.init();ay.updateTargets(ay.data.targets);if(aC){ay.updateDimension();ay.config.oninit.call(ay);ay.redraw({withTransition:false,withTransform:true,withUpdateXDomain:true,withUpdateOrgXDomain:true,withTransitionForAxis:false})}if(ad.onresize==null){ad.onresize=ay.generateResize()}if(ad.onresize.add){ad.onresize.add(function(){az.onresize.call(ay)});ad.onresize.add(function(){ay.api.flush()});ad.onresize.add(function(){az.onresized.call(ay)})}ay.api.element=ay.selectChart.node()};F.smoothLines=function(ay,ax){var aw=this;if(ax==="grid"){ay.each(function(){var aD=aw.d3.select(this),aA=aD.attr("x1"),az=aD.attr("x2"),aC=aD.attr("y1"),aB=aD.attr("y2");aD.attr({x1:Math.ceil(aA),x2:Math.ceil(az),y1:Math.ceil(aC),y2:Math.ceil(aB)})})}};F.updateSizes=function(){var ax=this,az=ax.config;var aw=ax.legend?ax.getLegendHeight():0,aC=ax.legend?ax.getLegendWidth():0,aB=ax.isLegendRight||ax.isLegendInset?0:aw,ay=ax.hasArcType(),aA=az.axis_rotated||ay?0:ax.getHorizontalAxisHeight("x"),aD=az.subchart_show&&!ay?(az.subchart_size_height+aA):0;ax.currentWidth=ax.getCurrentWidth();ax.currentHeight=ax.getCurrentHeight();ax.margin=az.axis_rotated?{top:ax.getHorizontalAxisHeight("y2")+ax.getCurrentPaddingTop(),right:ay?0:ax.getCurrentPaddingRight(),bottom:ax.getHorizontalAxisHeight("y")+aB+ax.getCurrentPaddingBottom(),left:aD+(ay?0:ax.getCurrentPaddingLeft())}:{top:4+ax.getCurrentPaddingTop(),right:ay?0:ax.getCurrentPaddingRight(),bottom:aA+aD+aB+ax.getCurrentPaddingBottom(),left:ay?0:ax.getCurrentPaddingLeft()};ax.margin2=az.axis_rotated?{top:ax.margin.top,right:NaN,bottom:20+aB,left:ax.rotated_padding_left}:{top:ax.currentHeight-aD-aB,right:NaN,bottom:aA+aB,left:ax.margin.left};ax.margin3={top:0,right:NaN,bottom:0,left:0};if(ax.updateSizeForLegend){ax.updateSizeForLegend(aw,aC)}ax.width=ax.currentWidth-ax.margin.left-ax.margin.right;ax.height=ax.currentHeight-ax.margin.top-ax.margin.bottom;if(ax.width<0){ax.width=0}if(ax.height<0){ax.height=0}ax.width2=az.axis_rotated?ax.margin.left-ax.rotated_padding_left-ax.rotated_padding_right:ax.width;ax.height2=az.axis_rotated?ax.height:ax.currentHeight-ax.margin2.top-ax.margin2.bottom;if(ax.width2<0){ax.width2=0}if(ax.height2<0){ax.height2=0}ax.arcWidth=ax.width-(ax.isLegendRight?aC+10:0);ax.arcHeight=ax.height-(ax.isLegendRight?0:10);if(ax.hasType("gauge")){ax.arcHeight+=ax.height-ax.getGaugeLabelHeight()}if(ax.updateRadius){ax.updateRadius()}if(ax.isLegendRight&&ay){ax.margin3.left=ax.arcWidth/2+ax.radiusExpanded*1.1}};F.updateTargets=function(aw){var ax=this;ax.updateTargetsForText(aw);ax.updateTargetsForBar(aw);ax.updateTargetsForLine(aw);if(ax.hasArcType()&&ax.updateTargetsForArc){ax.updateTargetsForArc(aw)}if(ax.updateTargetsForSubchart){ax.updateTargetsForSubchart(aw)}ax.showTargets()};F.showTargets=function(){var aw=this;aw.svg.selectAll("."+D.target).filter(function(ax){return aw.isTargetToShow(ax.id)}).transition().duration(aw.config.transition_duration).style("opacity",1)};F.redraw=function(aM,aC){var a2=this,ay=a2.main,a1=a2.d3,aY=a2.config;var aX=a2.getShapeIndices(a2.isAreaType),aS=a2.getShapeIndices(a2.isBarType),a0=a2.getShapeIndices(a2.isLineType);var aE,aV,a4,aJ,aZ,aB,aQ,a7,aH,ba,aO,aI,a8;var aW=a2.hasArcType();var az,a3,aU,aw,aA;var aN,aF,aR;var a9,a6;var aT=a2.filterTargetsToShow(a2.data.targets),aG,a5,aD,ax;var aP=a2.xv.bind(a2),aL,aK;aM=aM||{};aE=u(aM,"withY",true);aV=u(aM,"withSubchart",true);a4=u(aM,"withTransition",true);aB=u(aM,"withTransform",false);aQ=u(aM,"withUpdateXDomain",false);a7=u(aM,"withUpdateOrgXDomain",false);aH=u(aM,"withTrimXDomain",true);a8=u(aM,"withUpdateXAxis",aQ);ba=u(aM,"withLegend",false);aO=u(aM,"withEventRect",true);aI=u(aM,"withDimension",true);aJ=u(aM,"withTransitionForExit",a4);aZ=u(aM,"withTransitionForAxis",a4);aN=a4?aY.transition_duration:0;aF=aJ?aN:0;aR=aZ?aN:0;aC=aC||a2.axis.generateTransitions(aR);if(ba&&aY.legend_show){a2.updateLegend(a2.mapToIds(a2.data.targets),aM,aC)}else{if(aI){a2.updateDimension(true)}}if(a2.isCategorized()&&aT.length===0){a2.x.domain([0,a2.axes.x.selectAll(".tick").size()])}if(aT.length){a2.updateXDomain(aT,aQ,a7,aH);if(!aY.axis_x_tick_values){aG=a2.axis.updateXAxisTickValues(aT)}}else{a2.xAxis.tickValues([]);a2.subXAxis.tickValues([])}if(aY.zoom_rescale&&!aM.flow){ax=a2.x.orgDomain()}a2.y.domain(a2.getYDomain(aT,"y",ax));a2.y2.domain(a2.getYDomain(aT,"y2",ax));if(!aY.axis_y_tick_values&&aY.axis_y_tick_count){a2.yAxis.tickValues(a2.axis.generateTickValues(a2.y.domain(),aY.axis_y_tick_count))}if(!aY.axis_y2_tick_values&&aY.axis_y2_tick_count){a2.y2Axis.tickValues(a2.axis.generateTickValues(a2.y2.domain(),aY.axis_y2_tick_count))}a2.axis.redraw(aC,aW);a2.axis.updateLabels(a4);if((aQ||a8)&&aT.length){if(aY.axis_x_tick_culling&&aG){for(a5=1;a5<aG.length;a5++){if(aG.length/a5<aY.axis_x_tick_culling_max){aD=a5;break}}a2.svg.selectAll("."+D.axisX+" .tick text").each(function(bc){var bb=aG.indexOf(bc);if(bb>=0){a1.select(this).style("display",bb%aD?"none":"block")}})}else{a2.svg.selectAll("."+D.axisX+" .tick text").style("display","block")}}az=a2.generateDrawArea?a2.generateDrawArea(aX,false):undefined;a3=a2.generateDrawBar?a2.generateDrawBar(aS):undefined;aU=a2.generateDrawLine?a2.generateDrawLine(a0,false):undefined;aw=a2.generateXYForText(aX,aS,a0,true);aA=a2.generateXYForText(aX,aS,a0,false);if(aE){a2.subY.domain(a2.getYDomain(aT,"y"));a2.subY2.domain(a2.getYDomain(aT,"y2"))}a2.tooltip.style("display","none");a2.updateXgridFocus();ay.select("text."+D.text+"."+D.empty).attr("x",a2.width/2).attr("y",a2.height/2).text(aY.data_empty_label_text).transition().style("opacity",aT.length?0:1);a2.updateGrid(aN);a2.updateRegion(aN);a2.updateBar(aF);a2.updateLine(aF);a2.updateArea(aF);a2.updateCircle();if(a2.hasDataLabel()){a2.updateText(aF)}if(a2.redrawArc){a2.redrawArc(aN,aF,aB)}if(a2.redrawSubchart){a2.redrawSubchart(aV,aC,aN,aF,aX,aS,a0)}ay.selectAll("."+D.selectedCircles).filter(a2.isBarType.bind(a2)).selectAll("circle").remove();if(aY.interaction_enabled&&!aM.flow&&aO){a2.redrawEventRect();if(a2.updateZoom){a2.updateZoom()}}a2.updateCircleY();aL=(a2.config.axis_rotated?a2.circleY:a2.circleX).bind(a2);aK=(a2.config.axis_rotated?a2.circleX:a2.circleY).bind(a2);if(aM.flow){a6=a2.generateFlow({targets:aT,flow:aM.flow,duration:aM.flow.duration,drawBar:a3,drawLine:aU,drawArea:az,cx:aL,cy:aK,xv:aP,xForText:aw,yForText:aA})}if((aN||a6)&&a2.isTabVisible()){a1.transition().duration(aN).each(function(){var bb=[];[a2.redrawBar(a3,true),a2.redrawLine(aU,true),a2.redrawArea(az,true),a2.redrawCircle(aL,aK,true),a2.redrawText(aw,aA,aM.flow,true),a2.redrawRegion(true),a2.redrawGrid(true),].forEach(function(bc){bc.forEach(function(bd){bb.push(bd)})});a9=a2.generateWait();bb.forEach(function(bc){a9.add(bc)})}).call(a9,function(){if(a6){a6()}if(aY.onrendered){aY.onrendered.call(a2)}})}else{a2.redrawBar(a3);a2.redrawLine(aU);a2.redrawArea(az);a2.redrawCircle(aL,aK);a2.redrawText(aw,aA,aM.flow);a2.redrawRegion();a2.redrawGrid();if(aY.onrendered){aY.onrendered.call(a2)}}a2.mapToIds(a2.data.targets).forEach(function(bb){a2.withoutFadeIn[bb]=true})};F.updateAndRedraw=function(ay){var aw=this,ax=aw.config,az;ay=ay||{};ay.withTransition=u(ay,"withTransition",true);ay.withTransform=u(ay,"withTransform",false);ay.withLegend=u(ay,"withLegend",false);ay.withUpdateXDomain=true;ay.withUpdateOrgXDomain=true;ay.withTransitionForExit=false;ay.withTransitionForTransform=u(ay,"withTransitionForTransform",ay.withTransition);aw.updateSizes();if(!(ay.withLegend&&ax.legend_show)){az=aw.axis.generateTransitions(ay.withTransitionForAxis?ax.transition_duration:0);aw.updateScales();aw.updateSvgSize();aw.transformAll(ay.withTransitionForTransform,az)}aw.redraw(ay,az)};F.redrawWithoutRescale=function(){this.redraw({withY:false,withSubchart:false,withEventRect:false,withTransitionForAxis:false})};F.isTimeSeries=function(){return this.config.axis_x_type==="timeseries"};F.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0};F.isCustomX=function(){var aw=this,ax=aw.config;return !aw.isTimeSeries()&&(ax.data_x||L(ax.data_xs))};F.isTimeSeriesY=function(){return this.config.axis_y_type==="timeseries"};F.getTranslate=function(az){var ax=this,ay=ax.config,aw,aA;if(az==="main"){aw=W(ax.margin.left);aA=W(ax.margin.top)}else{if(az==="context"){aw=W(ax.margin2.left);aA=W(ax.margin2.top)}else{if(az==="legend"){aw=ax.margin3.left;aA=ax.margin3.top}else{if(az==="x"){aw=0;aA=ay.axis_rotated?0:ax.height}else{if(az==="y"){aw=0;aA=ay.axis_rotated?ax.height:0}else{if(az==="y2"){aw=ay.axis_rotated?0:ax.width;aA=ay.axis_rotated?1:0}else{if(az==="subx"){aw=0;aA=ay.axis_rotated?0:ax.height2}else{if(az==="arc"){aw=ax.arcWidth/2;aA=ax.arcHeight/2}}}}}}}}return"translate("+aw+","+aA+")"};F.initialOpacity=function(aw){return aw.value!==null&&this.withoutFadeIn[aw.id]?1:0};F.initialOpacityForCircle=function(aw){return aw.value!==null&&this.withoutFadeIn[aw.id]?this.opacityForCircle(aw):0};F.opacityForCircle=function(ax){var aw=this.config.point_show?1:0;return i(ax.value)?(this.isScatterType(ax)?0.5:aw):0};F.opacityForText=function(){return this.hasDataLabel()?1:0};F.xx=function(aw){return aw?this.x(aw.x):null};F.xv=function(ay){var aw=this,ax=ay.value;if(aw.isTimeSeries()){ax=aw.parseDate(ay.value)}else{if(aw.isCategorized()&&typeof ay.value==="string"){ax=aw.config.axis_x_categories.indexOf(ay.value)}}return Math.ceil(aw.x(ax))};F.yv=function(ay){var aw=this,ax=ay.axis&&ay.axis==="y2"?aw.y2:aw.y;return Math.ceil(ax(ay.value))};F.subxx=function(aw){return aw?this.subX(aw.x):null};F.transformMain=function(ay,aB){var ax=this,aA,aw,az;if(aB&&aB.axisX){aA=aB.axisX}else{aA=ax.main.select("."+D.axisX);if(ay){aA=aA.transition()}}if(aB&&aB.axisY){aw=aB.axisY}else{aw=ax.main.select("."+D.axisY);if(ay){aw=aw.transition()}}if(aB&&aB.axisY2){az=aB.axisY2}else{az=ax.main.select("."+D.axisY2);if(ay){az=az.transition()}}(ay?ax.main.transition():ax.main).attr("transform",ax.getTranslate("main"));aA.attr("transform",ax.getTranslate("x"));aw.attr("transform",ax.getTranslate("y"));az.attr("transform",ax.getTranslate("y2"));ax.main.select("."+D.chartArcs).attr("transform",ax.getTranslate("arc"))};F.transformAll=function(ax,ay){var aw=this;aw.transformMain(ax,ay);if(aw.config.subchart_show){aw.transformContext(ax,ay)}if(aw.legend){aw.transformLegend(ax)}};F.updateSvgSize=function(){var ax=this,aw=ax.svg.select(".c3-brush .background");ax.svg.attr("width",ax.currentWidth).attr("height",ax.currentHeight);ax.svg.selectAll(["#"+ax.clipId,"#"+ax.clipIdForGrid]).select("rect").attr("width",ax.width).attr("height",ax.height);ax.svg.select("#"+ax.clipIdForXAxis).select("rect").attr("x",ax.getXAxisClipX.bind(ax)).attr("y",ax.getXAxisClipY.bind(ax)).attr("width",ax.getXAxisClipWidth.bind(ax)).attr("height",ax.getXAxisClipHeight.bind(ax));ax.svg.select("#"+ax.clipIdForYAxis).select("rect").attr("x",ax.getYAxisClipX.bind(ax)).attr("y",ax.getYAxisClipY.bind(ax)).attr("width",ax.getYAxisClipWidth.bind(ax)).attr("height",ax.getYAxisClipHeight.bind(ax));ax.svg.select("#"+ax.clipIdForSubchart).select("rect").attr("width",ax.width).attr("height",aw.size()?aw.attr("height"):0);ax.svg.select("."+D.zoomRect).attr("width",ax.width).attr("height",ax.height);ax.selectChart.style("max-height",ax.currentHeight+"px")};F.updateDimension=function(ax){var aw=this;if(!ax){if(aw.config.axis_rotated){aw.axes.x.call(aw.xAxis);aw.axes.subx.call(aw.subXAxis)}else{aw.axes.y.call(aw.yAxis);aw.axes.y2.call(aw.y2Axis)}}aw.updateSizes();aw.updateScales();aw.updateSvgSize();aw.transformAll(false)};F.observeInserted=function(ay){var ax=this,aw;if(typeof MutationObserver==="undefined"){ad.console.error("MutationObserver not defined.");return}aw=new MutationObserver(function(az){az.forEach(function(aA){if(aA.type==="childList"&&aA.previousSibling){aw.disconnect();ax.intervalForObserveInserted=ad.setInterval(function(){if(ay.node().parentNode){ad.clearInterval(ax.intervalForObserveInserted);ax.updateDimension();ax.config.oninit.call(ax);ax.redraw({withTransform:true,withUpdateXDomain:true,withUpdateOrgXDomain:true,withTransition:false,withTransitionForTransform:false,withLegend:true});ay.transition().style("opacity",1)}},10)}})});aw.observe(ay.node(),{attributes:true,childList:true,characterData:true})};F.generateResize=function(){var aw=[];function ax(){aw.forEach(function(ay){ay()})}ax.add=function(ay){aw.push(ay)};return ax};F.endall=function(aw,ay){var ax=0;aw.each(function(){++ax}).each("end",function(){if(!--ax){ay.apply(this,arguments)}})};F.generateWait=function(){var ax=[],aw=function(ay,aA){var az=setInterval(function(){var aB=0;ax.forEach(function(aC){if(aC.empty()){aB+=1;return}try{aC.transition()}catch(aD){aB+=1}});if(aB===ax.length){clearInterval(az);if(aA){aA()}}},10)};aw.add=function(ay){ax.push(ay)};return aw};F.parseDate=function(ax){var aw=this,ay;if(ax instanceof Date){ay=ax}else{if(typeof ax==="string"){ay=aw.dataTimeFormat(aw.config.data_xFormat).parse(ax)}else{if(typeof ax==="number"||!isNaN(ax)){ay=new Date(+ax)}}}if(!ay||isNaN(+ay)){ad.console.error("Failed to parse x '"+ax+"' to Date object")}return ay};F.isTabVisible=function(){var aw;if(typeof document.hidden!=="undefined"){aw="hidden"}else{if(typeof document.mozHidden!=="undefined"){aw="mozHidden"}else{if(typeof document.msHidden!=="undefined"){aw="msHidden"}else{if(typeof document.webkitHidden!=="undefined"){aw="webkitHidden"}}}}return document[aw]?false:true};F.getDefaultConfig=function(){var aw={bindto:"#chart",size_width:undefined,size_height:undefined,padding_left:undefined,padding_right:undefined,padding_top:undefined,padding_bottom:undefined,zoom_enabled:false,zoom_extent:undefined,zoom_privileged:false,zoom_rescale:false,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},interaction_enabled:true,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:undefined,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:true,data_xSort:true,data_idConverter:function(ax){return ax},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:undefined,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:undefined,data_colors:{},data_hide:false,data_filter:undefined,data_selection_enabled:false,data_selection_grouped:false,data_selection_isselectable:function(){return true},data_selection_multiple:true,data_selection_draggable:false,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:undefined,data_json:undefined,data_rows:undefined,data_columns:undefined,data_mimeType:undefined,data_keys:undefined,data_empty_label_text:"",subchart_show:false,subchart_size_height:60,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:true,legend_hide:false,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:undefined,legend_item_onclick:undefined,legend_item_onmouseover:undefined,legend_item_onmouseout:undefined,legend_equally:false,axis_rotated:false,axis_x_show:true,axis_x_type:"indexed",axis_x_localtime:true,axis_x_categories:[],axis_x_tick_centered:false,axis_x_tick_format:undefined,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:undefined,axis_x_tick_fit:true,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:true,axis_x_tick_multiline:true,axis_x_tick_width:null,axis_x_max:undefined,axis_x_min:undefined,axis_x_padding:{},axis_x_height:undefined,axis_x_extent:undefined,axis_x_label:{},axis_y_show:true,axis_y_type:undefined,axis_y_max:undefined,axis_y_min:undefined,axis_y_inverted:false,axis_y_center:undefined,axis_y_inner:undefined,axis_y_label:{},axis_y_tick_format:undefined,axis_y_tick_outer:true,axis_y_tick_values:null,axis_y_tick_count:undefined,axis_y_tick_time_value:undefined,axis_y_tick_time_interval:undefined,axis_y_padding:{},axis_y_default:undefined,axis_y2_show:false,axis_y2_max:undefined,axis_y2_min:undefined,axis_y2_inverted:false,axis_y2_center:undefined,axis_y2_inner:undefined,axis_y2_label:{},axis_y2_tick_format:undefined,axis_y2_tick_outer:true,axis_y2_tick_values:null,axis_y2_tick_count:undefined,axis_y2_padding:{},axis_y2_default:undefined,grid_x_show:false,grid_x_type:"tick",grid_x_lines:[],grid_y_show:false,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:true,grid_lines_front:true,point_show:true,point_r:2.5,point_focus_expand_enabled:true,point_focus_expand_r:undefined,point_select_r:undefined,line_connectNull:false,line_step_type:"step",bar_width:undefined,bar_width_ratio:0.6,bar_width_max:undefined,bar_zerobased:true,area_zerobased:true,pie_label_show:true,pie_label_format:undefined,pie_label_threshold:0.05,pie_expand:true,gauge_label_show:true,gauge_label_format:undefined,gauge_expand:true,gauge_min:0,gauge_max:100,gauge_units:undefined,gauge_width:undefined,donut_label_show:true,donut_label_format:undefined,donut_label_threshold:0.05,donut_width:undefined,donut_expand:true,donut_title:"",regions:[],tooltip_show:true,tooltip_grouped:true,tooltip_format_title:undefined,tooltip_format_name:undefined,tooltip_format_value:undefined,tooltip_position:undefined,tooltip_contents:function(aA,ay,az,ax){return this.getTooltipContent?this.getTooltipContent(aA,ay,az,ax):""},tooltip_init_show:false,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"}};Object.keys(this.additionalConfig).forEach(function(ax){aw[ax]=this.additionalConfig[ax]},this);return aw};F.additionalConfig={};F.loadConfig=function(ax){var aw=this.config,aA,ay,az;function aB(){var aC=ay.shift();if(aC&&aA&&typeof aA==="object"&&aC in aA){aA=aA[aC];return aB()}else{if(!aC){return aA}else{return undefined}}}Object.keys(aw).forEach(function(aC){aA=ax;ay=aC.split("_");az=aB();if(I(az)){aw[aC]=az}})};F.getScale=function(ax,aw,ay){return(ay?this.d3.time.scale():this.d3.scale.linear()).range([ax,aw])};F.getX=function(aA,aw,aB,aD){var ax=this,aC=ax.getScale(aA,aw,ax.isTimeSeries()),az=aB?aC.domain(aB):aC,ay;if(ax.isCategorized()){aD=aD||function(){return 0};aC=function(aG,aF){var aE=az(aG)+aD(aG);return aF?aE:Math.ceil(aE)}}else{aC=function(aG,aF){var aE=az(aG);return aF?aE:Math.ceil(aE)}}for(ay in az){aC[ay]=az[ay]}aC.orgDomain=function(){return az.domain()};if(ax.isCategorized()){aC.domain=function(aE){if(!arguments.length){aE=this.orgDomain();return[aE[0],aE[1]+1]}az.domain(aE);return aC}}return aC};F.getY=function(ax,aw,ay){var az=this.getScale(ax,aw,this.isTimeSeriesY());if(ay){az.domain(ay)}return az};F.getYScale=function(aw){return this.axis.getId(aw)==="y2"?this.y2:this.y};F.getSubYScale=function(aw){return this.axis.getId(aw)==="y2"?this.subY2:this.subY};F.updateScales=function(){var ax=this,ay=ax.config,aw=!ax.x;ax.xMin=ay.axis_rotated?1:0;ax.xMax=ay.axis_rotated?ax.height:ax.width;ax.yMin=ay.axis_rotated?0:ax.height;ax.yMax=ay.axis_rotated?ax.width:1;ax.subXMin=ax.xMin;ax.subXMax=ax.xMax;ax.subYMin=ay.axis_rotated?0:ax.height2;ax.subYMax=ay.axis_rotated?ax.width2:1;ax.x=ax.getX(ax.xMin,ax.xMax,aw?undefined:ax.x.orgDomain(),function(){return ax.xAxis.tickOffset()});ax.y=ax.getY(ax.yMin,ax.yMax,aw?ay.axis_y_default:ax.y.domain());ax.y2=ax.getY(ax.yMin,ax.yMax,aw?ay.axis_y2_default:ax.y2.domain());ax.subX=ax.getX(ax.xMin,ax.xMax,ax.orgXDomain,function(az){return az%1?0:ax.subXAxis.tickOffset()});ax.subY=ax.getY(ax.subYMin,ax.subYMax,aw?ay.axis_y_default:ax.subY.domain());ax.subY2=ax.getY(ax.subYMin,ax.subYMax,aw?ay.axis_y2_default:ax.subY2.domain());ax.xAxisTickFormat=ax.axis.getXAxisTickFormat();ax.xAxisTickValues=ax.axis.getXAxisTickValues();ax.yAxisTickValues=ax.axis.getYAxisTickValues();ax.y2AxisTickValues=ax.axis.getY2AxisTickValues();ax.xAxis=ax.axis.getXAxis(ax.x,ax.xOrient,ax.xAxisTickFormat,ax.xAxisTickValues,ay.axis_x_tick_outer);ax.subXAxis=ax.axis.getXAxis(ax.subX,ax.subXOrient,ax.xAxisTickFormat,ax.xAxisTickValues,ay.axis_x_tick_outer);ax.yAxis=ax.axis.getYAxis(ax.y,ax.yOrient,ay.axis_y_tick_format,ax.yAxisTickValues,ay.axis_y_tick_outer);ax.y2Axis=ax.axis.getYAxis(ax.y2,ax.y2Orient,ay.axis_y2_tick_format,ax.y2AxisTickValues,ay.axis_y2_tick_outer);if(!aw){if(ax.brush){ax.brush.scale(ax.subX)}if(ay.zoom_enabled){ax.zoom.scale(ax.x)}}if(ax.updateArc){ax.updateArc()}};F.getYDomainMin=function(aC){var aG=this,ay=aG.config,aw=aG.mapToIds(aC),aF=aG.getValuesAsIdKeyed(aC),aA,az,aE,aD,ax,aB;if(ay.data_groups.length>0){aB=aG.hasNegativeValueInTargets(aC);for(aA=0;aA<ay.data_groups.length;aA++){aD=ay.data_groups[aA].filter(function(aH){return aw.indexOf(aH)>=0});if(aD.length===0){continue}aE=aD[0];if(aB&&aF[aE]){aF[aE].forEach(function(aH,aI){aF[aE][aI]=aH<0?aH:0})}for(az=1;az<aD.length;az++){ax=aD[az];if(!aF[ax]){continue}aF[ax].forEach(function(aH,aI){if(aG.axis.getId(ax)===aG.axis.getId(aE)&&aF[aE]&&!(aB&&+aH>0)){aF[aE][aI]+=+aH}})}}}return aG.d3.min(Object.keys(aF).map(function(aH){return aG.d3.min(aF[aH])}))};F.getYDomainMax=function(aC){var aG=this,az=aG.config,aw=aG.mapToIds(aC),aF=aG.getValuesAsIdKeyed(aC),aB,aA,aE,aD,ax,ay;if(az.data_groups.length>0){ay=aG.hasPositiveValueInTargets(aC);for(aB=0;aB<az.data_groups.length;aB++){aD=az.data_groups[aB].filter(function(aH){return aw.indexOf(aH)>=0});if(aD.length===0){continue}aE=aD[0];if(ay&&aF[aE]){aF[aE].forEach(function(aH,aI){aF[aE][aI]=aH>0?aH:0})}for(aA=1;aA<aD.length;aA++){ax=aD[aA];if(!aF[ax]){continue}aF[ax].forEach(function(aH,aI){if(aG.axis.getId(ax)===aG.axis.getId(aE)&&aF[aE]&&!(ay&&+aH<0)){aF[aE][aI]+=+aH}})}}}return aG.d3.max(Object.keys(aF).map(function(aH){return aG.d3.max(aF[aH])}))};F.getYDomain=function(aT,aQ,aN){var aG=this,aU=aG.config,ay=aT.filter(function(aX){return aG.axis.getId(aX.id)===aQ}),aD=aN?aG.filterByXDomain(ay,aN):ay,aw=aQ==="y2"?aU.axis_y2_min:aU.axis_y_min,ax=aQ==="y2"?aU.axis_y2_max:aU.axis_y_max,aK=aG.getYDomainMin(aD),aM=aG.getYDomainMax(aD),aW,aB,aI,az,aV,aS=aQ==="y2"?aU.axis_y2_center:aU.axis_y_center,aF,aA,aH,aC,aE,aL,aO=(aG.hasType("bar",aD)&&aU.bar_zerobased)||(aG.hasType("area",aD)&&aU.area_zerobased),aR=aQ==="y2"?aU.axis_y2_inverted:aU.axis_y_inverted,aP=aG.hasDataLabel()&&aU.axis_rotated,aJ=aG.hasDataLabel()&&!aU.axis_rotated;aK=i(aw)?aw:i(ax)?(aK<ax?aK:ax-10):aK;aM=i(ax)?ax:i(aw)?(aw<aM?aM:aw+10):aM;if(aD.length===0){return aQ==="y2"?aG.y2.domain():aG.y.domain()}if(isNaN(aK)){aK=0}if(isNaN(aM)){aM=aK}if(aK===aM){aK<0?aM=0:aK=0}aE=aK>=0&&aM>=0;aL=aK<=0&&aM<=0;if((i(aw)&&aE)||(i(ax)&&aL)){aO=false}if(aO){if(aE){aK=0}if(aL){aM=0}}aB=Math.abs(aM-aK);aI=az=aV=aB*0.1;if(typeof aS!=="undefined"){aF=Math.max(Math.abs(aK),Math.abs(aM));aM=aS+aF;aK=aS-aF}if(aP){aA=aG.getDataLabelLength(aK,aM,"width");aH=N(aG.y.range());aC=[aA[0]/aH,aA[1]/aH];az+=aB*(aC[1]/(1-aC[0]-aC[1]));aV+=aB*(aC[0]/(1-aC[0]-aC[1]))}else{if(aJ){aA=aG.getDataLabelLength(aK,aM,"height");az+=aG.axis.convertPixelsToAxisPadding(aA[1],aB);aV+=aG.axis.convertPixelsToAxisPadding(aA[0],aB)}}if(aQ==="y"&&L(aU.axis_y_padding)){az=aG.axis.getPadding(aU.axis_y_padding,"top",az,aB);aV=aG.axis.getPadding(aU.axis_y_padding,"bottom",aV,aB)}if(aQ==="y2"&&L(aU.axis_y2_padding)){az=aG.axis.getPadding(aU.axis_y2_padding,"top",az,aB);aV=aG.axis.getPadding(aU.axis_y2_padding,"bottom",aV,aB)}if(aO){if(aE){aV=aK}if(aL){az=-aM}}aW=[aK-aV,aM+az];return aR?aW.reverse():aW};F.getXDomainMin=function(aw){var ax=this,ay=ax.config;return I(ay.axis_x_min)?(ax.isTimeSeries()?this.parseDate(ay.axis_x_min):ay.axis_x_min):ax.d3.min(aw,function(az){return ax.d3.min(az.values,function(aA){return aA.x})})};F.getXDomainMax=function(aw){var ax=this,ay=ax.config;return I(ay.axis_x_max)?(ax.isTimeSeries()?this.parseDate(ay.axis_x_max):ay.axis_x_max):ax.d3.max(aw,function(az){return ax.d3.max(az.values,function(aA){return aA.x})})};F.getXDomainPadding=function(az){var aw=this,ay=aw.config,aB=az[1]-az[0],aC,aA,ax,aD;if(aw.isCategorized()){aA=0}else{if(aw.hasType("bar")){aC=aw.getMaxDataCount();aA=aC>1?(aB/(aC-1))/2:0.5}else{aA=aB*0.01}}if(typeof ay.axis_x_padding==="object"&&L(ay.axis_x_padding)){ax=i(ay.axis_x_padding.left)?ay.axis_x_padding.left:aA;aD=i(ay.axis_x_padding.right)?ay.axis_x_padding.right:aA}else{if(typeof ay.axis_x_padding==="number"){ax=aD=ay.axis_x_padding}else{ax=aD=aA}}return{left:ax,right:aD}};F.getXDomain=function(ax){var ay=this,aA=[ay.getXDomainMin(ax),ay.getXDomainMax(ax)],az=aA[0],aC=aA[1],aD=ay.getXDomainPadding(aA),aB=0,aw=0;if((az-aC)===0&&!ay.isCategorized()){if(ay.isTimeSeries()){az=new Date(az.getTime()*0.5);aC=new Date(aC.getTime()*1.5)}else{az=az===0?1:(az*0.5);aC=aC===0?-1:(aC*1.5)}}if(az||az===0){aB=ay.isTimeSeries()?new Date(az.getTime()-aD.left):az-aD.left}if(aC||aC===0){aw=ay.isTimeSeries()?new Date(aC.getTime()+aD.right):aC+aD.right}return[aB,aw]};F.updateXDomain=function(ax,aA,aC,aw,aB){var ay=this,az=ay.config;if(aC){ay.x.domain(aB?aB:ay.d3.extent(ay.getXDomain(ax)));ay.orgXDomain=ay.x.domain();if(az.zoom_enabled){ay.zoom.scale(ay.x).updateScaleExtent()}ay.subX.domain(ay.x.domain());if(ay.brush){ay.brush.scale(ay.subX)}}if(aA){ay.x.domain(aB?aB:(!ay.brush||ay.brush.empty())?ay.orgXDomain:ay.brush.extent());if(az.zoom_enabled){ay.zoom.scale(ay.x).updateScaleExtent()}}if(aw){ay.x.domain(ay.trimXDomain(ay.x.orgDomain()))}return ay.x.domain()};F.trimXDomain=function(ax){var aw=this;if(ax[0]<=aw.orgXDomain[0]){ax[1]=+ax[1]+(aw.orgXDomain[0]-ax[0]);ax[0]=aw.orgXDomain[0]}if(aw.orgXDomain[1]<=ax[1]){ax[0]=+ax[0]-(ax[1]-aw.orgXDomain[1]);ax[1]=aw.orgXDomain[1]}return ax};F.isX=function(ay){var aw=this,ax=aw.config;return(ax.data_x&&ay===ax.data_x)||(L(ax.data_xs)&&t(ax.data_xs,ay))};F.isNotX=function(aw){return !this.isX(aw)};F.getXKey=function(ay){var aw=this,ax=aw.config;return ax.data_x?ax.data_x:L(ax.data_xs)?ax.data_xs[ay]:null};F.getXValuesOfXKey=function(ay,aw){var ax=this,aA,az=aw&&L(aw)?ax.mapToIds(aw):[];az.forEach(function(aB){if(ax.getXKey(aB)===ay){aA=ax.data.xs[aB]}});return aA};F.getIndexByX=function(aw){var ax=this,ay=ax.filterByX(ax.data.targets,aw);return ay.length?ay[0].index:null};F.getXValue=function(ay,ax){var aw=this;return ay in aw.data.xs&&aw.data.xs[ay]&&i(aw.data.xs[ay][ax])?aw.data.xs[ay][ax]:ax};F.getOtherTargetXs=function(){var aw=this,ax=Object.keys(aw.data.xs);return ax.length?aw.data.xs[ax[0]]:null};F.getOtherTargetX=function(ax){var aw=this.getOtherTargetXs();return aw&&ax<aw.length?aw[ax]:null};F.addXs=function(ax){var aw=this;Object.keys(ax).forEach(function(ay){aw.config.data_xs[ay]=ax[ay]})};F.hasMultipleX=function(aw){return this.d3.set(Object.keys(aw).map(function(ax){return aw[ax]})).size()>1};F.isMultipleX=function(){return L(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")};F.addName=function(ay){var aw=this,ax;if(ay){ax=aw.config.data_names[ay.id];ay.name=ax?ax:ay.id}return ay};F.getValueOnIndex=function(ax,ay){var aw=ax.filter(function(az){return az.index===ay});return aw.length?aw[0]:null};F.updateTargetX=function(ax,aw){var ay=this;ax.forEach(function(az){az.values.forEach(function(aA,aB){aA.x=ay.generateTargetX(aw[aB],az.id,aB)});ay.data.xs[az.id]=aw})};F.updateTargetXs=function(aw,ay){var ax=this;aw.forEach(function(az){if(ay[az.id]){ax.updateTargetX([az],ay[az.id])}})};F.generateTargetX=function(ay,aA,az){var ax=this,aw;if(ax.isTimeSeries()){aw=ay?ax.parseDate(ay):ax.parseDate(ax.getXValue(aA,az))}else{if(ax.isCustomX()&&!ax.isCategorized()){aw=i(ay)?+ay:ax.getXValue(aA,az)}else{aw=az}}return aw};F.cloneTarget=function(aw){return{id:aw.id,id_org:aw.id_org,values:aw.values.map(function(ax){return{x:ax.x,value:ax.value,id:ax.id}})}};F.updateXs=function(){var aw=this;if(aw.data.targets.length){aw.xs=[];aw.data.targets[0].values.forEach(function(ax){aw.xs[ax.index]=ax.x})}};F.getPrevX=function(ax){var aw=this.xs[ax-1];return typeof aw!=="undefined"?aw:null};F.getNextX=function(ax){var aw=this.xs[ax+1];return typeof aw!=="undefined"?aw:null};F.getMaxDataCount=function(){var aw=this;return aw.d3.max(aw.data.targets,function(ax){return ax.values.length})};F.getMaxDataCountTarget=function(ax){var az=ax.length,aw=0,ay;if(az>1){ax.forEach(function(aA){if(aA.values.length>aw){ay=aA;aw=aA.values.length}})}else{ay=az?ax[0]:null}return ay};F.getEdgeX=function(aw){var ax=this;return !aw.length?[0,0]:[ax.d3.min(aw,function(ay){return ay.values[0].x}),ax.d3.max(aw,function(ay){return ay.values[ay.values.length-1].x})]};F.mapToIds=function(aw){return aw.map(function(ax){return ax.id})};F.mapToTargetIds=function(ax){var aw=this;return ax?(r(ax)?[ax]:ax):aw.mapToIds(aw.data.targets)};F.hasTarget=function(aw,az){var ay=this.mapToIds(aw),ax;for(ax=0;ax<ay.length;ax++){if(ay[ax]===az){return true}}return false};F.isTargetToShow=function(aw){return this.hiddenTargetIds.indexOf(aw)<0};F.isLegendToShow=function(aw){return this.hiddenLegendIds.indexOf(aw)<0};F.filterTargetsToShow=function(aw){var ax=this;return aw.filter(function(ay){return ax.isTargetToShow(ay.id)})};F.mapTargetsToUniqueXs=function(aw){var ax=this;var ay=ax.d3.set(ax.d3.merge(aw.map(function(az){return az.values.map(function(aA){return +aA.x})}))).values();return ax.isTimeSeries()?ay.map(function(az){return new Date(+az)}):ay.map(function(az){return +az})};F.addHiddenTargetIds=function(aw){this.hiddenTargetIds=this.hiddenTargetIds.concat(aw)};F.removeHiddenTargetIds=function(aw){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(ax){return aw.indexOf(ax)<0})};F.addHiddenLegendIds=function(aw){this.hiddenLegendIds=this.hiddenLegendIds.concat(aw)};F.removeHiddenLegendIds=function(aw){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(ax){return aw.indexOf(ax)<0})};F.getValuesAsIdKeyed=function(aw){var ax={};aw.forEach(function(ay){ax[ay.id]=[];ay.values.forEach(function(az){ax[ay.id].push(az.value)})});return ax};F.checkValueInTargets=function(aw,az){var aB=Object.keys(aw),aA,ay,ax;for(aA=0;aA<aB.length;aA++){ax=aw[aB[aA]].values;for(ay=0;ay<ax.length;ay++){if(az(ax[ay].value)){return true}}}return false};F.hasNegativeValueInTargets=function(aw){return this.checkValueInTargets(aw,function(ax){return ax<0})};F.hasPositiveValueInTargets=function(aw){return this.checkValueInTargets(aw,function(ax){return ax>0})};F.isOrderDesc=function(){var aw=this.config;return typeof(aw.data_order)==="string"&&aw.data_order.toLowerCase()==="desc"};F.isOrderAsc=function(){var aw=this.config;return typeof(aw.data_order)==="string"&&aw.data_order.toLowerCase()==="asc"};F.orderTargets=function(aw){var ax=this,ay=ax.config,aA=ax.isOrderAsc(),az=ax.isOrderDesc();if(aA||az){aw.sort(function(aD,aC){var aF=function(aG,aH){return aG+Math.abs(aH.value)};var aB=aD.values.reduce(aF,0),aE=aC.values.reduce(aF,0);return aA?aE-aB:aB-aE})}else{if(y(ay.data_order)){aw.sort(ay.data_order)}}return aw};F.filterByX=function(ax,aw){return this.d3.merge(ax.map(function(ay){return ay.values})).filter(function(ay){return ay.x-aw===0})};F.filterRemoveNull=function(aw){return aw.filter(function(ax){return i(ax.value)})};F.filterByXDomain=function(aw,ax){return aw.map(function(ay){return{id:ay.id,id_org:ay.id_org,values:ay.values.filter(function(az){return ax[0]<=az.x&&az.x<=ax[1]})}})};F.hasDataLabel=function(){var aw=this.config;if(typeof aw.data_labels==="boolean"&&aw.data_labels){return true}else{if(typeof aw.data_labels==="object"&&L(aw.data_labels)){return true}}return false};F.getDataLabelLength=function(aA,aw,az){var ay=this,aB=[0,0],ax=1.3;ay.selectChart.select("svg").selectAll(".dummy").data([aA,aw]).enter().append("text").text(function(aC){return ay.dataLabelFormat(aC.id)(aC)}).each(function(aD,aC){aB[aC]=this.getBoundingClientRect()[az]*ax}).remove();return aB};F.isNoneArc=function(aw){return this.hasTarget(this.data.targets,aw.id)},F.isArc=function(aw){return"data" in aw&&this.hasTarget(this.data.targets,aw.data.id)};F.findSameXOfValues=function(aw,ax){var ay,aA=aw[ax].x,az=[];for(ay=ax-1;ay>=0;ay--){if(aA!==aw[ay].x){break}az.push(aw[ay])}for(ay=ax;ay<aw.length;ay++){if(aA!==aw[ay].x){break}az.push(aw[ay])}return az};F.findClosestFromTargets=function(aw,az){var ax=this,ay;ay=aw.map(function(aA){return ax.findClosest(aA.values,az)});return ax.findClosest(ay,az)};F.findClosest=function(ay,aA){var ax=this,aw=100,az;ay.filter(function(aB){return aB&&ax.isBarType(aB.id)}).forEach(function(aC){var aB=ax.main.select("."+D.bars+ax.getTargetSelectorSuffix(aC.id)+" ."+D.bar+"-"+aC.index).node();if(!az&&ax.isWithinBar(aB)){az=aC}});ay.filter(function(aB){return aB&&!ax.isBarType(aB.id)}).forEach(function(aB){var aC=ax.dist(aB,aA);if(aC<aw){aw=aC;az=aB}});return az};F.dist=function(aB,aD){var az=this,aA=az.config,ay=aA.axis_rotated?1:0,ax=aA.axis_rotated?0:1,aC=az.circleY(aB,aB.index),aw=az.x(aB.x);return Math.pow(aw-aD[ay],2)+Math.pow(aC-aD[ax],2)};F.convertValuesToStep=function(aw){var ay=[].concat(aw),ax;if(!this.isCategorized()){return aw}for(ax=aw.length+1;0<ax;ax--){ay[ax]=ay[ax-1]}ay[0]={x:ay[0].x-1,value:ay[0].value,id:ay[0].id};ay[aw.length+1]={x:ay[aw.length].x+1,value:ay[aw.length].value,id:ay[aw.length].id};return ay};F.updateDataAttributes=function(az,ay){var aw=this,ax=aw.config,aA=ax["data_"+az];if(typeof ay==="undefined"){return aA}Object.keys(ay).forEach(function(aB){aA[aB]=ay[aB]});aw.redraw({withLegend:true});return aA};F.convertUrlToData=function(ay,aB,aA,aw){var ax=this,az=aB?aB:"csv";ax.d3.xhr(ay,function(aC,aD){var aE;if(!aD){throw new Error(aC.responseURL+" "+aC.status+" ("+aC.statusText+")")}if(az==="json"){aE=ax.convertJsonToData(JSON.parse(aD.response),aA)}else{if(az==="tsv"){aE=ax.convertTsvToData(aD.response)}else{aE=ax.convertCsvToData(aD.response)}}aw.call(ax,aE)})};F.convertXsvToData=function(aw,az){var ax=az.parseRows(aw),ay;if(ax.length===1){ay=[{}];ax[0].forEach(function(aA){ay[0][aA]=null})}else{ay=az.parse(aw)}return ay};F.convertCsvToData=function(aw){return this.convertXsvToData(aw,this.d3.csv)};F.convertTsvToData=function(aw){return this.convertXsvToData(aw,this.d3.tsv)};F.convertJsonToData=function(ay,az){var ax=this,aw=[],aB,aA;if(az){if(az.x){aB=az.value.concat(az.x);ax.config.data_x=az.x}else{aB=az.value}aw.push(aB);ay.forEach(function(aD){var aC=[];aB.forEach(function(aF){var aE=E(aD[aF])?null:aD[aF];aC.push(aE)});aw.push(aC)});aA=ax.convertRowsToData(aw)}else{Object.keys(ay).forEach(function(aC){aw.push([aC].concat(ay[aC]))});aA=ax.convertColumnsToData(aw)}return aA};F.convertRowsToData=function(aB){var aA=aB[0],ax={},aw=[],az,ay;for(az=1;az<aB.length;az++){ax={};for(ay=0;ay<aB[az].length;ay++){if(E(aB[az][ay])){throw new Error("Source data is missing a component at ("+az+","+ay+")!")}ax[aA[ay]]=aB[az][ay]}aw.push(ax)}return aw};F.convertColumnsToData=function(aA){var aw=[],az,ax,ay;for(az=0;az<aA.length;az++){ay=aA[az][0];for(ax=1;ax<aA[az].length;ax++){if(E(aw[ax-1])){aw[ax-1]={}}if(E(aA[az][ax])){throw new Error("Source data is missing a component at ("+az+","+ax+")!")}aw[ax-1][ay]=aA[az][ax]}}return aw};F.convertDataToTargets=function(aC,aB){var ax=this,az=ax.config,aA=ax.d3.keys(aC[0]).filter(ax.isNotX,ax),ay=ax.d3.keys(aC[0]).filter(ax.isX,ax),aw;aA.forEach(function(aE){var aD=ax.getXKey(aE);if(ax.isCustomX()||ax.isTimeSeries()){if(ay.indexOf(aD)>=0){ax.data.xs[aE]=(aB&&ax.data.xs[aE]?ax.data.xs[aE]:[]).concat(aC.map(function(aF){return aF[aD]}).filter(i).map(function(aF,aG){return ax.generateTargetX(aF,aE,aG)}))}else{if(az.data_x){ax.data.xs[aE]=ax.getOtherTargetXs()}else{if(L(az.data_xs)){ax.data.xs[aE]=ax.getXValuesOfXKey(aD,ax.data.targets)}}}}else{ax.data.xs[aE]=aC.map(function(aG,aF){return aF})}});aA.forEach(function(aD){if(!ax.data.xs[aD]){throw new Error('x is not defined for id = "'+aD+'".')}});aw=aA.map(function(aF,aD){var aE=az.data_idConverter(aF);return{id:aE,id_org:aF,values:aC.map(function(aK,aJ){var aI=ax.getXKey(aF),aH=aK[aI],aG=ax.generateTargetX(aH,aF,aJ);if(ax.isCustomX()&&ax.isCategorized()&&aD===0&&aH){if(aJ===0){az.axis_x_categories=[]}az.axis_x_categories.push(aH)}if(E(aK[aF])||ax.data.xs[aF].length<=aJ){aG=undefined}return{x:aG,value:aK[aF]!==null&&!isNaN(aK[aF])?+aK[aF]:null,id:aE}}).filter(function(aG){return I(aG.x)})}});aw.forEach(function(aE){var aD;if(az.data_xSort){aE.values=aE.values.sort(function(aI,aH){var aG=aI.x||aI.x===0?aI.x:Infinity,aF=aH.x||aH.x===0?aH.x:Infinity;return aG-aF})}aD=0;aE.values.forEach(function(aF){aF.index=aD++});ax.data.xs[aE.id].sort(function(aG,aF){return aG-aF})});if(az.data_type){ax.setTargetType(ax.mapToIds(aw).filter(function(aD){return !(aD in az.data_types)}),az.data_type)}aw.forEach(function(aD){ax.addCache(aD.id_org,aD)});return aw};F.load=function(aw,ay){var ax=this;if(aw){if(ay.filter){aw=aw.filter(ay.filter)}if(ay.type||ay.types){aw.forEach(function(az){var aA=ay.types&&ay.types[az.id]?ay.types[az.id]:ay.type;ax.setTargetType(az.id,aA)})}ax.data.targets.forEach(function(aA){for(var az=0;az<aw.length;az++){if(aA.id===aw[az].id){aA.values=aw[az].values;aw.splice(az,1);break}}});ax.data.targets=ax.data.targets.concat(aw)}ax.updateTargets(ax.data.targets);ax.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true});if(ay.done){ay.done()}};F.loadFromArgs=function(ax){var aw=this;if(ax.data){aw.load(aw.convertDataToTargets(ax.data),ax)}else{if(ax.url){aw.convertUrlToData(ax.url,ax.mimeType,ax.keys,function(ay){aw.load(aw.convertDataToTargets(ay),ax)})}else{if(ax.json){aw.load(aw.convertDataToTargets(aw.convertJsonToData(ax.json,ax.keys)),ax)}else{if(ax.rows){aw.load(aw.convertDataToTargets(aw.convertRowsToData(ax.rows)),ax)}else{if(ax.columns){aw.load(aw.convertDataToTargets(aw.convertColumnsToData(ax.columns)),ax)}else{aw.load(null,ax)}}}}}};F.unload=function(ax,aw){var ay=this;if(!aw){aw=function(){}}ax=ax.filter(function(az){return ay.hasTarget(ay.data.targets,az)});if(!ax||ax.length===0){aw();return}ay.svg.selectAll(ax.map(function(az){return ay.selectorTarget(az)})).transition().style("opacity",0).remove().call(ay.endall,aw);ax.forEach(function(az){ay.withoutFadeIn[az]=false;if(ay.legend){ay.legend.selectAll("."+D.legendItem+ay.getTargetSelectorSuffix(az)).remove()}ay.data.targets=ay.data.targets.filter(function(aA){return aA.id!==az})})};F.categoryName=function(ax){var aw=this.config;return ax<aw.axis_x_categories.length?aw.axis_x_categories[ax]:ax};F.initEventRect=function(){var aw=this;aw.main.select("."+D.chart).append("g").attr("class",D.eventRects).style("fill-opacity",0)};F.redrawEventRect=function(){var aw=this,ax=aw.config,aB,aA,az=aw.isMultipleX();var ay=aw.main.select("."+D.eventRects).style("cursor",ax.zoom_enabled?ax.axis_rotated?"ns-resize":"ew-resize":null).classed(D.eventRectsMultiple,az).classed(D.eventRectsSingle,!az);ay.selectAll("."+D.eventRect).remove();aw.eventRect=ay.selectAll("."+D.eventRect);if(az){aB=aw.eventRect.data([0]);aw.generateEventRectsForMultipleXs(aB.enter());aw.updateEventRect(aB)}else{aA=aw.getMaxDataCountTarget(aw.data.targets);ay.datum(aA?aA.values:[]);aw.eventRect=ay.selectAll("."+D.eventRect);aB=aw.eventRect.data(function(aC){return aC});aw.generateEventRectsForSingleX(aB.enter());aw.updateEventRect(aB);aB.exit().remove()}};F.updateEventRect=function(aD){var aE=this,ay=aE.config,aB,aA,aC,az,ax,aw;aD=aD||aE.eventRect.data(function(aF){return aF});if(aE.isMultipleX()){aB=0;aA=0;aC=aE.width;az=aE.height}else{if((aE.isCustomX()||aE.isTimeSeries())&&!aE.isCategorized()){aE.updateXs();ax=function(aH){var aF=aE.getPrevX(aH.index),aG=aE.getNextX(aH.index);if(aF===null&&aG===null){return ay.axis_rotated?aE.height:aE.width}if(aF===null){aF=aE.x.domain()[0]}if(aG===null){aG=aE.x.domain()[1]}return Math.max(0,(aE.x(aG)-aE.x(aF))/2)};aw=function(aI){var aG=aE.getPrevX(aI.index),aH=aE.getNextX(aI.index),aF=aE.data.xs[aI.id][aI.index];if(aG===null&&aH===null){return 0}if(aG===null){aG=aE.x.domain()[0]}return(aE.x(aF)+aE.x(aG))/2}}else{ax=aE.getEventRectWidth();aw=function(aF){return aE.x(aF.x)-(ax/2)}}aB=ay.axis_rotated?0:aw;aA=ay.axis_rotated?aw:0;aC=ay.axis_rotated?aE.width:ax;az=ay.axis_rotated?ax:aE.height}aD.attr("class",aE.classEvent.bind(aE)).attr("x",aB).attr("y",aA).attr("width",aC).attr("height",az)};F.generateEventRectsForSingleX=function(ay){var aw=this,az=aw.d3,ax=aw.config;ay.append("rect").attr("class",aw.classEvent.bind(aw)).style("cursor",ax.data_selection_enabled&&ax.data_selection_grouped?"pointer":null).on("mouseover",function(aB){var aA=aB.index;if(aw.dragging||aw.flowing){return}if(aw.hasArcType()){return}if(ax.point_focus_expand_enabled){aw.expandCircles(aA,null,true)}aw.expandBars(aA,null,true);aw.main.selectAll("."+D.shape+"-"+aA).each(function(aC){ax.data_onmouseover.call(aw.api,aC)})}).on("mouseout",function(aB){var aA=aB.index;if(!aw.config){return}if(aw.hasArcType()){return}aw.hideXGridFocus();aw.hideTooltip();aw.unexpandCircles();aw.unexpandBars();aw.main.selectAll("."+D.shape+"-"+aA).each(function(aC){ax.data_onmouseout.call(aw.api,aC)})}).on("mousemove",function(aD){var aC,aA=aD.index,aB=aw.svg.select("."+D.eventRect+"-"+aA);if(aw.dragging||aw.flowing){return}if(aw.hasArcType()){return}if(aw.isStepType(aD)&&aw.config.line_step_type==="step-after"&&az.mouse(this)[0]<aw.x(aw.getXValue(aD.id,aA))){aA-=1}aC=aw.filterTargetsToShow(aw.data.targets).map(function(aE){return aw.addName(aw.getValueOnIndex(aE.values,aA))});if(ax.tooltip_grouped){aw.showTooltip(aC,this);aw.showXGridFocus(aC)}if(ax.tooltip_grouped&&(!ax.data_selection_enabled||ax.data_selection_grouped)){return}aw.main.selectAll("."+D.shape+"-"+aA).each(function(){az.select(this).classed(D.EXPANDED,true);if(ax.data_selection_enabled){aB.style("cursor",ax.data_selection_grouped?"pointer":null)}if(!ax.tooltip_grouped){aw.hideXGridFocus();aw.hideTooltip();if(!ax.data_selection_grouped){aw.unexpandCircles(aA);aw.unexpandBars(aA)}}}).filter(function(aE){return aw.isWithinShape(this,aE)}).each(function(aE){if(ax.data_selection_enabled&&(ax.data_selection_grouped||ax.data_selection_isselectable(aE))){aB.style("cursor","pointer")}if(!ax.tooltip_grouped){aw.showTooltip([aE],this);aw.showXGridFocus([aE]);if(ax.point_focus_expand_enabled){aw.expandCircles(aA,aE.id,true)}aw.expandBars(aA,aE.id,true)}})}).on("click",function(aB){var aA=aB.index;if(aw.hasArcType()||!aw.toggleShape){return}if(aw.cancelClick){aw.cancelClick=false;return}if(aw.isStepType(aB)&&ax.line_step_type==="step-after"&&az.mouse(this)[0]<aw.x(aw.getXValue(aB.id,aA))){aA-=1}aw.main.selectAll("."+D.shape+"-"+aA).each(function(aC){if(ax.data_selection_grouped||aw.isWithinShape(this,aC)){aw.toggleShape(this,aC,aA);aw.config.data_onclick.call(aw.api,aC,this)}})}).call(ax.data_selection_draggable&&aw.drag?(az.behavior.drag().origin(Object).on("drag",function(){aw.drag(az.mouse(this))}).on("dragstart",function(){aw.dragstart(az.mouse(this))}).on("dragend",function(){aw.dragend()})):function(){})};F.generateEventRectsForMultipleXs=function(ay){var aw=this,az=aw.d3,ax=aw.config;function aA(){aw.svg.select("."+D.eventRect).style("cursor",null);aw.hideXGridFocus();aw.hideTooltip();aw.unexpandCircles();aw.unexpandBars()}ay.append("rect").attr("x",0).attr("y",0).attr("width",aw.width).attr("height",aw.height).attr("class",D.eventRect).on("mouseout",function(){if(!aw.config){return}if(aw.hasArcType()){return}aA()}).on("mousemove",function(){var aC=aw.filterTargetsToShow(aw.data.targets);var aB,aD,aF,aE;if(aw.dragging){return}if(aw.hasArcType(aC)){return}aB=az.mouse(this);aD=aw.findClosestFromTargets(aC,aB);if(aw.mouseover&&(!aD||aD.id!==aw.mouseover.id)){ax.data_onmouseout.call(aw.api,aw.mouseover);aw.mouseover=undefined}if(!aD){aA();return}if(aw.isScatterType(aD)||!ax.tooltip_grouped){aF=[aD]}else{aF=aw.filterByX(aC,aD.x)}aE=aF.map(function(aG){return aw.addName(aG)});aw.showTooltip(aE,this);if(ax.point_focus_expand_enabled){aw.expandCircles(aD.index,aD.id,true)}aw.expandBars(aD.index,aD.id,true);aw.showXGridFocus(aE);if(aw.isBarType(aD.id)||aw.dist(aD,aB)<100){aw.svg.select("."+D.eventRect).style("cursor","pointer");if(!aw.mouseover){ax.data_onmouseover.call(aw.api,aD);aw.mouseover=aD}}}).on("click",function(){var aC=aw.filterTargetsToShow(aw.data.targets);var aB,aD;if(aw.hasArcType(aC)){return}aB=az.mouse(this);aD=aw.findClosestFromTargets(aC,aB);if(!aD){return}if(aw.isBarType(aD.id)||aw.dist(aD,aB)<100){aw.main.selectAll("."+D.shapes+aw.getTargetSelectorSuffix(aD.id)).selectAll("."+D.shape+"-"+aD.index).each(function(){if(ax.data_selection_grouped||aw.isWithinShape(this,aD)){aw.toggleShape(this,aD,aD.index);aw.config.data_onclick.call(aw.api,aD,this)}})}}).call(ax.data_selection_draggable&&aw.drag?(az.behavior.drag().origin(Object).on("drag",function(){aw.drag(az.mouse(this))}).on("dragstart",function(){aw.dragstart(az.mouse(this))}).on("dragend",function(){aw.dragend()})):function(){})};F.dispatchEvent=function(aC,aA,aB){var aF=this,ay="."+D.eventRect+(!aF.isMultipleX()?"-"+aA:""),ax=aF.main.select(ay).node(),az=ax.getBoundingClientRect(),aE=az.left+(aB?aB[0]:0),aD=az.top+(aB?aB[1]:0),aw=document.createEvent("MouseEvents");aw.initMouseEvent(aC,true,true,ad,0,aE,aD,aE,aD,false,false,false,false,0,null);ax.dispatchEvent(aw)};F.getCurrentWidth=function(){var aw=this,ax=aw.config;return ax.size_width?ax.size_width:aw.getParentWidth()};F.getCurrentHeight=function(){var aw=this,ax=aw.config,ay=ax.size_height?ax.size_height:aw.getParentHeight();return ay>0?ay:320/(aw.hasType("gauge")?2:1)};F.getCurrentPaddingTop=function(){var aw=this.config;return i(aw.padding_top)?aw.padding_top:0};F.getCurrentPaddingBottom=function(){var aw=this.config;return i(aw.padding_bottom)?aw.padding_bottom:0};F.getCurrentPaddingLeft=function(aw){var ax=this,ay=ax.config;if(i(ay.padding_left)){return ay.padding_left}else{if(ay.axis_rotated){return !ay.axis_x_show?1:Math.max(O(ax.getAxisWidthByAxisId("x",aw)),40)}else{if(!ay.axis_y_show||ay.axis_y_inner){return ax.axis.getYAxisLabelPosition().isOuter?30:1}else{return O(ax.getAxisWidthByAxisId("y",aw))}}}};F.getCurrentPaddingRight=function(){var aw=this,ax=aw.config,az=10,ay=aw.isLegendRight?aw.getLegendWidth()+20:0;if(i(ax.padding_right)){return ax.padding_right+1}else{if(ax.axis_rotated){return az+ay}else{if(!ax.axis_y2_show||ax.axis_y2_inner){return 2+ay+(aw.axis.getY2AxisLabelPosition().isOuter?20:0)}else{return O(aw.getAxisWidthByAxisId("y2"))+ay}}}};F.getParentRectValue=function(ax){var ay=this.selectChart.node(),aw;while(ay&&ay.tagName!=="BODY"){try{aw=ay.getBoundingClientRect()[ax]}catch(az){if(ax==="width"){aw=ay.offsetWidth}}if(aw){break}ay=ay.parentNode}return aw};F.getParentWidth=function(){return this.getParentRectValue("width")};F.getParentHeight=function(){var aw=this.selectChart.style("height");return aw.indexOf("px")>0?+aw.replace("px",""):0};F.getSvgLeft=function(aC){var aE=this,ax=aE.config,aA=ax.axis_rotated||(!ax.axis_rotated&&!ax.axis_y_inner),aF=ax.axis_rotated?D.axisX:D.axisY,aw=aE.main.select("."+aF).node(),aD=aw&&aA?aw.getBoundingClientRect():{right:0},aB=aE.selectChart.node().getBoundingClientRect(),az=aE.hasArcType(),ay=aD.right-aB.left-(az?0:aE.getCurrentPaddingLeft(aC));return ay>0?ay:0};F.getAxisWidthByAxisId=function(az,ax){var ay=this,aw=ay.axis.getLabelPositionById(az);return ay.axis.getMaxTickWidth(az,ax)+(aw.isInner?20:40)};F.getHorizontalAxisHeight=function(az){var aw=this,ax=aw.config,ay=30;if(az==="x"&&!ax.axis_x_show){return 8}if(az==="x"&&ax.axis_x_height){return ax.axis_x_height}if(az==="y"&&!ax.axis_y_show){return ax.legend_show&&!aw.isLegendRight&&!aw.isLegendInset?10:1}if(az==="y2"&&!ax.axis_y2_show){return aw.rotated_padding_top}if(az==="x"&&!ax.axis_rotated&&ax.axis_x_tick_rotate){ay=30+aw.axis.getMaxTickWidth(az)*Math.cos(Math.PI*(90-ax.axis_x_tick_rotate)/180)}return ay+(aw.axis.getLabelPositionById(az).isInner?0:10)+(az==="y2"?-10:0)};F.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())};F.getShapeIndices=function(aB){var ax=this,az=ax.config,aC={},aA=0,ay,aw;ax.filterTargetsToShow(ax.data.targets.filter(aB,ax)).forEach(function(aD){for(ay=0;ay<az.data_groups.length;ay++){if(az.data_groups[ay].indexOf(aD.id)<0){continue}for(aw=0;aw<az.data_groups[ay].length;aw++){if(az.data_groups[ay][aw] in aC){aC[aD.id]=aC[az.data_groups[ay][aw]];break}}}if(E(aC[aD.id])){aC[aD.id]=aA++}});aC.__max__=aA-1;return aC};F.getShapeX=function(aB,ax,aA,aw){var ay=this,az=aw?ay.subX:ay.x;return function(aD){var aC=aD.id in aA?aA[aD.id]:0;return aD.x||aD.x===0?az(aD.x)-aB*(ax/2-aC):0}};F.getShapeY=function(aw){var ax=this;return function(az){var ay=aw?ax.getSubYScale(az.id):ax.getYScale(az.id);return ay(az.value)}};F.getShapeOffset=function(aA,aB,aw){var az=this,ay=az.orderTargets(az.filterTargetsToShow(az.data.targets.filter(aA,az))),ax=ay.map(function(aC){return aC.id});return function(aG,aC){var aF=aw?az.getSubYScale(aG.id):az.getYScale(aG.id),aD=aF(0),aE=aD;ay.forEach(function(aI){var aH=az.isStepType(aG)?az.convertValuesToStep(aI.values):aI.values;if(aI.id===aG.id||aB[aI.id]!==aB[aG.id]){return}if(ax.indexOf(aI.id)<ax.indexOf(aG.id)){if(aH[aC].value*aG.value>=0){aE+=aF(aH[aC].value)-aD}}});return aE}};F.isWithinShape=function(ay,az){var ax=this,aw=ax.d3.select(ay),aA;if(!ax.isTargetToShow(az.id)){aA=false}else{if(ay.nodeName==="circle"){aA=ax.isStepType(az)?ax.isWithinStep(ay,ax.getYScale(az.id)(az.value)):ax.isWithinCircle(ay,ax.pointSelectR(az)*1.5)}else{if(ay.nodeName==="path"){aA=aw.classed(D.bar)?ax.isWithinBar(ay):true}}}return aA};F.getInterpolate=function(ax){var aw=this;return aw.isSplineType(ax)?"cardinal":aw.isStepType(ax)?aw.config.line_step_type:"linear"};F.initLine=function(){var aw=this;aw.main.select("."+D.chart).append("g").attr("class",D.chartLines)};F.updateTargetsForLine=function(aE){var aF=this,ay=aF.config,aw,ax,aA=aF.classChartLine.bind(aF),aB=aF.classLines.bind(aF),aC=aF.classAreas.bind(aF),aD=aF.classCircles.bind(aF),az=aF.classFocus.bind(aF);aw=aF.main.select("."+D.chartLines).selectAll("."+D.chartLine).data(aE).attr("class",function(aG){return aA(aG)+az(aG)});ax=aw.enter().append("g").attr("class",aA).style("opacity",0).style("pointer-events","none");ax.append("g").attr("class",aB);ax.append("g").attr("class",aC);ax.append("g").attr("class",function(aG){return aF.generateClass(D.selectedCircles,aG.id)});ax.append("g").attr("class",aD).style("cursor",function(aG){return ay.data_selection_isselectable(aG)?"pointer":null});aE.forEach(function(aG){aF.main.selectAll("."+D.selectedCircles+aF.getTargetSelectorSuffix(aG.id)).selectAll("."+D.selectedCircle).each(function(aH){aH.value=aG.values[aH.index].value})})};F.updateLine=function(ax){var aw=this;aw.mainLine=aw.main.selectAll("."+D.lines).selectAll("."+D.line).data(aw.lineData.bind(aw));aw.mainLine.enter().append("path").attr("class",aw.classLine.bind(aw)).style("stroke",aw.color);aw.mainLine.style("opacity",aw.initialOpacity.bind(aw)).style("shape-rendering",function(ay){return aw.isStepType(ay)?"crispEdges":""}).attr("transform",null);aw.mainLine.exit().transition().duration(ax).style("opacity",0).remove()};F.redrawLine=function(ax,aw){return[(aw?this.mainLine.transition():this.mainLine).attr("d",ax).style("stroke",this.color).style("opacity",1)]};F.generateDrawLine=function(aw,aD){var aC=this,ax=aC.config,aE=aC.d3.svg.line(),aA=aC.generateGetLinePoints(aw,aD),ay=aD?aC.getSubYScale:aC.getYScale,az=function(aF){return(aD?aC.subxx:aC.xx).call(aC,aF)},aB=function(aG,aF){return ax.data_groups.length>0?aA(aG,aF)[0][1]:ay.call(aC,aG.id)(aG.value)};aE=ax.axis_rotated?aE.x(aB).y(az):aE.x(az).y(aB);if(!ax.line_connectNull){aE=aE.defined(function(aF){return aF.value!=null})}return function(aK){var aG=ax.line_connectNull?aC.filterRemoveNull(aK.values):aK.values,aF=aD?aC.x:aC.subX,aL=ay.call(aC,aK.id),aH=0,aI=0,aJ;if(aC.isLineType(aK)){if(ax.data_regions[aK.id]){aJ=aC.lineWithRegions(aG,aF,aL,ax.data_regions[aK.id])}else{if(aC.isStepType(aK)){aG=aC.convertValuesToStep(aG)}aJ=aE.interpolate(aC.getInterpolate(aK))(aG)}}else{if(aG[0]){aH=aF(aG[0].x);aI=aL(aG[0].value)}aJ=ax.axis_rotated?"M "+aI+" "+aH:"M "+aH+" "+aI}return aJ?aJ:"M 0 0"}};F.generateGetLinePoints=function(aw,aE){var aD=this,ay=aD.config,aA=aw.__max__+1,aC=aD.getShapeX(0,aA,aw,!!aE),aB=aD.getShapeY(!!aE),az=aD.getShapeOffset(aD.isLineType,aw,!!aE),ax=aE?aD.getSubYScale:aD.getYScale;return function(aJ,aF){var aG=ax.call(aD,aJ.id)(0),aI=az(aJ,aF)||aG,aK=aC(aJ),aH=aB(aJ);if(ay.axis_rotated){if((0<aJ.value&&aH<aG)||(aJ.value<0&&aG<aH)){aH=aG}}return[[aK,aH-(aG-aI)],[aK,aH-(aG-aI)],[aK,aH-(aG-aI)],[aK,aH-(aG-aI)]]}};F.lineWithRegions=function(aQ,aB,aA,aI){var aG=this,aS=aG.config,aK=-1,aN,aM,aJ="M",aD,aE,aO,aF,aC,aR,aH,az,aT=aG.isCategorized()?0.5:0,aL,aP,aw=[];function ax(aU,aW){var aV;for(aV=0;aV<aW.length;aV++){if(aW[aV].start<aU&&aU<=aW[aV].end){return true}}return false}if(I(aI)){for(aN=0;aN<aI.length;aN++){aw[aN]={};if(E(aI[aN].start)){aw[aN].start=aQ[0].x}else{aw[aN].start=aG.isTimeSeries()?aG.parseDate(aI[aN].start):aI[aN].start}if(E(aI[aN].end)){aw[aN].end=aQ[aQ.length-1].x}else{aw[aN].end=aG.isTimeSeries()?aG.parseDate(aI[aN].end):aI[aN].end}}}aL=aS.axis_rotated?function(aU){return aA(aU.value)}:function(aU){return aB(aU.x)};aP=aS.axis_rotated?function(aU){return aB(aU.x)}:function(aU){return aA(aU.value)};function ay(aU){return"M"+aU[0][0]+" "+aU[0][1]+" "+aU[1][0]+" "+aU[1][1]}if(aG.isTimeSeries()){aD=function(aV,aU,aY,aZ){var aW=aV.x.getTime(),aX=aU.x-aV.x,a2=new Date(aW+aX*aY),a1=new Date(aW+aX*(aY+aZ)),a0;if(aS.axis_rotated){a0=[[aA(aO(aY)),aB(a2)],[aA(aO(aY+aZ)),aB(a1)]]}else{a0=[[aB(a2),aA(aO(aY))],[aB(a1),aA(aO(aY+aZ))]]}return ay(a0)}}else{aD=function(aY,aW,aU,aX){var aV;if(aS.axis_rotated){aV=[[aA(aO(aU),true),aB(aE(aU))],[aA(aO(aU+aX),true),aB(aE(aU+aX))]]}else{aV=[[aB(aE(aU),true),aA(aO(aU))],[aB(aE(aU+aX),true),aA(aO(aU+aX))]]}return ay(aV)}}for(aN=0;aN<aQ.length;aN++){if(E(aw)||!ax(aQ[aN].x,aw)){aJ+=" "+aL(aQ[aN])+" "+aP(aQ[aN])}else{aE=aG.getScale(aQ[aN-1].x+aT,aQ[aN].x+aT,aG.isTimeSeries());aO=aG.getScale(aQ[aN-1].value,aQ[aN].value);aF=aB(aQ[aN].x)-aB(aQ[aN-1].x);aC=aA(aQ[aN].value)-aA(aQ[aN-1].value);aR=Math.sqrt(Math.pow(aF,2)+Math.pow(aC,2));aH=2/aR;az=aH*2;for(aM=aH;aM<=1;aM+=az){aJ+=aD(aQ[aN-1],aQ[aN],aM,aH)}}aK=aQ[aN].x}return aJ};F.updateArea=function(ay){var aw=this,ax=aw.d3;aw.mainArea=aw.main.selectAll("."+D.areas).selectAll("."+D.area).data(aw.lineData.bind(aw));aw.mainArea.enter().append("path").attr("class",aw.classArea.bind(aw)).style("fill",aw.color).style("opacity",function(){aw.orgAreaOpacity=+ax.select(this).style("opacity");return 0});aw.mainArea.style("opacity",aw.orgAreaOpacity);aw.mainArea.exit().transition().duration(ay).style("opacity",0).remove()};F.redrawArea=function(ax,aw){return[(aw?this.mainArea.transition():this.mainArea).attr("d",ax).style("fill",this.color).style("opacity",this.orgAreaOpacity)]};F.generateDrawArea=function(az,aF){var aE=this,ax=aE.config,aw=aE.d3.svg.area(),aB=aE.generateGetAreaPoints(az,aF),ay=aF?aE.getSubYScale:aE.getYScale,aA=function(aG){return(aF?aE.subxx:aE.xx).call(aE,aG)},aD=function(aH,aG){return ax.data_groups.length>0?aB(aH,aG)[0][1]:ay.call(aE,aH.id)(aE.getAreaBaseValue(aH.id))},aC=function(aH,aG){return ax.data_groups.length>0?aB(aH,aG)[1][1]:ay.call(aE,aH.id)(aH.value)};aw=ax.axis_rotated?aw.x0(aD).x1(aC).y(aA):aw.x(aA).y0(aD).y1(aC);if(!ax.line_connectNull){aw=aw.defined(function(aG){return aG.value!==null})}return function(aK){var aG=ax.line_connectNull?aE.filterRemoveNull(aK.values):aK.values,aH=0,aI=0,aJ;if(aE.isAreaType(aK)){if(aE.isStepType(aK)){aG=aE.convertValuesToStep(aG)}aJ=aw.interpolate(aE.getInterpolate(aK))(aG)}else{if(aG[0]){aH=aE.x(aG[0].x);aI=aE.getYScale(aK.id)(aG[0].value)}aJ=ax.axis_rotated?"M "+aI+" "+aH:"M "+aH+" "+aI}return aJ?aJ:"M 0 0"}};F.getAreaBaseValue=function(){return 0};F.generateGetAreaPoints=function(az,aE){var aD=this,ax=aD.config,aA=az.__max__+1,aC=aD.getShapeX(0,aA,az,!!aE),aB=aD.getShapeY(!!aE),ay=aD.getShapeOffset(aD.isAreaType,az,!!aE),aw=aE?aD.getSubYScale:aD.getYScale;return function(aJ,aF){var aG=aw.call(aD,aJ.id)(0),aI=ay(aJ,aF)||aG,aK=aC(aJ),aH=aB(aJ);if(ax.axis_rotated){if((0<aJ.value&&aH<aG)||(aJ.value<0&&aG<aH)){aH=aG}}return[[aK,aI],[aK,aH-(aG-aI)],[aK,aH-(aG-aI)],[aK,aI]]}};F.updateCircle=function(){var aw=this;aw.mainCircle=aw.main.selectAll("."+D.circles).selectAll("."+D.circle).data(aw.lineOrScatterData.bind(aw));aw.mainCircle.enter().append("circle").attr("class",aw.classCircle.bind(aw)).attr("r",aw.pointR.bind(aw)).style("fill",aw.color);aw.mainCircle.style("opacity",aw.initialOpacityForCircle.bind(aw));aw.mainCircle.exit().remove()};F.redrawCircle=function(aw,az,ax){var ay=this.main.selectAll("."+D.selectedCircle);return[(ax?this.mainCircle.transition():this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",aw).attr("cy",az),(ax?ay.transition():ay).attr("cx",aw).attr("cy",az)]};F.circleX=function(aw){return aw.x||aw.x===0?this.x(aw.x):null};F.updateCircleY=function(){var aw=this,ay,ax;if(aw.config.data_groups.length>0){ay=aw.getShapeIndices(aw.isLineType),ax=aw.generateGetLinePoints(ay);aw.circleY=function(aA,az){return ax(aA,az)[0][1]}}else{aw.circleY=function(az){return aw.getYScale(az.id)(az.value)}}};F.getCircles=function(ax,ay){var aw=this;return(ay?aw.main.selectAll("."+D.circles+aw.getTargetSelectorSuffix(ay)):aw.main).selectAll("."+D.circle+(i(ax)?"-"+ax:""))};F.expandCircles=function(ax,aA,az){var aw=this,ay=aw.pointExpandedR.bind(aw);if(az){aw.unexpandCircles()}aw.getCircles(ax,aA).classed(D.EXPANDED,true).attr("r",ay)};F.unexpandCircles=function(ax){var aw=this,ay=aw.pointR.bind(aw);aw.getCircles(ax).filter(function(){return aw.d3.select(this).classed(D.EXPANDED)}).classed(D.EXPANDED,false).attr("r",ay)};F.pointR=function(ay){var aw=this,ax=aw.config;return aw.isStepType(ay)?0:(y(ax.point_r)?ax.point_r(ay):ax.point_r)};F.pointExpandedR=function(ay){var aw=this,ax=aw.config;return ax.point_focus_expand_enabled?(ax.point_focus_expand_r?ax.point_focus_expand_r:aw.pointR(ay)*1.75):aw.pointR(ay)};F.pointSelectR=function(ay){var aw=this,ax=aw.config;return ax.point_select_r?ax.point_select_r:aw.pointR(ay)*4};F.isWithinCircle=function(aB,aA){var az=this.d3,ay=az.mouse(aB),ax=az.select(aB),aw=+ax.attr("cx"),aC=+ax.attr("cy");return Math.sqrt(Math.pow(aw-ay[0],2)+Math.pow(aC-ay[1],2))<aA};F.isWithinStep=function(aw,ax){return Math.abs(ax-this.d3.mouse(aw)[1])<30};F.initBar=function(){var aw=this;aw.main.select("."+D.chart).append("g").attr("class",D.chartBars)};F.updateTargetsForBar=function(ax){var az=this,aB=az.config,aD,aw,aA=az.classChartBar.bind(az),aC=az.classBars.bind(az),ay=az.classFocus.bind(az);aD=az.main.select("."+D.chartBars).selectAll("."+D.chartBar).data(ax).attr("class",function(aE){return aA(aE)+ay(aE)});aw=aD.enter().append("g").attr("class",aA).style("opacity",0).style("pointer-events","none");aw.append("g").attr("class",aC).style("cursor",function(aE){return aB.data_selection_isselectable(aE)?"pointer":null})};F.updateBar=function(aB){var ay=this,aw=ay.barData.bind(ay),az=ay.classBar.bind(ay),aA=ay.initialOpacity.bind(ay),ax=function(aC){return ay.color(aC.id)};ay.mainBar=ay.main.selectAll("."+D.bars).selectAll("."+D.bar).data(aw);ay.mainBar.enter().append("path").attr("class",az).style("stroke",ax).style("fill",ax);ay.mainBar.style("opacity",aA);ay.mainBar.exit().transition().duration(aB).style("opacity",0).remove()};F.redrawBar=function(aw,ax){return[(ax?this.mainBar.transition():this.mainBar).attr("d",aw).style("fill",this.color).style("opacity",1)]};F.getBarW=function(aA,az){var ax=this,ay=ax.config,aw=typeof ay.bar_width==="number"?ay.bar_width:az?(aA.tickInterval()*ay.bar_width_ratio)/az:0;return ay.bar_width_max&&aw>ay.bar_width_max?ay.bar_width_max:aw};F.getBars=function(ax,ay){var aw=this;return(ay?aw.main.selectAll("."+D.bars+aw.getTargetSelectorSuffix(ay)):aw.main).selectAll("."+D.bar+(i(ax)?"-"+ax:""))};F.expandBars=function(ax,az,ay){var aw=this;if(ay){aw.unexpandBars()}aw.getBars(ax,az).classed(D.EXPANDED,true)};F.unexpandBars=function(ax){var aw=this;aw.getBars(ax).classed(D.EXPANDED,false)};F.generateDrawBar=function(ax,aw){var ay=this,aA=ay.config,az=ay.generateGetBarPoints(ax,aw);return function(aG,aD){var aE=az(aG,aD);var aC=aA.axis_rotated?1:0;var aB=aA.axis_rotated?0:1;var aF="M "+aE[0][aC]+","+aE[0][aB]+" L"+aE[1][aC]+","+aE[1][aB]+" L"+aE[2][aC]+","+aE[2][aB]+" L"+aE[3][aC]+","+aE[3][aB]+" z";return aF}};F.generateGetBarPoints=function(aB,aE){var aD=this,az=aE?aD.subXAxis:aD.xAxis,aC=aB.__max__+1,ax=aD.getBarW(az,aC),aw=aD.getShapeX(ax,aC,aB,!!aE),aF=aD.getShapeY(!!aE),aA=aD.getShapeOffset(aD.isBarType,aB,!!aE),ay=aE?aD.getSubYScale:aD.getYScale;return function(aK,aG){var aH=ay.call(aD,aK.id)(0),aJ=aA(aK,aG)||aH,aL=aw(aK),aI=aF(aK);if(aD.config.axis_rotated){if((0<aK.value&&aI<aH)||(aK.value<0&&aH<aI)){aI=aH}}return[[aL,aJ],[aL,aI-(aH-aJ)],[aL+ax,aI-(aH-aJ)],[aL+ax,aJ]]}};F.isWithinBar=function(aA){var aC=this.d3.mouse(aA),az=aA.getBoundingClientRect(),aw=aA.pathSegList.getItem(0),aJ=aA.pathSegList.getItem(1),aH=Math.min(aw.x,aJ.x),aF=Math.min(aw.y,aJ.y),aI=az.width,ay=az.height,ax=2,aG=aH-ax,aD=aH+aI+ax,aE=aF+ay+ax,aB=aF-ax;return aG<aC[0]&&aC[0]<aD&&aB<aC[1]&&aC[1]<aE};F.initText=function(){var aw=this;aw.main.select("."+D.chart).append("g").attr("class",D.chartTexts);aw.mainText=aw.d3.selectAll([])};F.updateTargetsForText=function(ax){var az=this,aC,aw,aA=az.classChartText.bind(az),aB=az.classTexts.bind(az),ay=az.classFocus.bind(az);aC=az.main.select("."+D.chartTexts).selectAll("."+D.chartText).data(ax).attr("class",function(aD){return aA(aD)+ay(aD)});aw=aC.enter().append("g").attr("class",aA).style("opacity",0).style("pointer-events","none");aw.append("g").attr("class",aB)};F.updateText=function(aA){var ax=this,ay=ax.config,az=ax.barOrLineData.bind(ax),aw=ax.classText.bind(ax);ax.mainText=ax.main.selectAll("."+D.texts).selectAll("."+D.text).data(az);ax.mainText.enter().append("text").attr("class",aw).attr("text-anchor",function(aB){return ay.axis_rotated?(aB.value<0?"end":"start"):"middle"}).style("stroke","none").style("fill",function(aB){return ax.color(aB)}).style("fill-opacity",0);ax.mainText.text(function(aD,aC,aB){return ax.dataLabelFormat(aD.id)(aD.value,aD.id,aC,aB)});ax.mainText.exit().transition().duration(aA).style("fill-opacity",0).remove()};F.redrawText=function(az,ay,ax,aw){return[(aw?this.mainText.transition():this.mainText).attr("x",az).attr("y",ay).style("fill",this.color).style("fill-opacity",ax?0:this.opacityForText.bind(this))]};F.getTextRect=function(aA,aw){var az=this.d3.select("body").append("div").classed("c3",true),ax=az.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),ay;ax.selectAll(".dummy").data([aA]).enter().append("text").classed(aw?aw:"",true).text(aA).each(function(){ay=this.getBoundingClientRect()});az.remove();return ay};F.generateXYForText=function(az,aB,ax,aw){var aE=this,ay=aE.generateGetAreaPoints(az,false),aC=aE.generateGetBarPoints(aB,false),aA=aE.generateGetLinePoints(ax,false),aD=aw?aE.getXForText:aE.getYForText;return function(aH,aG){var aF=aE.isAreaType(aH)?ay:aE.isBarType(aH)?aC:aA;return aD.call(aE,aF(aH,aG),aH,this)}};F.getXForText=function(ay,aC,ax){var aw=this,az=ax.getBoundingClientRect(),aB,aA;if(aw.config.axis_rotated){aA=aw.isBarType(aC)?4:6;aB=ay[2][1]+aA*(aC.value<0?-1:1)}else{aB=aw.hasType("bar")?(ay[2][0]+ay[0][0])/2:ay[0][0]}if(aC.value===null){if(aB>aw.width){aB=aw.width-az.width}else{if(aB<0){aB=4}}}return aB};F.getYForText=function(ay,aB,ax){var aw=this,aA=ax.getBoundingClientRect(),az;if(aw.config.axis_rotated){az=(ay[0][0]+ay[2][0]+aA.height*0.6)/2}else{az=ay[2][1];if(aB.value<0){az+=aA.height;if(aw.isBarType(aB)&&aw.isSafari()){az-=3}else{if(!aw.isBarType(aB)&&aw.isChrome()){az+=3}}}else{az+=aw.isBarType(aB)?-3:-6}}if(aB.value===null&&!aw.config.axis_rotated){if(az<aA.height){az=aA.height}else{if(az>this.height){az=this.height-4}}}return az};F.setTargetType=function(aw,az){var ax=this,ay=ax.config;ax.mapToTargetIds(aw).forEach(function(aA){ax.withoutFadeIn[aA]=(az===ay.data_types[aA]);ay.data_types[aA]=az});if(!aw){ay.data_type=az}};F.hasType=function(aA,aw){var ax=this,az=ax.config.data_types,ay=false;aw=aw||ax.data.targets;if(aw&&aw.length){aw.forEach(function(aC){var aB=az[aC.id];if((aB&&aB.indexOf(aA)>=0)||(!aB&&aA==="line")){ay=true}})}else{if(Object.keys(az).length){Object.keys(az).forEach(function(aB){if(az[aB]===aA){ay=true}})}else{ay=ax.config.data_type===aA}}return ay};F.hasArcType=function(aw){return this.hasType("pie",aw)||this.hasType("donut",aw)||this.hasType("gauge",aw)};F.isLineType=function(ax){var aw=this.config,ay=r(ax)?ax:ax.id;return !aw.data_types[ay]||["line","spline","area","area-spline","step","area-step"].indexOf(aw.data_types[ay])>=0};F.isStepType=function(aw){var ax=r(aw)?aw:aw.id;return["step","area-step"].indexOf(this.config.data_types[ax])>=0};F.isSplineType=function(aw){var ax=r(aw)?aw:aw.id;return["spline","area-spline"].indexOf(this.config.data_types[ax])>=0};F.isAreaType=function(aw){var ax=r(aw)?aw:aw.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[ax])>=0};F.isBarType=function(aw){var ax=r(aw)?aw:aw.id;return this.config.data_types[ax]==="bar"};F.isScatterType=function(aw){var ax=r(aw)?aw:aw.id;return this.config.data_types[ax]==="scatter"};F.isPieType=function(aw){var ax=r(aw)?aw:aw.id;return this.config.data_types[ax]==="pie"};F.isGaugeType=function(aw){var ax=r(aw)?aw:aw.id;return this.config.data_types[ax]==="gauge"};F.isDonutType=function(aw){var ax=r(aw)?aw:aw.id;return this.config.data_types[ax]==="donut"};F.isArcType=function(aw){return this.isPieType(aw)||this.isDonutType(aw)||this.isGaugeType(aw)};F.lineData=function(aw){return this.isLineType(aw)?[aw]:[]};F.arcData=function(aw){return this.isArcType(aw.data)?[aw]:[]};F.barData=function(aw){return this.isBarType(aw)?aw.values:[]};F.lineOrScatterData=function(aw){return this.isLineType(aw)||this.isScatterType(aw)?aw.values:[]};F.barOrLineData=function(aw){return this.isBarType(aw)||this.isLineType(aw)?aw.values:[]};F.initGrid=function(){var aw=this,ax=aw.config,ay=aw.d3;aw.grid=aw.main.append("g").attr("clip-path",aw.clipPathForGrid).attr("class",D.grid);if(ax.grid_x_show){aw.grid.append("g").attr("class",D.xgrids)}if(ax.grid_y_show){aw.grid.append("g").attr("class",D.ygrids)}if(ax.grid_focus_show){aw.grid.append("g").attr("class",D.xgridFocus).append("line").attr("class",D.xgridFocus)}aw.xgrid=ay.selectAll([]);if(!ax.grid_lines_front){aw.initGridLines()}};F.initGridLines=function(){var aw=this,ax=aw.d3;aw.gridLines=aw.main.append("g").attr("clip-path",aw.clipPathForGrid).attr("class",D.grid+" "+D.gridLines);aw.gridLines.append("g").attr("class",D.xgridLines);aw.gridLines.append("g").attr("class",D.ygridLines);aw.xgridLines=ax.selectAll([])};F.updateXGrid=function(az){var aw=this,ax=aw.config,ay=aw.d3,aB=aw.generateGridData(ax.grid_x_type,aw.x),aA=aw.isCategorized()?aw.xAxis.tickOffset():0;aw.xgridAttr=ax.axis_rotated?{x1:0,x2:aw.width,y1:function(aC){return aw.x(aC)-aA},y2:function(aC){return aw.x(aC)-aA}}:{x1:function(aC){return aw.x(aC)+aA},x2:function(aC){return aw.x(aC)+aA},y1:0,y2:aw.height};aw.xgrid=aw.main.select("."+D.xgrids).selectAll("."+D.xgrid).data(aB);aw.xgrid.enter().append("line").attr("class",D.xgrid);if(!az){aw.xgrid.attr(aw.xgridAttr).style("opacity",function(){return +ay.select(this).attr(ax.axis_rotated?"y1":"x1")===(ax.axis_rotated?aw.height:0)?0:1})}aw.xgrid.exit().remove()};F.updateYGrid=function(){var aw=this,ax=aw.config,ay=aw.yAxis.tickValues()||aw.y.ticks(ax.grid_y_ticks);aw.ygrid=aw.main.select("."+D.ygrids).selectAll("."+D.ygrid).data(ay);aw.ygrid.enter().append("line").attr("class",D.ygrid);aw.ygrid.attr("x1",ax.axis_rotated?aw.y:0).attr("x2",ax.axis_rotated?aw.y:aw.width).attr("y1",ax.axis_rotated?0:aw.y).attr("y2",ax.axis_rotated?aw.height:aw.y);aw.ygrid.exit().remove();aw.smoothLines(aw.ygrid,"grid")};F.gridTextAnchor=function(aw){return aw.position?aw.position:"end"};F.gridTextDx=function(aw){return aw.position==="start"?4:aw.position==="middle"?0:-4};F.xGridTextX=function(aw){return aw.position==="start"?-this.height:aw.position==="middle"?-this.height/2:0};F.yGridTextX=function(aw){return aw.position==="start"?0:aw.position==="middle"?this.width/2:this.width};F.updateGrid=function(aC){var ay=this,aw=ay.main,aA=ay.config,aB,az,ax;ay.grid.style("visibility",ay.hasArcType()?"hidden":"visible");aw.select("line."+D.xgridFocus).style("visibility","hidden");if(aA.grid_x_show){ay.updateXGrid()}ay.xgridLines=aw.select("."+D.xgridLines).selectAll("."+D.xgridLine).data(aA.grid_x_lines);aB=ay.xgridLines.enter().append("g").attr("class",function(aD){return D.xgridLine+(aD["class"]?" "+aD["class"]:"")});aB.append("line").style("opacity",0);aB.append("text").attr("text-anchor",ay.gridTextAnchor).attr("transform",aA.axis_rotated?"":"rotate(-90)").attr("dx",ay.gridTextDx).attr("dy",-5).style("opacity",0);ay.xgridLines.exit().transition().duration(aC).style("opacity",0).remove();if(aA.grid_y_show){ay.updateYGrid()}ay.ygridLines=aw.select("."+D.ygridLines).selectAll("."+D.ygridLine).data(aA.grid_y_lines);az=ay.ygridLines.enter().append("g").attr("class",function(aD){return D.ygridLine+(aD["class"]?" "+aD["class"]:"")});az.append("line").style("opacity",0);az.append("text").attr("text-anchor",ay.gridTextAnchor).attr("transform",aA.axis_rotated?"rotate(-90)":"").attr("dx",ay.gridTextDx).attr("dy",-5).style("opacity",0);ax=ay.yv.bind(ay);ay.ygridLines.select("line").transition().duration(aC).attr("x1",aA.axis_rotated?ax:0).attr("x2",aA.axis_rotated?ax:ay.width).attr("y1",aA.axis_rotated?0:ax).attr("y2",aA.axis_rotated?ay.height:ax).style("opacity",1);ay.ygridLines.select("text").transition().duration(aC).attr("x",aA.axis_rotated?ay.xGridTextX.bind(ay):ay.yGridTextX.bind(ay)).attr("y",ax).text(function(aD){return aD.text}).style("opacity",1);ay.ygridLines.exit().transition().duration(aC).style("opacity",0).remove()};F.redrawGrid=function(aA){var ay=this,az=ay.config,aw=ay.xv.bind(ay),ax=ay.xgridLines.select("line"),aB=ay.xgridLines.select("text");return[(aA?ax.transition():ax).attr("x1",az.axis_rotated?0:aw).attr("x2",az.axis_rotated?ay.width:aw).attr("y1",az.axis_rotated?aw:0).attr("y2",az.axis_rotated?aw:ay.height).style("opacity",1),(aA?aB.transition():aB).attr("x",az.axis_rotated?ay.yGridTextX.bind(ay):ay.xGridTextX.bind(ay)).attr("y",aw).text(function(aC){return aC.text}).style("opacity",1)]};F.showXGridFocus=function(aA){var ay=this,az=ay.config,ax=aA.filter(function(aC){return aC&&i(aC.value)}),aw=ay.main.selectAll("line."+D.xgridFocus),aB=ay.xx.bind(ay);if(!az.tooltip_show){return}if(ay.hasType("scatter")||ay.hasArcType()){return}aw.style("visibility","visible").data([ax[0]]).attr(az.axis_rotated?"y1":"x1",aB).attr(az.axis_rotated?"y2":"x2",aB);ay.smoothLines(aw,"grid")};F.hideXGridFocus=function(){this.main.select("line."+D.xgridFocus).style("visibility","hidden")};F.updateXgridFocus=function(){var aw=this,ax=aw.config;aw.main.select("line."+D.xgridFocus).attr("x1",ax.axis_rotated?0:-10).attr("x2",ax.axis_rotated?aw.width:-10).attr("y1",ax.axis_rotated?-10:0).attr("y2",ax.axis_rotated?-10:aw.height)};F.generateGridData=function(aC,ax){var aE=this,aD=[],aB,az,aA,ay,aw=aE.main.select("."+D.axisX).selectAll(".tick").size();if(aC==="year"){aB=aE.getXDomain();az=aB[0].getFullYear();aA=aB[1].getFullYear();for(ay=az;ay<=aA;ay++){aD.push(new Date(ay+"-01-01 00:00:00"))}}else{aD=ax.ticks(10);if(aD.length>aw){aD=aD.filter(function(aF){return(""+aF).indexOf(".")<0})}}return aD};F.getGridFilterToRemove=function(aw){return aw?function(ax){var ay=false;[].concat(aw).forEach(function(az){if((("value" in az&&ax.value===az.value)||("class" in az&&ax["class"]===az["class"]))){ay=true}});return ay}:function(){return true}};F.removeGridLines=function(aD,aC){var ay=this,aA=ay.config,aB=ay.getGridFilterToRemove(aD),aw=function(aE){return !aB(aE)},ax=aC?D.xgridLines:D.ygridLines,az=aC?D.xgridLine:D.ygridLine;ay.main.select("."+ax).selectAll("."+az).filter(aB).transition().duration(aA.transition_duration).style("opacity",0).remove();if(aC){aA.grid_x_lines=aA.grid_x_lines.filter(aw)}else{aA.grid_y_lines=aA.grid_y_lines.filter(aw)}};F.initTooltip=function(){var aw=this,ax=aw.config,ay;aw.tooltip=aw.selectChart.style("position","relative").append("div").attr("class",D.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none");if(ax.tooltip_init_show){if(aw.isTimeSeries()&&r(ax.tooltip_init_x)){ax.tooltip_init_x=aw.parseDate(ax.tooltip_init_x);for(ay=0;ay<aw.data.targets[0].values.length;ay++){if((aw.data.targets[0].values[ay].x-ax.tooltip_init_x)===0){break}}ax.tooltip_init_x=ay}aw.tooltip.html(ax.tooltip_contents.call(aw,aw.data.targets.map(function(az){return aw.addName(az.values[ax.tooltip_init_x])}),aw.axis.getXAxisTickFormat(),aw.getYFormat(aw.hasArcType()),aw.color));aw.tooltip.style("top",ax.tooltip_init_position.top).style("left",ax.tooltip_init_position.left).style("display","block")}};F.getTooltipContent=function(aF,ax,az,aB){var aJ=this,ay=aJ.config,aD=ay.tooltip_format_title||ax,aA=ay.tooltip_format_name||function(aL){return aL},aE=ay.tooltip_format_value||az,aI,aC,aG,aH,aw,aK;for(aC=0;aC<aF.length;aC++){if(!(aF[aC]&&(aF[aC].value||aF[aC].value===0))){continue}if(!aI){aG=aD?aD(aF[aC].x):aF[aC].x;aI="<table class='"+D.tooltip+"'>"+(aG||aG===0?"<tr><th colspan='2'>"+aG+"</th></tr>":"")}aH=aE(aF[aC].value,aF[aC].ratio,aF[aC].id,aF[aC].index);if(aH!==undefined){aw=aA(aF[aC].name,aF[aC].ratio,aF[aC].id,aF[aC].index);aK=aJ.levelColor?aJ.levelColor(aF[aC].value):aB(aF[aC].id);aI+="<tr class='"+D.tooltipName+"-"+aF[aC].id+"'>";aI+="<td class='name'><span style='background-color:"+aK+"'></span>"+aw+"</td>";aI+="<td class='value'>"+aH+"</td>";aI+="</tr>"}}return aI+"</table>"};F.tooltipPosition=function(ax,aE,aG,aD){var aI=this,az=aI.config,aJ=aI.d3;var aB,aH,ay,aC,aA;var aw=aI.hasArcType(),aF=aJ.mouse(aD);if(aw){aH=((aI.width-(aI.isLegendRight?aI.getLegendWidth():0))/2)+aF[0];aC=(aI.height/2)+aF[1]+20}else{aB=aI.getSvgLeft(true);if(az.axis_rotated){aH=aB+aF[0]+100;ay=aH+aE;aA=aI.currentWidth-aI.getCurrentPaddingRight();aC=aI.x(ax[0].x)+20}else{aH=aB+aI.getCurrentPaddingLeft(true)+aI.x(ax[0].x)+20;ay=aH+aE;aA=aB+aI.currentWidth-aI.getCurrentPaddingRight();aC=aF[1]+15}if(ay>aA){aH-=ay-aA+20}if(aC+aG>aI.currentHeight){aC-=aG+30}}if(aC<0){aC=0}return{top:aC,left:aH}};F.showTooltip=function(aD,aA){var aF=this,az=aF.config;var aB,aE,aC;var ax=aF.hasArcType(),aw=aD.filter(function(aG){return aG&&i(aG.value)}),ay=az.tooltip_position||F.tooltipPosition;if(aw.length===0||!az.tooltip_show){return}aF.tooltip.html(az.tooltip_contents.call(aF,aD,aF.axis.getXAxisTickFormat(),aF.getYFormat(ax),aF.color)).style("display","block");aB=aF.tooltip.property("offsetWidth");aE=aF.tooltip.property("offsetHeight");aC=ay.call(this,aw,aB,aE,aA);aF.tooltip.style("top",aC.top+"px").style("left",aC.left+"px")};F.hideTooltip=function(){this.tooltip.style("display","none")};F.initLegend=function(){var aw=this;aw.legendItemTextBox={};aw.legendHasRendered=false;aw.legend=aw.svg.append("g").attr("transform",aw.getTranslate("legend"));if(!aw.config.legend_show){aw.legend.style("visibility","hidden");aw.hiddenLegendIds=aw.mapToIds(aw.data.targets);return}aw.updateLegendWithDefaults()};F.updateLegendWithDefaults=function(){var aw=this;aw.updateLegend(aw.mapToIds(aw.data.targets),{withTransform:false,withTransitionForTransform:false,withTransition:false})};F.updateSizeForLegend=function(ax,az){var aw=this,ay=aw.config,aA={top:aw.isLegendTop?aw.getCurrentPaddingTop()+ay.legend_inset_y+5.5:aw.currentHeight-ax-aw.getCurrentPaddingBottom()-ay.legend_inset_y,left:aw.isLegendLeft?aw.getCurrentPaddingLeft()+ay.legend_inset_x+0.5:aw.currentWidth-az-aw.getCurrentPaddingRight()-ay.legend_inset_x+0.5};aw.margin3={top:aw.isLegendRight?0:aw.isLegendInset?aA.top:aw.currentHeight-ax,right:NaN,bottom:0,left:aw.isLegendRight?aw.currentWidth-az:aw.isLegendInset?aA.left:0}};F.transformLegend=function(ax){var aw=this;(ax?aw.legend.transition():aw.legend).attr("transform",aw.getTranslate("legend"))};F.updateLegendStep=function(aw){this.legendStep=aw};F.updateLegendItemWidth=function(aw){this.legendItemWidth=aw};F.updateLegendItemHeight=function(aw){this.legendItemHeight=aw};F.getLegendWidth=function(){var aw=this;return aw.config.legend_show?aw.isLegendRight||aw.isLegendInset?aw.legendItemWidth*(aw.legendStep+1):aw.currentWidth:0};F.getLegendHeight=function(){var aw=this,ax=0;if(aw.config.legend_show){if(aw.isLegendRight){ax=aw.currentHeight}else{ax=Math.max(20,aw.legendItemHeight)*(aw.legendStep+1)}}return ax};F.opacityForLegend=function(aw){return aw.classed(D.legendItemHidden)?null:1};F.opacityForUnfocusedLegend=function(aw){return aw.classed(D.legendItemHidden)?null:0.3};F.toggleFocusLegend=function(ax,aw){var ay=this;ax=ay.mapToTargetIds(ax);ay.legend.selectAll("."+D.legendItem).filter(function(az){return ax.indexOf(az)>=0}).classed(D.legendItemFocused,aw).transition().duration(100).style("opacity",function(){var az=aw?ay.opacityForLegend:ay.opacityForUnfocusedLegend;return az.call(ay,ay.d3.select(this))})};F.revertLegend=function(){var aw=this,ax=aw.d3;aw.legend.selectAll("."+D.legendItem).classed(D.legendItemFocused,false).transition().duration(100).style("opacity",function(){return aw.opacityForLegend(ax.select(this))})};F.showLegend=function(aw){var ax=this,ay=ax.config;if(!ay.legend_show){ay.legend_show=true;ax.legend.style("visibility","visible");if(!ax.legendHasRendered){ax.updateLegendWithDefaults()}}ax.removeHiddenLegendIds(aw);ax.legend.selectAll(ax.selectorLegends(aw)).style("visibility","visible").transition().style("opacity",function(){return ax.opacityForLegend(ax.d3.select(this))})};F.hideLegend=function(aw){var ax=this,ay=ax.config;if(ay.legend_show&&C(aw)){ay.legend_show=false;ax.legend.style("visibility","hidden")}ax.addHiddenLegendIds(aw);ax.legend.selectAll(ax.selectorLegends(aw)).style("opacity",0).style("visibility","hidden")};F.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}};F.updateLegend=function(aQ,aF,a2){var aM=this,a1=aM.config;var aY,aB,aR,aG,aP,aC;var aZ=4,ax=10,aX=0,aS=0,aJ=10,aw=15;var aT,aO=0,aH={},aK={},aW={},aA=[0],aV={},aI=0;var aN,az;var ay,aE,a0,aU;aF=aF||{};aN=u(aF,"withTransition",true);az=u(aF,"withTransitionForTransform",true);function aD(a3,a4){if(!aM.legendItemTextBox[a4]){aM.legendItemTextBox[a4]=aM.getTextRect(a3.textContent,D.legendItem)}return aM.legendItemTextBox[a4]}function aL(a6,a5,be){var bd=be===0,ba=be===aQ.length-1,bb=aD(a6,a5),bf=bb.width+aw+(ba&&!(aM.isLegendRight||aM.isLegendInset)?0:ax),a8=bb.height+aZ,bc=aM.isLegendRight||aM.isLegendInset?a8:bf,a3=aM.isLegendRight||aM.isLegendInset?aM.getLegendHeight():aM.getLegendWidth(),a9,a4;function a7(bh,bg){if(!bg){a9=(a3-aO-bc)/2;if(a9<aJ){a9=(a3-bc)/2;aO=0;aI++}}aV[bh]=aI;aA[aI]=aM.isLegendInset?10:a9;aH[bh]=aO;aO+=bc}if(bd){aO=0;aI=0;aX=0;aS=0}if(a1.legend_show&&!aM.isLegendToShow(a5)){aK[a5]=aW[a5]=aV[a5]=aH[a5]=0;return}aK[a5]=bf;aW[a5]=a8;if(!aX||bf>=aX){aX=bf}if(!aS||a8>=aS){aS=a8}a4=aM.isLegendRight||aM.isLegendInset?aS:aX;if(a1.legend_equally){Object.keys(aK).forEach(function(bg){aK[bg]=aX});Object.keys(aW).forEach(function(bg){aW[bg]=aS});a9=(a3-a4*aQ.length)/2;if(a9<aJ){aO=0;aI=0;aQ.forEach(function(bg){a7(bg)})}else{a7(a5,true)}}else{a7(a5)}}if(aM.isLegendInset){aI=a1.legend_inset_step?a1.legend_inset_step:aQ.length;aM.updateLegendStep(aI)}if(aM.isLegendRight){aY=function(a3){return aX*aV[a3]};aG=function(a3){return aA[aV[a3]]+aH[a3]}}else{if(aM.isLegendInset){aY=function(a3){return aX*aV[a3]+10};aG=function(a3){return aA[aV[a3]]+aH[a3]}}else{aY=function(a3){return aA[aV[a3]]+aH[a3]};aG=function(a3){return aS*aV[a3]}}}aB=function(a4,a3){return aY(a4,a3)+14};aP=function(a4,a3){return aG(a4,a3)+9};aR=function(a4,a3){return aY(a4,a3)};aC=function(a4,a3){return aG(a4,a3)-5};aT=aM.legend.selectAll("."+D.legendItem).data(aQ).enter().append("g").attr("class",function(a3){return aM.generateClass(D.legendItem,a3)}).style("visibility",function(a3){return aM.isLegendToShow(a3)?"visible":"hidden"}).style("cursor","pointer").on("click",function(a3){if(a1.legend_item_onclick){a1.legend_item_onclick.call(aM,a3)}else{if(aM.d3.event.altKey){aM.api.hide();aM.api.show(a3)}else{aM.api.toggle(a3);aM.isTargetToShow(a3)?aM.api.focus(a3):aM.api.revert()}}}).on("mouseover",function(a3){aM.d3.select(this).classed(D.legendItemFocused,true);if(!aM.transiting&&aM.isTargetToShow(a3)){aM.api.focus(a3)}if(a1.legend_item_onmouseover){a1.legend_item_onmouseover.call(aM,a3)}}).on("mouseout",function(a3){aM.d3.select(this).classed(D.legendItemFocused,false);aM.api.revert();if(a1.legend_item_onmouseout){a1.legend_item_onmouseout.call(aM,a3)}});aT.append("text").text(function(a3){return I(a1.data_names[a3])?a1.data_names[a3]:a3}).each(function(a4,a3){aL(this,a4,a3)}).style("pointer-events","none").attr("x",aM.isLegendRight||aM.isLegendInset?aB:-200).attr("y",aM.isLegendRight||aM.isLegendInset?-200:aP);aT.append("rect").attr("class",D.legendItemEvent).style("fill-opacity",0).attr("x",aM.isLegendRight||aM.isLegendInset?aR:-200).attr("y",aM.isLegendRight||aM.isLegendInset?-200:aC);aT.append("rect").attr("class",D.legendItemTile).style("pointer-events","none").style("fill",aM.color).attr("x",aM.isLegendRight||aM.isLegendInset?aB:-200).attr("y",aM.isLegendRight||aM.isLegendInset?-200:aG).attr("width",10).attr("height",10);aU=aM.legend.select("."+D.legendBackground+" rect");if(aM.isLegendInset&&aX>0&&aU.size()===0){aU=aM.legend.insert("g","."+D.legendItem).attr("class",D.legendBackground).append("rect")}ay=aM.legend.selectAll("text").data(aQ).text(function(a3){return I(a1.data_names[a3])?a1.data_names[a3]:a3}).each(function(a4,a3){aL(this,a4,a3)});(aN?ay.transition():ay).attr("x",aB).attr("y",aP);aE=aM.legend.selectAll("rect."+D.legendItemEvent).data(aQ);(aN?aE.transition():aE).attr("width",function(a3){return aK[a3]}).attr("height",function(a3){return aW[a3]}).attr("x",aR).attr("y",aC);a0=aM.legend.selectAll("rect."+D.legendItemTile).data(aQ);(aN?a0.transition():a0).style("fill",aM.color).attr("x",aY).attr("y",aG);if(aU){(aN?aU.transition():aU).attr("height",aM.getLegendHeight()-12).attr("width",aX*(aI+1)+10)}aM.legend.selectAll("."+D.legendItem).classed(D.legendItemHidden,function(a3){return !aM.isTargetToShow(a3)});aM.updateLegendItemWidth(aX);aM.updateLegendItemHeight(aS);aM.updateLegendStep(aI);aM.updateSizes();aM.updateScales();aM.updateSvgSize();aM.transformAll(az,a2);aM.legendHasRendered=true};function x(aw){U.call(this,aw)}z(U,x);x.prototype.init=function ai(){var ax=this.owner,ay=ax.config,aw=ax.main;ax.axes.x=aw.append("g").attr("class",D.axis+" "+D.axisX).attr("clip-path",ax.clipPathForXAxis).attr("transform",ax.getTranslate("x")).style("visibility",ay.axis_x_show?"visible":"hidden");ax.axes.x.append("text").attr("class",D.axisXLabel).attr("transform",ay.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this));ax.axes.y=aw.append("g").attr("class",D.axis+" "+D.axisY).attr("clip-path",ay.axis_y_inner?"":ax.clipPathForYAxis).attr("transform",ax.getTranslate("y")).style("visibility",ay.axis_y_show?"visible":"hidden");ax.axes.y.append("text").attr("class",D.axisYLabel).attr("transform",ay.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this));ax.axes.y2=aw.append("g").attr("class",D.axis+" "+D.axisY2).attr("transform",ax.getTranslate("y2")).style("visibility",ay.axis_y2_show?"visible":"hidden");ax.axes.y2.append("text").attr("class",D.axisY2Label).attr("transform",ay.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))};x.prototype.getXAxis=function G(az,aC,aA,aB,aw,aE,aD){var aG=this.owner,ax=aG.config,aF={isCategory:aG.isCategorized(),withOuterTick:aw,tickMultiline:ax.axis_x_tick_multiline,tickWidth:ax.axis_x_tick_width,tickTextRotate:aD?0:ax.axis_x_tick_rotate,withoutTransition:aE,},ay=d(aG.d3,aF).scale(az).orient(aC);if(aG.isTimeSeries()&&aB){aB=aB.map(function(aH){return aG.parseDate(aH)})}ay.tickFormat(aA).tickValues(aB);if(aG.isCategorized()){ay.tickCentered(ax.axis_x_tick_centered);if(C(ax.axis_x_tick_culling)){ax.axis_x_tick_culling=false}}return ay};x.prototype.updateXAxisTickValues=function H(aw,aA){var ay=this.owner,az=ay.config,ax;if(az.axis_x_tick_fit||az.axis_x_tick_count){ax=this.generateTickValues(ay.mapTargetsToUniqueXs(aw),az.axis_x_tick_count,ay.isTimeSeries())}if(aA){aA.tickValues(ax)}else{ay.xAxis.tickValues(ax);ay.subXAxis.tickValues(ax)}return ax};x.prototype.getYAxis=function h(az,aC,aA,aB,aw,aD){var aE={withOuterTick:aw,withoutTransition:aD,},aF=this.owner,aG=aF.d3,ax=aF.config,ay=d(aG,aE).scale(az).orient(aC).tickFormat(aA);if(aF.isTimeSeriesY()){ay.ticks(aG.time[ax.axis_y_tick_time_value],ax.axis_y_tick_time_interval)}else{ay.tickValues(aB)}return ay};x.prototype.getId=function aq(ax){var aw=this.owner.config;return ax in aw.data_axes?aw.data_axes[ax]:"y"};x.prototype.getXAxisTickFormat=function P(){var aw=this.owner,ax=aw.config,ay=aw.isTimeSeries()?aw.defaultAxisTimeFormat:aw.isCategorized()?aw.categoryName:function(az){return az<0?az.toFixed(0):az};if(ax.axis_x_tick_format){if(y(ax.axis_x_tick_format)){ay=ax.axis_x_tick_format}else{if(aw.isTimeSeries()){ay=function(az){return az?aw.axisTimeFormat(ax.axis_x_tick_format)(az):""}}}}return y(ay)?function(az){return ay.call(aw,az)}:ay};x.prototype.getTickValues=function am(aw,ax){return aw?aw:ax?ax.tickValues():undefined};x.prototype.getXAxisTickValues=function av(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)};x.prototype.getYAxisTickValues=function S(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)};x.prototype.getY2AxisTickValues=function n(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)};x.prototype.getLabelOptionByAxisId=function M(az){var aw=this.owner,ax=aw.config,ay;if(az==="y"){ay=ax.axis_y_label}else{if(az==="y2"){ay=ax.axis_y2_label}else{if(az==="x"){ay=ax.axis_x_label}}}return ay};x.prototype.getLabelText=function ah(ax){var aw=this.getLabelOptionByAxisId(ax);return r(aw)?aw:aw?aw.text:null};x.prototype.setLabelText=function A(az,aA){var aw=this.owner,ax=aw.config,ay=this.getLabelOptionByAxisId(az);if(r(ay)){if(az==="y"){ax.axis_y_label=aA}else{if(az==="y2"){ax.axis_y2_label=aA}else{if(az==="x"){ax.axis_x_label=aA}}}}else{if(ay){ay.text=aA}}};x.prototype.getLabelPosition=function al(az,ax){var ay=this.getLabelOptionByAxisId(az),aw=(ay&&typeof ay==="object"&&ay.position)?ay.position:ax;return{isInner:aw.indexOf("inner")>=0,isOuter:aw.indexOf("outer")>=0,isLeft:aw.indexOf("left")>=0,isCenter:aw.indexOf("center")>=0,isRight:aw.indexOf("right")>=0,isTop:aw.indexOf("top")>=0,isMiddle:aw.indexOf("middle")>=0,isBottom:aw.indexOf("bottom")>=0}};x.prototype.getXAxisLabelPosition=function l(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")};x.prototype.getYAxisLabelPosition=function Q(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")};x.prototype.getY2AxisLabelPosition=function ag(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")};x.prototype.getLabelPositionById=function au(aw){return aw==="y2"?this.getY2AxisLabelPosition():aw==="y"?this.getYAxisLabelPosition():this.getXAxisLabelPosition()};x.prototype.textForXAxisLabel=function ab(){return this.getLabelText("x")};x.prototype.textForYAxisLabel=function ao(){return this.getLabelText("y")};x.prototype.textForY2AxisLabel=function J(){return this.getLabelText("y2")};x.prototype.xForAxisLabel=function s(ax,aw){var ay=this.owner;if(ax){return aw.isLeft?0:aw.isCenter?ay.width/2:ay.width}else{return aw.isBottom?-ay.height:aw.isMiddle?-ay.height/2:0}};x.prototype.dxForAxisLabel=function o(ax,aw){if(ax){return aw.isLeft?"0.5em":aw.isRight?"-0.5em":"0"}else{return aw.isTop?"-0.5em":aw.isBottom?"0.5em":"0"}};x.prototype.textAnchorForAxisLabel=function V(ax,aw){if(ax){return aw.isLeft?"start":aw.isCenter?"middle":"end"}else{return aw.isBottom?"start":aw.isMiddle?"middle":"end"}};x.prototype.xForXAxisLabel=function ac(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};x.prototype.xForYAxisLabel=function an(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};x.prototype.xForY2AxisLabel=function q(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};x.prototype.dxForXAxisLabel=function ak(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};x.prototype.dxForYAxisLabel=function f(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};x.prototype.dxForY2AxisLabel=function v(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};x.prototype.dyForXAxisLabel=function X(){var ax=this.owner,ay=ax.config,aw=this.getXAxisLabelPosition();if(ay.axis_rotated){return aw.isInner?"1.2em":-25-this.getMaxTickWidth("x")}else{return aw.isInner?"-0.5em":ay.axis_x_height?ay.axis_x_height-10:"3em"}};x.prototype.dyForYAxisLabel=function af(){var ax=this.owner,aw=this.getYAxisLabelPosition();if(ax.config.axis_rotated){return aw.isInner?"-0.5em":"3em"}else{return aw.isInner?"1.2em":-10-(ax.config.axis_y_inner?0:(this.getMaxTickWidth("y")+10))}};x.prototype.dyForY2AxisLabel=function aj(){var ax=this.owner,aw=this.getY2AxisLabelPosition();if(ax.config.axis_rotated){return aw.isInner?"1.2em":"-2.2em"}else{return aw.isInner?"-0.5em":15+(ax.config.axis_y2_inner?0:(this.getMaxTickWidth("y2")+15))}};x.prototype.textAnchorForXAxisLabel=function K(){var aw=this.owner;return this.textAnchorForAxisLabel(!aw.config.axis_rotated,this.getXAxisLabelPosition())};x.prototype.textAnchorForYAxisLabel=function aa(){var aw=this.owner;return this.textAnchorForAxisLabel(aw.config.axis_rotated,this.getYAxisLabelPosition())};x.prototype.textAnchorForY2AxisLabel=function k(){var aw=this.owner;return this.textAnchorForAxisLabel(aw.config.axis_rotated,this.getY2AxisLabelPosition())};x.prototype.getMaxTickWidth=function at(ax,aD){var aF=this.owner,ay=aF.config,aE=0,aw,aB,az,aA,aC;if(aD&&aF.currentMaxTickWidths[ax]){return aF.currentMaxTickWidths[ax]}if(aF.svg){aw=aF.filterTargetsToShow(aF.data.targets);if(ax==="y"){aB=aF.y.copy().domain(aF.getYDomain(aw,"y"));az=this.getYAxis(aB,aF.yOrient,ay.axis_y_tick_format,aF.yAxisTickValues,false,true)}else{if(ax==="y2"){aB=aF.y2.copy().domain(aF.getYDomain(aw,"y2"));az=this.getYAxis(aB,aF.y2Orient,ay.axis_y2_tick_format,aF.y2AxisTickValues,false,true)}else{aB=aF.x.copy().domain(aF.getXDomain(aw));az=this.getXAxis(aB,aF.xOrient,aF.xAxisTickFormat,aF.xAxisTickValues,false,true,true);this.updateXAxisTickValues(aw,az)}}aA=aF.d3.select("body").append("div").classed("c3",true);aC=aA.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),aC.append("g").call(az).each(function(){aF.d3.select(this).selectAll("text").each(function(){var aG=this.getBoundingClientRect();if(aE<aG.width){aE=aG.width}});aA.remove()})}aF.currentMaxTickWidths[ax]=aE<=0?aF.currentMaxTickWidths[ax]:aE;return aF.currentMaxTickWidths[ax]};x.prototype.updateLabels=function g(ay){var ax=this.owner;var aA=ax.main.select("."+D.axisX+" ."+D.axisXLabel),az=ax.main.select("."+D.axisY+" ."+D.axisYLabel),aw=ax.main.select("."+D.axisY2+" ."+D.axisY2Label);(ay?aA.transition():aA).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this));(ay?az.transition():az).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this));(ay?aw.transition():aw).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))};x.prototype.getPadding=function w(az,ay,aw,ax){if(!i(az[ay])){return aw}if(az.unit==="ratio"){return az[ay]*ax}return this.convertPixelsToAxisPadding(az[ay],ax)};x.prototype.convertPixelsToAxisPadding=function Y(az,ax){var aw=this.owner,ay=aw.config.axis_rotated?aw.width:aw.height;return ax*(az/ay)};x.prototype.generateTickValues=function T(aG,aw,aA){var aC=aG,az,ax,aD,aF,ay,aE,aB;if(aw){az=y(aw)?aw():aw;if(az===1){aC=[aG[0]]}else{if(az===2){aC=[aG[0],aG[aG.length-1]]}else{if(az>2){aF=az-2;ax=aG[0];aD=aG[aG.length-1];ay=(aD-ax)/(aF+1);aC=[ax];for(aE=0;aE<aF;aE++){aB=+ax+ay*(aE+1);aC.push(aA?new Date(aB):aB)}aC.push(aD)}}}}if(!aA){aC=aC.sort(function(aI,aH){return aI-aH})}return aC};x.prototype.generateTransitions=function ae(ay){var aw=this.owner,ax=aw.axes;return{axisX:ay?ax.x.transition().duration(ay):ax.x,axisY:ay?ax.y.transition().duration(ay):ax.y,axisY2:ay?ax.y2.transition().duration(ay):ax.y2,axisSubX:ay?ax.subx.transition().duration(ay):ax.subx}};x.prototype.redraw=function j(ay,ax){var aw=this.owner;aw.axes.x.style("opacity",ax?0:1);aw.axes.y.style("opacity",ax?0:1);aw.axes.y2.style("opacity",ax?0:1);aw.axes.subx.style("opacity",ax?0:1);ay.axisX.call(aw.xAxis);ay.axisY.call(aw.yAxis);ay.axisY2.call(aw.y2Axis);ay.axisSubX.call(aw.subXAxis)};F.getClipPath=function(ax){var aw=ad.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(aw?"":document.URL.split("#")[0])+"#"+ax+")"};F.appendClip=function(aw,ax){return aw.append("clipPath").attr("id",ax).append("rect")};F.getAxisClipX=function(aw){var ax=Math.max(30,this.margin.left);return aw?-(1+ax):-(ax-1)};F.getAxisClipY=function(aw){return aw?-20:-this.margin.top};F.getXAxisClipX=function(){var aw=this;return aw.getAxisClipX(!aw.config.axis_rotated)};F.getXAxisClipY=function(){var aw=this;return aw.getAxisClipY(!aw.config.axis_rotated)};F.getYAxisClipX=function(){var aw=this;return aw.config.axis_y_inner?-1:aw.getAxisClipX(aw.config.axis_rotated)};F.getYAxisClipY=function(){var aw=this;return aw.getAxisClipY(aw.config.axis_rotated)};F.getAxisClipWidth=function(aw){var ax=this,az=Math.max(30,ax.margin.left),ay=Math.max(30,ax.margin.right);return aw?ax.width+2+az+ay:ax.margin.left+20};F.getAxisClipHeight=function(aw){return(aw?this.margin.bottom:(this.margin.top+this.height))+20};F.getXAxisClipWidth=function(){var aw=this;return aw.getAxisClipWidth(!aw.config.axis_rotated)};F.getXAxisClipHeight=function(){var aw=this;return aw.getAxisClipHeight(!aw.config.axis_rotated)};F.getYAxisClipWidth=function(){var aw=this;return aw.getAxisClipWidth(aw.config.axis_rotated)+(aw.config.axis_y_inner?20:0)};F.getYAxisClipHeight=function(){var aw=this;return aw.getAxisClipHeight(aw.config.axis_rotated)};F.initPie=function(){var aw=this,ay=aw.d3,ax=aw.config;aw.pie=ay.layout.pie().value(function(az){return az.values.reduce(function(aB,aA){return aB+aA.value},0)});if(!ax.data_order){aw.pie.sort(null)}};F.updateRadius=function(){var ax=this,ay=ax.config,aw=ay.gauge_width||ay.donut_width;ax.radiusExpanded=Math.min(ax.arcWidth,ax.arcHeight)/2;ax.radius=ax.radiusExpanded*0.95;ax.innerRadiusRatio=aw?(ax.radius-aw)/ax.radius:0.6;ax.innerRadius=ax.hasType("donut")||ax.hasType("gauge")?ax.radius*ax.innerRadiusRatio:0};F.updateArc=function(){var aw=this;aw.svgArc=aw.getSvgArc();aw.svgArcExpanded=aw.getSvgArcExpanded();aw.svgArcExpandedSub=aw.getSvgArcExpanded(0.98)};F.updateAngle=function(aB){var aD=this,ax=aD.config,aE=false,aA=0,ay=ax.gauge_min,aC=ax.gauge_max,az,aw;aD.pie(aD.filterTargetsToShow(aD.data.targets)).forEach(function(aF){if(!aE&&aF.data.id===aB.data.id){aE=true;aB=aF;aB.index=aA}aA++});if(isNaN(aB.startAngle)){aB.startAngle=0}if(isNaN(aB.endAngle)){aB.endAngle=aB.startAngle}if(aD.isGaugeType(aB.data)){az=(Math.PI)/(aC-ay);aw=aB.value<ay?0:aB.value<aC?aB.value-ay:(aC-ay);aB.startAngle=-1*(Math.PI/2);aB.endAngle=aB.startAngle+az*aw}return aE?aB:null};F.getSvgArc=function(){var aw=this,ax=aw.d3.svg.arc().outerRadius(aw.radius).innerRadius(aw.innerRadius),ay=function(aB,aA){var az;if(aA){return ax(aB)}az=aw.updateAngle(aB);return az?ax(az):"M 0 0"};ay.centroid=ax.centroid;return ay};F.getSvgArcExpanded=function(ay){var aw=this,ax=aw.d3.svg.arc().outerRadius(aw.radiusExpanded*(ay?ay:1)).innerRadius(aw.innerRadius);return function(aA){var az=aw.updateAngle(aA);return az?ax(az):"M 0 0"}};F.getArc=function(ay,ax,aw){return aw||this.isArcType(ay.data)?this.svgArc(ay,ax):"M 0 0"};F.transformForArcLabel=function(az){var aE=this,ay=aE.updateAngle(az),aB,aD,aC,ax,aA,aw="";if(ay&&!aE.hasType("gauge")){aB=this.svgArc.centroid(ay);aD=isNaN(aB[0])?0:aB[0];aC=isNaN(aB[1])?0:aB[1];ax=Math.sqrt(aD*aD+aC*aC);aA=aE.radius&&ax?(36/aE.radius>0.375?1.175-36/aE.radius:0.8)*aE.radius/ax:0;aw="translate("+(aD*aA)+","+(aC*aA)+")"}return aw};F.getArcRatio=function(ay){var aw=this,ax=aw.hasType("gauge")?Math.PI:(Math.PI*2);return ay?(ay.endAngle-ay.startAngle)/ax:null};F.convertToArcData=function(aw){return this.addName({id:aw.data.id,value:aw.value,ratio:this.getArcRatio(aw),index:aw.index})};F.textForArcLabel=function(aB){var ax=this,aw,az,ay,aC,aA;if(!ax.shouldShowArcLabel()){return""}aw=ax.updateAngle(aB);az=aw?aw.value:null;ay=ax.getArcRatio(aw);aC=aB.data.id;if(!ax.hasType("gauge")&&!ax.meetsArcLabelThreshold(ay)){return""}aA=ax.getArcLabelFormat();return aA?aA(az,ay,aC):ax.defaultArcValueFormat(az,ay)};F.expandArc=function(aw){var ay=this,ax;if(ay.transiting){ax=ad.setInterval(function(){if(!ay.transiting){ad.clearInterval(ax);if(ay.legend.selectAll(".c3-legend-item-focused").size()>0){ay.expandArc(aw)}}},10);return}aw=ay.mapToTargetIds(aw);ay.svg.selectAll(ay.selectorTargets(aw,"."+D.chartArc)).each(function(az){if(!ay.shouldExpand(az.data.id)){return}ay.d3.select(this).selectAll("path").transition().duration(50).attr("d",ay.svgArcExpanded).transition().duration(100).attr("d",ay.svgArcExpandedSub).each(function(aA){if(ay.isDonutType(aA.data)){}})})};F.unexpandArc=function(aw){var ax=this;if(ax.transiting){return}aw=ax.mapToTargetIds(aw);ax.svg.selectAll(ax.selectorTargets(aw,"."+D.chartArc)).selectAll("path").transition().duration(50).attr("d",ax.svgArc);ax.svg.selectAll("."+D.arc).style("opacity",1)};F.shouldExpand=function(ay){var aw=this,ax=aw.config;return(aw.isDonutType(ay)&&ax.donut_expand)||(aw.isGaugeType(ay)&&ax.gauge_expand)||(aw.isPieType(ay)&&ax.pie_expand)};F.shouldShowArcLabel=function(){var ax=this,ay=ax.config,aw=true;if(ax.hasType("donut")){aw=ay.donut_label_show}else{if(ax.hasType("pie")){aw=ay.pie_label_show}}return aw};F.meetsArcLabelThreshold=function(az){var ax=this,ay=ax.config,aw=ax.hasType("donut")?ay.donut_label_threshold:ay.pie_label_threshold;return az>=aw};F.getArcLabelFormat=function(){var aw=this,ax=aw.config,ay=ax.pie_label_format;if(aw.hasType("gauge")){ay=ax.gauge_label_format}else{if(aw.hasType("donut")){ay=ax.donut_label_format}}return ay};F.getArcTitle=function(){var aw=this;return aw.hasType("donut")?aw.config.donut_title:""};F.updateTargetsForArc=function(az){var aB=this,ax=aB.main,aw,aC,ay=aB.classChartArc.bind(aB),aD=aB.classArcs.bind(aB),aA=aB.classFocus.bind(aB);aw=ax.select("."+D.chartArcs).selectAll("."+D.chartArc).data(aB.pie(az)).attr("class",function(aE){return ay(aE)+aA(aE.data)});aC=aw.enter().append("g").attr("class",ay);aC.append("g").attr("class",aD);aC.append("text").attr("dy",aB.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")};F.initArc=function(){var aw=this;aw.arcs=aw.main.select("."+D.chart).append("g").attr("class",D.chartArcs).attr("transform",aw.getTranslate("arc"));aw.arcs.append("text").attr("class",D.chartArcsTitle).style("text-anchor","middle").text(aw.getArcTitle())};F.redrawArc=function(aC,aD,ax){var ay=this,aA=ay.d3,az=ay.config,aw=ay.main,aB;aB=aw.selectAll("."+D.arcs).selectAll("."+D.arc).data(ay.arcData.bind(ay));aB.enter().append("path").attr("class",ay.classArc.bind(ay)).style("fill",function(aE){return ay.color(aE.data)}).style("cursor",function(aE){return az.interaction_enabled&&az.data_selection_isselectable(aE)?"pointer":null}).style("opacity",0).each(function(aE){if(ay.isGaugeType(aE.data)){aE.startAngle=aE.endAngle=-1*(Math.PI/2)}this._current=aE});aB.attr("transform",function(aE){return !ay.isGaugeType(aE.data)&&ax?"scale(0)":""}).style("opacity",function(aE){return aE===this._current?0:1}).on("mouseover",az.interaction_enabled?function(aG){var aF,aE;if(ay.transiting){return}aF=ay.updateAngle(aG);aE=ay.convertToArcData(aF);ay.expandArc(aF.data.id);ay.api.focus(aF.data.id);ay.toggleFocusLegend(aF.data.id,true);ay.config.data_onmouseover(aE,this)}:null).on("mousemove",az.interaction_enabled?function(aH){var aF=ay.updateAngle(aH),aE=ay.convertToArcData(aF),aG=[aE];ay.showTooltip(aG,this)}:null).on("mouseout",az.interaction_enabled?function(aG){var aF,aE;if(ay.transiting){return}aF=ay.updateAngle(aG);aE=ay.convertToArcData(aF);ay.unexpandArc(aF.data.id);ay.api.revert();ay.revertLegend();ay.hideTooltip();ay.config.data_onmouseout(aE,this)}:null).on("click",az.interaction_enabled?function(aH,aG){var aF=ay.updateAngle(aH),aE=ay.convertToArcData(aF);if(ay.toggleShape){ay.toggleShape(this,aE,aG)}ay.config.data_onclick.call(ay.api,aE,this)}:null).each(function(){ay.transiting=true}).transition().duration(aC).attrTween("d",function(aG){var aE=ay.updateAngle(aG),aF;if(!aE){return function(){return"M 0 0"}}if(isNaN(this._current.startAngle)){this._current.startAngle=0}if(isNaN(this._current.endAngle)){this._current.endAngle=this._current.startAngle}aF=aA.interpolate(this._current,aE);this._current=aF(0);return function(aI){var aH=aF(aI);aH.data=aG.data;return ay.getArc(aH,true)}}).attr("transform",ax?"scale(1)":"").style("fill",function(aE){return ay.levelColor?ay.levelColor(aE.data.values[0].value):ay.color(aE.data.id)}).style("opacity",1).call(ay.endall,function(){ay.transiting=false});aB.exit().transition().duration(aD).style("opacity",0).remove();aw.selectAll("."+D.chartArc).select("text").style("opacity",0).attr("class",function(aE){return ay.isGaugeType(aE.data)?D.gaugeValue:""}).text(ay.textForArcLabel.bind(ay)).attr("transform",ay.transformForArcLabel.bind(ay)).style("font-size",function(aE){return ay.isGaugeType(aE.data)?Math.round(ay.radius/5)+"px":""}).transition().duration(aC).style("opacity",function(aE){return ay.isTargetToShow(aE.data.id)&&ay.isArcType(aE.data)?1:0});aw.select("."+D.chartArcsTitle).style("opacity",ay.hasType("donut")||ay.hasType("gauge")?1:0);if(ay.hasType("gauge")){ay.arcs.select("."+D.chartArcsBackground).attr("d",function(){var aE={data:[{value:az.gauge_max}],startAngle:-1*(Math.PI/2),endAngle:Math.PI/2};return ay.getArc(aE,true,true)});ay.arcs.select("."+D.chartArcsGaugeUnit).attr("dy",".75em").text(az.gauge_label_show?az.gauge_units:"");ay.arcs.select("."+D.chartArcsGaugeMin).attr("dx",-1*(ay.innerRadius+((ay.radius-ay.innerRadius)/2))+"px").attr("dy","1.2em").text(az.gauge_label_show?az.gauge_min:"");ay.arcs.select("."+D.chartArcsGaugeMax).attr("dx",ay.innerRadius+((ay.radius-ay.innerRadius)/2)+"px").attr("dy","1.2em").text(az.gauge_label_show?az.gauge_max:"")}};F.initGauge=function(){var aw=this.arcs;if(this.hasType("gauge")){aw.append("path").attr("class",D.chartArcsBackground);aw.append("text").attr("class",D.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none");aw.append("text").attr("class",D.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none");aw.append("text").attr("class",D.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none")}};F.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0};F.initRegion=function(){var aw=this;aw.region=aw.main.append("g").attr("clip-path",aw.clipPath).attr("class",D.regions)};F.updateRegion=function(ay){var aw=this,ax=aw.config;aw.region.style("visibility",aw.hasArcType()?"hidden":"visible");aw.mainRegion=aw.main.select("."+D.regions).selectAll("."+D.region).data(ax.regions);aw.mainRegion.enter().append("g").attr("class",aw.classRegion.bind(aw)).append("rect").style("fill-opacity",0);aw.mainRegion.exit().transition().duration(ay).style("opacity",0).remove()};F.redrawRegion=function(az){var ay=this,aC=ay.mainRegion.selectAll("rect"),aw=ay.regionX.bind(ay),aB=ay.regionY.bind(ay),ax=ay.regionWidth.bind(ay),aA=ay.regionHeight.bind(ay);return[(az?aC.transition():aC).attr("x",aw).attr("y",aB).attr("width",ax).attr("height",aA).style("fill-opacity",function(aD){return i(aD.opacity)?aD.opacity:0.1})]};F.regionX=function(aA){var aw=this,ax=aw.config,az,ay=aA.axis==="y"?aw.y:aw.y2;if(aA.axis==="y"||aA.axis==="y2"){az=ax.axis_rotated?("start" in aA?ay(aA.start):0):0}else{az=ax.axis_rotated?0:("start" in aA?aw.x(aw.isTimeSeries()?aw.parseDate(aA.start):aA.start):0)}return az};F.regionY=function(aA){var aw=this,ax=aw.config,az,ay=aA.axis==="y"?aw.y:aw.y2;if(aA.axis==="y"||aA.axis==="y2"){az=ax.axis_rotated?0:("end" in aA?ay(aA.end):0)}else{az=ax.axis_rotated?("start" in aA?aw.x(aw.isTimeSeries()?aw.parseDate(aA.start):aA.start):0):0}return az};F.regionWidth=function(aA){var ax=this,ay=ax.config,aB=ax.regionX(aA),aw,az=aA.axis==="y"?ax.y:ax.y2;if(aA.axis==="y"||aA.axis==="y2"){aw=ay.axis_rotated?("end" in aA?az(aA.end):ax.width):ax.width}else{aw=ay.axis_rotated?ax.width:("end" in aA?ax.x(ax.isTimeSeries()?ax.parseDate(aA.end):aA.end):ax.width)}return aw<aB?0:aw-aB};F.regionHeight=function(aA){var ax=this,ay=ax.config,aB=this.regionY(aA),aw,az=aA.axis==="y"?ax.y:ax.y2;if(aA.axis==="y"||aA.axis==="y2"){aw=ay.axis_rotated?ax.height:("start" in aA?az(aA.start):ax.height)}else{aw=ay.axis_rotated?("end" in aA?ax.x(ax.isTimeSeries()?ax.parseDate(aA.end):aA.end):ax.height):ax.height}return aw<aB?0:aw-aB};F.isRegionOnX=function(aw){return !aw.axis||aw.axis==="x"};F.drag=function(aC){var aH=this,ay=aH.config,aB=aH.main,aI=aH.d3;var aE,aD,aG,aF,aA,ax,az,aw;if(aH.hasArcType()){return}if(!ay.data_selection_enabled){return}if(ay.zoom_enabled&&!aH.zoom.altDomain){return}if(!ay.data_selection_multiple){return}aE=aH.dragStart[0];aD=aH.dragStart[1];aG=aC[0];aF=aC[1];aA=Math.min(aE,aG);ax=Math.max(aE,aG);az=(ay.data_selection_grouped)?aH.margin.top:Math.min(aD,aF);aw=(ay.data_selection_grouped)?aH.height:Math.max(aD,aF);aB.select("."+D.dragarea).attr("x",aA).attr("y",az).attr("width",ax-aA).attr("height",aw-az);aB.selectAll("."+D.shapes).selectAll("."+D.shape).filter(function(aJ){return ay.data_selection_isselectable(aJ)}).each(function(aQ,aM){var aP=aI.select(this),aK=aP.classed(D.SELECTED),aJ=aP.classed(D.INCLUDED),aS,aR,aT,aL,aO,aU=false,aN;if(aP.classed(D.circle)){aS=aP.attr("cx")*1;aR=aP.attr("cy")*1;aO=aH.togglePoint;aU=aA<aS&&aS<ax&&az<aR&&aR<aw}else{if(aP.classed(D.bar)){aN=R(this);aS=aN.x;aR=aN.y;aT=aN.width;aL=aN.height;aO=aH.togglePath;aU=!(ax<aS||aS+aT<aA)&&!(aw<aR||aR+aL<az)}else{return}}if(aU^aJ){aP.classed(D.INCLUDED,!aJ);aP.classed(D.SELECTED,!aK);aO.call(aH,!aK,aP,aQ,aM)}})};F.dragstart=function(ay){var aw=this,ax=aw.config;if(aw.hasArcType()){return}if(!ax.data_selection_enabled){return}aw.dragStart=ay;aw.main.select("."+D.chart).append("rect").attr("class",D.dragarea).style("opacity",0.1);aw.dragging=true};F.dragend=function(){var aw=this,ax=aw.config;if(aw.hasArcType()){return}if(!ax.data_selection_enabled){return}aw.main.select("."+D.dragarea).transition().duration(100).style("opacity",0).remove();aw.main.selectAll("."+D.shape).classed(D.INCLUDED,false);aw.dragging=false};F.selectPoint=function(aB,aC,az){var ax=this,ay=ax.config,aw=(ay.axis_rotated?ax.circleY:ax.circleX).bind(ax),aD=(ay.axis_rotated?ax.circleX:ax.circleY).bind(ax),aA=ax.pointSelectR.bind(ax);ay.data_onselected.call(ax.api,aC,aB.node());ax.main.select("."+D.selectedCircles+ax.getTargetSelectorSuffix(aC.id)).selectAll("."+D.selectedCircle+"-"+az).data([aC]).enter().append("circle").attr("class",function(){return ax.generateClass(D.selectedCircle,az)}).attr("cx",aw).attr("cy",aD).attr("stroke",function(){return ax.color(aC)}).attr("r",function(aE){return ax.pointSelectR(aE)*1.4}).transition().duration(100).attr("r",aA)};F.unselectPoint=function(ay,az,ax){var aw=this;aw.config.data_onunselected(az,ay.node());aw.main.select("."+D.selectedCircles+aw.getTargetSelectorSuffix(az.id)).selectAll("."+D.selectedCircle+"-"+ax).transition().duration(100).attr("r",0).remove()};F.togglePoint=function(ax,ay,az,aw){ax?this.selectPoint(ay,az,aw):this.unselectPoint(ay,az,aw)};F.selectPath=function(ax,ay){var aw=this;aw.config.data_onselected.call(aw,ay,ax.node());ax.transition().duration(100).style("fill",function(){return aw.d3.rgb(aw.color(ay)).brighter(0.75)})};F.unselectPath=function(ax,ay){var aw=this;aw.config.data_onunselected.call(aw,ay,ax.node());ax.transition().duration(100).style("fill",function(){return aw.color(ay)})};F.togglePath=function(ax,ay,az,aw){ax?this.selectPath(ay,az,aw):this.unselectPath(ay,az,aw)};F.getToggle=function(ay,az){var ax=this,aw;if(ay.nodeName==="circle"){if(ax.isStepType(az)){aw=function(){}}else{aw=ax.togglePoint}}else{if(ay.nodeName==="path"){aw=ax.togglePath}}return aw};F.toggleShape=function(aA,aC,ay){var aD=this,aE=aD.d3,ax=aD.config,aB=aE.select(aA),aw=aB.classed(D.SELECTED),az=aD.getToggle(aA,aC).bind(aD);if(ax.data_selection_enabled&&ax.data_selection_isselectable(aC)){if(!ax.data_selection_multiple){aD.main.selectAll("."+D.shapes+(ax.data_selection_grouped?aD.getTargetSelectorSuffix(aC.id):"")).selectAll("."+D.shape).each(function(aH,aG){var aF=aE.select(this);if(aF.classed(D.SELECTED)){az(false,aF.classed(D.SELECTED,false),aH,aG)}})}aB.classed(D.SELECTED,!aw);az(!aw,aB,aC,ay)}};F.initBrush=function(){var aw=this,ax=aw.d3;aw.brush=ax.svg.brush().on("brush",function(){aw.redrawForBrush()});aw.brush.update=function(){if(aw.context){aw.context.select("."+D.brush).call(this)}return this};aw.brush.scale=function(ay){return aw.config.axis_rotated?this.y(ay):this.x(ay)}};F.initSubchart=function(){var aw=this,ax=aw.config,ay=aw.context=aw.svg.append("g").attr("transform",aw.getTranslate("context"));ay.style("visibility",ax.subchart_show?"visible":"hidden");ay.append("g").attr("clip-path",aw.clipPathForSubchart).attr("class",D.chart);ay.select("."+D.chart).append("g").attr("class",D.chartBars);ay.select("."+D.chart).append("g").attr("class",D.chartLines);ay.append("g").attr("clip-path",aw.clipPath).attr("class",D.brush).call(aw.brush);aw.axes.subx=ay.append("g").attr("class",D.axisX).attr("transform",aw.getTranslate("subx")).attr("clip-path",ax.axis_rotated?"":aw.clipPathForXAxis)};F.updateTargetsForSubchart=function(aF){var aI=this,ax=aI.context,ay=aI.config,aH,aE,aw,aC,aG=aI.classChartBar.bind(aI),aD=aI.classBars.bind(aI),aA=aI.classChartLine.bind(aI),az=aI.classLines.bind(aI),aB=aI.classAreas.bind(aI);if(ay.subchart_show){aC=ax.select("."+D.chartBars).selectAll("."+D.chartBar).data(aF).attr("class",aG);aw=aC.enter().append("g").style("opacity",0).attr("class",aG);aw.append("g").attr("class",aD);aE=ax.select("."+D.chartLines).selectAll("."+D.chartLine).data(aF).attr("class",aA);aH=aE.enter().append("g").style("opacity",0).attr("class",aA);aH.append("g").attr("class",az);aH.append("g").attr("class",aB);ax.selectAll("."+D.brush+" rect").attr(ay.axis_rotated?"width":"height",ay.axis_rotated?aI.width2:aI.height2)}};F.updateBarForSubchart=function(ax){var aw=this;aw.contextBar=aw.context.selectAll("."+D.bars).selectAll("."+D.bar).data(aw.barData.bind(aw));aw.contextBar.enter().append("path").attr("class",aw.classBar.bind(aw)).style("stroke","none").style("fill",aw.color);aw.contextBar.style("opacity",aw.initialOpacity.bind(aw));aw.contextBar.exit().transition().duration(ax).style("opacity",0).remove()};F.redrawBarForSubchart=function(ax,aw,ay){(aw?this.contextBar.transition().duration(ay):this.contextBar).attr("d",ax).style("opacity",1)};F.updateLineForSubchart=function(ax){var aw=this;aw.contextLine=aw.context.selectAll("."+D.lines).selectAll("."+D.line).data(aw.lineData.bind(aw));aw.contextLine.enter().append("path").attr("class",aw.classLine.bind(aw)).style("stroke",aw.color);aw.contextLine.style("opacity",aw.initialOpacity.bind(aw));aw.contextLine.exit().transition().duration(ax).style("opacity",0).remove()};F.redrawLineForSubchart=function(aw,ax,ay){(ax?this.contextLine.transition().duration(ay):this.contextLine).attr("d",aw).style("opacity",1)};F.updateAreaForSubchart=function(ay){var aw=this,ax=aw.d3;aw.contextArea=aw.context.selectAll("."+D.areas).selectAll("."+D.area).data(aw.lineData.bind(aw));aw.contextArea.enter().append("path").attr("class",aw.classArea.bind(aw)).style("fill",aw.color).style("opacity",function(){aw.orgAreaOpacity=+ax.select(this).style("opacity");return 0});aw.contextArea.style("opacity",0);aw.contextArea.exit().transition().duration(ay).style("opacity",0).remove()};F.redrawAreaForSubchart=function(ax,aw,ay){(aw?this.contextArea.transition().duration(ay):this.contextArea).attr("d",ax).style("fill",this.color).style("opacity",this.orgAreaOpacity)};F.redrawSubchart=function(aF,aE,aB,ax,aA,aC,aw){var aG=this,aI=aG.d3,az=aG.config,aD,ay,aH;aG.context.style("visibility",az.subchart_show?"visible":"hidden");if(az.subchart_show){if(aI.event&&aI.event.type==="zoom"){aG.brush.extent(aG.x.orgDomain()).update()}if(aF){if(!aG.brush.empty()){aG.brush.extent(aG.x.orgDomain()).update()}aD=aG.generateDrawArea(aA,true);ay=aG.generateDrawBar(aC,true);aH=aG.generateDrawLine(aw,true);aG.updateBarForSubchart(aB);aG.updateLineForSubchart(aB);aG.updateAreaForSubchart(aB);aG.redrawBarForSubchart(ay,aB,aB);aG.redrawLineForSubchart(aH,aB,aB);aG.redrawAreaForSubchart(aD,aB,aB)}}};F.redrawForBrush=function(){var ax=this,aw=ax.x;ax.redraw({withTransition:false,withY:ax.config.zoom_rescale,withSubchart:false,withUpdateXDomain:true,withDimension:false});ax.config.subchart_onbrush.call(ax.api,aw.orgDomain())};F.transformContext=function(ax,az){var aw=this,ay;if(az&&az.axisSubX){ay=az.axisSubX}else{ay=aw.context.select("."+D.axisX);if(ax){ay=ay.transition()}}aw.context.attr("transform",aw.getTranslate("context"));ay.attr("transform",aw.getTranslate("subx"))};F.getDefaultExtent=function(){var aw=this,ax=aw.config,ay=y(ax.axis_x_extent)?ax.axis_x_extent(aw.getXDomain(aw.data.targets)):ax.axis_x_extent;if(aw.isTimeSeries()){ay=[aw.parseDate(ay[0]),aw.parseDate(ay[1])]}return ay};F.initZoom=function(){var ax=this,az=ax.d3,ay=ax.config,aw;ax.zoom=az.behavior.zoom().on("zoomstart",function(){aw=az.event.sourceEvent;ax.zoom.altDomain=az.event.sourceEvent.altKey?ax.x.orgDomain():null;ay.zoom_onzoomstart.call(ax.api,az.event.sourceEvent)}).on("zoom",function(){ax.redrawForZoom.call(ax)}).on("zoomend",function(){var aA=az.event.sourceEvent;if(aA&&aw.clientX===aA.clientX&&aw.clientY===aA.clientY){return}ax.redrawEventRect();ax.updateZoom();ay.zoom_onzoomend.call(ax.api,ax.x.orgDomain())});ax.zoom.scale=function(aA){return ay.axis_rotated?this.y(aA):this.x(aA)};ax.zoom.orgScaleExtent=function(){var aA=ay.zoom_extent?ay.zoom_extent:[1,10];return[aA[0],Math.max(ax.getMaxDataCount()/aA[1],aA[1])]};ax.zoom.updateScaleExtent=function(){var aB=N(ax.x.orgDomain())/N(ax.orgXDomain),aA=this.orgScaleExtent();this.scaleExtent([aA[0]*aB,aA[1]*aB]);return this}};F.updateZoom=function(){var aw=this,ax=aw.config.zoom_enabled?aw.zoom:function(){};aw.main.select("."+D.zoomRect).call(ax).on("dblclick.zoom",null);aw.main.selectAll("."+D.eventRect).call(ax).on("dblclick.zoom",null)};F.redrawForZoom=function(){var ax=this,az=ax.d3,ay=ax.config,aA=ax.zoom,aw=ax.x;if(!ay.zoom_enabled){return}if(ax.filterTargetsToShow(ax.data.targets).length===0){return}if(az.event.sourceEvent.type==="mousemove"&&aA.altDomain){aw.domain(aA.altDomain);aA.scale(aw).updateScaleExtent();return}if(ax.isCategorized()&&aw.orgDomain()[0]===ax.orgXDomain[0]){aw.domain([ax.orgXDomain[0]-1e-10,aw.orgDomain()[1]])}ax.redraw({withTransition:false,withY:ay.zoom_rescale,withSubchart:false,withEventRect:false,withDimension:false});if(az.event.sourceEvent.type==="mousemove"){ax.cancelClick=true}ay.zoom_onzoom.call(ax.api,aw.orgDomain())};F.generateColor=function(){var ax=this,ay=ax.config,aA=ax.d3,aw=ay.data_colors,aB=L(ay.color_pattern)?ay.color_pattern:aA.scale.category10().range(),aC=ay.data_color,az=[];return function(aE){var aF=aE.id||(aE.data&&aE.data.id)||aE,aD;if(aw[aF] instanceof Function){aD=aw[aF](aE)}else{if(aw[aF]){aD=aw[aF]}else{if(az.indexOf(aF)<0){az.push(aF)}aD=aB[az.indexOf(aF)%aB.length];aw[aF]=aD}}return aC instanceof Function?aC(aD,aE):aD}};F.generateLevelColor=function(){var aA=this,aB=aA.config,ay=aB.color_pattern,ax=aB.color_threshold,aC=ax.unit==="value",az=ax.values&&ax.values.length?ax.values:[],aw=ax.max||100;return L(aB.color_threshold)?function(aG){var aF,aE,aD=ay[ay.length-1];for(aF=0;aF<az.length;aF++){aE=aC?aG:(aG*100/aw);if(aE<az[aF]){aD=ay[aF];break}}return aD}:null};F.getYFormat=function(ax){var aw=this,ay=ax&&!aw.hasType("gauge")?aw.defaultArcValueFormat:aw.yFormat,az=ax&&!aw.hasType("gauge")?aw.defaultArcValueFormat:aw.y2Format;return function(aA,aB,aD){var aC=aw.axis.getId(aD)==="y2"?az:ay;return aC.call(aw,aA,aB)}};F.yFormat=function(ax){var aw=this,ay=aw.config,az=ay.axis_y_tick_format?ay.axis_y_tick_format:aw.defaultValueFormat;return az(ax)};F.y2Format=function(ax){var aw=this,ay=aw.config,az=ay.axis_y2_tick_format?ay.axis_y2_tick_format:aw.defaultValueFormat;return az(ax)};F.defaultValueFormat=function(aw){return i(aw)?+aw:""};F.defaultArcValueFormat=function(aw,ax){return(ax*100).toFixed(1)+"%"};F.dataLabelFormat=function(ay){var aw=this,ax=aw.config.data_labels,aA,az=function(aB){return i(aB)?+aB:""};if(typeof ax.format==="function"){aA=ax.format}else{if(typeof ax.format==="object"){if(ax.format[ay]){aA=ax.format[ay]===true?az:ax.format[ay]}else{aA=function(){return""}}}else{aA=az}}return aA};F.hasCaches=function(ax){for(var aw=0;aw<ax.length;aw++){if(!(ax[aw] in this.cache)){return false}}return true};F.addCache=function(ax,aw){this.cache[ax]=this.cloneTarget(aw)};F.getCaches=function(ay){var aw=[],ax;for(ax=0;ax<ay.length;ax++){if(ay[ax] in this.cache){aw.push(this.cloneTarget(this.cache[ay[ax]]))}}return aw};var D=F.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};F.generateClass=function(ax,aw){return" "+ax+" "+ax+this.getTargetSelectorSuffix(aw)};F.classText=function(aw){return this.generateClass(D.text,aw.index)};F.classTexts=function(aw){return this.generateClass(D.texts,aw.id)};F.classShape=function(aw){return this.generateClass(D.shape,aw.index)};F.classShapes=function(aw){return this.generateClass(D.shapes,aw.id)};F.classLine=function(aw){return this.classShape(aw)+this.generateClass(D.line,aw.id)};F.classLines=function(aw){return this.classShapes(aw)+this.generateClass(D.lines,aw.id)};F.classCircle=function(aw){return this.classShape(aw)+this.generateClass(D.circle,aw.index)};F.classCircles=function(aw){return this.classShapes(aw)+this.generateClass(D.circles,aw.id)};F.classBar=function(aw){return this.classShape(aw)+this.generateClass(D.bar,aw.index)};F.classBars=function(aw){return this.classShapes(aw)+this.generateClass(D.bars,aw.id)};F.classArc=function(aw){return this.classShape(aw.data)+this.generateClass(D.arc,aw.data.id)};F.classArcs=function(aw){return this.classShapes(aw.data)+this.generateClass(D.arcs,aw.data.id)};F.classArea=function(aw){return this.classShape(aw)+this.generateClass(D.area,aw.id)};F.classAreas=function(aw){return this.classShapes(aw)+this.generateClass(D.areas,aw.id)};F.classRegion=function(ax,aw){return this.generateClass(D.region,aw)+" "+("class" in ax?ax["class"]:"")};F.classEvent=function(aw){return this.generateClass(D.eventRect,aw.index)};F.classTarget=function(az){var ax=this;var ay=ax.config.data_classes[az],aw="";if(ay){aw=" "+D.target+"-"+ay}return ax.generateClass(D.target,az)+aw};F.classFocus=function(aw){return this.classFocused(aw)+this.classDefocused(aw)};F.classFocused=function(aw){return" "+(this.focusedTargetIds.indexOf(aw.id)>=0?D.focused:"")};F.classDefocused=function(aw){return" "+(this.defocusedTargetIds.indexOf(aw.id)>=0?D.defocused:"")};F.classChartText=function(aw){return D.chartText+this.classTarget(aw.id)};F.classChartLine=function(aw){return D.chartLine+this.classTarget(aw.id)};F.classChartBar=function(aw){return D.chartBar+this.classTarget(aw.id)};F.classChartArc=function(aw){return D.chartArc+this.classTarget(aw.data.id)};F.getTargetSelectorSuffix=function(aw){return aw||aw===0?("-"+aw).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""};F.selectorTarget=function(ax,aw){return(aw||"")+"."+D.target+this.getTargetSelectorSuffix(ax)};F.selectorTargets=function(ax,ay){var aw=this;ax=ax||[];return ax.length?ax.map(function(az){return aw.selectorTarget(az,ay)}):null};F.selectorLegend=function(aw){return"."+D.legendItem+this.getTargetSelectorSuffix(aw)};F.selectorLegends=function(ax){var aw=this;return ax&&ax.length?ax.map(function(ay){return aw.selectorLegend(ay)}):null};var i=F.isValue=function(aw){return aw||aw===0},y=F.isFunction=function(aw){return typeof aw==="function"},r=F.isString=function(aw){return typeof aw==="string"},E=F.isUndefined=function(aw){return typeof aw==="undefined"},I=F.isDefined=function(aw){return typeof aw!=="undefined"},O=F.ceil10=function(aw){return Math.ceil(aw/10)*10},W=F.asHalfPixel=function(aw){return Math.ceil(aw)+0.5},N=F.diffDomain=function(aw){return aw[1]-aw[0]},C=F.isEmpty=function(aw){return !aw||(r(aw)&&aw.length===0)||(typeof aw==="object"&&Object.keys(aw).length===0)},L=F.notEmpty=function(aw){return Object.keys(aw).length>0},u=F.getOption=function(ax,ay,aw){return I(ax[ay])?ax[ay]:aw},t=F.hasValue=function(ay,ax){var aw=false;Object.keys(ay).forEach(function(az){if(ay[az]===ax){aw=true}});return aw},R=F.getPathBox=function(az){var ay=az.getBoundingClientRect(),ax=[az.pathSegList.getItem(0),az.pathSegList.getItem(1)],aw=ax[0].x,aA=Math.min(ax[0].y,ax[1].y);return{x:aw,y:aA,width:ay.width,height:ay.height}};B.focus=function(aw){var ax=this.internal,ay;aw=ax.mapToTargetIds(aw);ay=ax.svg.selectAll(ax.selectorTargets(aw.filter(ax.isTargetToShow,ax))),this.revert();this.defocus();ay.classed(D.focused,true).classed(D.defocused,false);if(ax.hasArcType()){ax.expandArc(aw)}ax.toggleFocusLegend(aw,true);ax.focusedTargetIds=aw;ax.defocusedTargetIds=ax.defocusedTargetIds.filter(function(az){return aw.indexOf(az)<0})};B.defocus=function(aw){var ax=this.internal,ay;aw=ax.mapToTargetIds(aw);ay=ax.svg.selectAll(ax.selectorTargets(aw.filter(ax.isTargetToShow,ax))),ay.classed(D.focused,false).classed(D.defocused,true);if(ax.hasArcType()){ax.unexpandArc(aw)}ax.toggleFocusLegend(aw,false);ax.focusedTargetIds=ax.focusedTargetIds.filter(function(az){return aw.indexOf(az)<0});ax.defocusedTargetIds=aw};B.revert=function(aw){var ax=this.internal,ay;aw=ax.mapToTargetIds(aw);ay=ax.svg.selectAll(ax.selectorTargets(aw));ay.classed(D.focused,false).classed(D.defocused,false);if(ax.hasArcType()){ax.unexpandArc(aw)}if(ax.config.legend_show){ax.showLegend(aw.filter(ax.isLegendToShow.bind(ax)));ax.legend.selectAll(ax.selectorLegends(aw)).filter(function(){return ax.d3.select(this).classed(D.legendItemFocused)}).classed(D.legendItemFocused,false)}ax.focusedTargetIds=[];ax.defocusedTargetIds=[]};B.show=function(ax,az){var ay=this.internal,aw;ax=ay.mapToTargetIds(ax);az=az||{};ay.removeHiddenTargetIds(ax);aw=ay.svg.selectAll(ay.selectorTargets(ax));aw.transition().style("opacity",1,"important").call(ay.endall,function(){aw.style("opacity",null).style("opacity",1)});if(az.withLegend){ay.showLegend(ax)}ay.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true})};B.hide=function(ax,az){var ay=this.internal,aw;ax=ay.mapToTargetIds(ax);az=az||{};ay.addHiddenTargetIds(ax);aw=ay.svg.selectAll(ay.selectorTargets(ax));aw.transition().style("opacity",0,"important").call(ay.endall,function(){aw.style("opacity",null).style("opacity",0)});if(az.withLegend){ay.hideLegend(ax)}ay.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true})};B.toggle=function(aw,ay){var az=this,ax=this.internal;ax.mapToTargetIds(aw).forEach(function(aA){ax.isTargetToShow(aA)?az.hide(aA,ay):az.show(aA,ay)})};B.zoom=function(ax){var aw=this.internal;if(ax){if(aw.isTimeSeries()){ax=ax.map(function(ay){return aw.parseDate(ay)})}aw.brush.extent(ax);aw.redraw({withUpdateXDomain:true,withY:aw.config.zoom_rescale});aw.config.zoom_onzoom.call(this,aw.x.orgDomain())}return aw.brush.extent()};B.zoom.enable=function(ax){var aw=this.internal;aw.config.zoom_enabled=ax;aw.updateAndRedraw()};B.unzoom=function(){var aw=this.internal;aw.brush.clear().update();aw.redraw({withUpdateXDomain:true})};B.load=function(ay){var aw=this.internal,ax=aw.config;if(ay.xs){aw.addXs(ay.xs)}if("classes" in ay){Object.keys(ay.classes).forEach(function(az){ax.data_classes[az]=ay.classes[az]})}if("categories" in ay&&aw.isCategorized()){ax.axis_x_categories=ay.categories}if("axes" in ay){Object.keys(ay.axes).forEach(function(az){ax.data_axes[az]=ay.axes[az]})}if("colors" in ay){Object.keys(ay.colors).forEach(function(az){ax.data_colors[az]=ay.colors[az]})}if("cacheIds" in ay&&aw.hasCaches(ay.cacheIds)){aw.load(aw.getCaches(ay.cacheIds),ay.done);return}if("unload" in ay){aw.unload(aw.mapToTargetIds((typeof ay.unload==="boolean"&&ay.unload)?null:ay.unload),function(){aw.loadFromArgs(ay)})}else{aw.loadFromArgs(ay)}};B.unload=function(ax){var aw=this.internal;ax=ax||{};if(ax instanceof Array){ax={ids:ax}}else{if(typeof ax==="string"){ax={ids:[ax]}}}aw.unload(aw.mapToTargetIds(ax.ids),function(){aw.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true});if(ax.done){ax.done()}})};B.flow=function(aE){var aJ=this.internal,aC,aB,az=[],aF=aJ.getMaxDataCount(),aG,aA,ax,aw,ay=0,aD=0,aI,aH;if(aE.json){aB=aJ.convertJsonToData(aE.json,aE.keys)}else{if(aE.rows){aB=aJ.convertRowsToData(aE.rows)}else{if(aE.columns){aB=aJ.convertColumnsToData(aE.columns)}else{return}}}aC=aJ.convertDataToTargets(aB,true);aJ.data.targets.forEach(function(aM){var aN=false,aL,aK;for(aL=0;aL<aC.length;aL++){if(aM.id===aC[aL].id){aN=true;if(aM.values[aM.values.length-1]){aD=aM.values[aM.values.length-1].index+1}ay=aC[aL].values.length;for(aK=0;aK<ay;aK++){aC[aL].values[aK].index=aD+aK;if(!aJ.isTimeSeries()){aC[aL].values[aK].x=aD+aK}}aM.values=aM.values.concat(aC[aL].values);aC.splice(aL,1);break}}if(!aN){az.push(aM.id)}});aJ.data.targets.forEach(function(aM){var aL,aK;for(aL=0;aL<az.length;aL++){if(aM.id===az[aL]){aD=aM.values[aM.values.length-1].index+1;for(aK=0;aK<ay;aK++){aM.values.push({id:aM.id,index:aD+aK,x:aJ.isTimeSeries()?aJ.getOtherTargetX(aD+aK):aD+aK,value:null})}}}});if(aJ.data.targets.length){aC.forEach(function(aM){var aL,aK=[];for(aL=aJ.data.targets[0].values[0].index;aL<aD;aL++){aK.push({id:aM.id,index:aL,x:aJ.isTimeSeries()?aJ.getOtherTargetX(aL):aL,value:null})}aM.values.forEach(function(aN){aN.index+=aD;if(!aJ.isTimeSeries()){aN.x+=aD}});aM.values=aK.concat(aM.values)})}aJ.data.targets=aJ.data.targets.concat(aC);aG=aJ.getMaxDataCount();ax=aJ.data.targets[0];aw=ax.values[0];if(I(aE.to)){ay=0;aH=aJ.isTimeSeries()?aJ.parseDate(aE.to):aE.to;ax.values.forEach(function(aK){if(aK.x<aH){ay++}})}else{if(I(aE.length)){ay=aE.length}}if(!aF){if(aJ.isTimeSeries()){if(ax.values.length>1){aI=ax.values[ax.values.length-1].x-aw.x}else{aI=aw.x-aJ.getXDomain(aJ.data.targets)[0]}}else{aI=1}aA=[aw.x-aI,aw.x];aJ.updateXDomain(null,true,true,false,aA)}else{if(aF===1){if(aJ.isTimeSeries()){aI=(ax.values[ax.values.length-1].x-aw.x)/2;aA=[new Date(+aw.x-aI),new Date(+aw.x+aI)];aJ.updateXDomain(null,true,true,false,aA)}}}aJ.updateTargets(aJ.data.targets);aJ.redraw({flow:{index:aw.index,length:ay,duration:i(aE.duration)?aE.duration:aJ.config.transition_duration,done:aE.done,orgDataCount:aF,},withLegend:true,withTransition:aF>1,withTrimXDomain:false,withUpdateXAxis:true,})};F.generateFlow=function(ay){var aw=this,ax=aw.config,az=aw.d3;return function(){var a1=ay.targets,aJ=ay.flow,aW=ay.drawBar,aQ=ay.drawLine,a0=ay.drawArea,aG=ay.cx,aE=ay.cy,aL=ay.xv,aF=ay.xForText,aU=ay.yForText,aB=ay.duration;var a4,aZ=1,aO,aA=aJ.index,aP=aJ.length,a2=aw.getValueOnIndex(aw.data.targets[0].values,aA),aM=aw.getValueOnIndex(aw.data.targets[0].values,aA+aP),aT=aw.x.domain(),a3,aK=aJ.duration||aB,aS=aJ.done||function(){},aV=aw.generateWait();var aC=aw.xgrid||az.selectAll([]),aY=aw.xgridLines||az.selectAll([]),aI=aw.mainRegion||az.selectAll([]),aH=aw.mainText||az.selectAll([]),aR=aw.mainBar||az.selectAll([]),aD=aw.mainLine||az.selectAll([]),aN=aw.mainArea||az.selectAll([]),aX=aw.mainCircle||az.selectAll([]);aw.flowing=true;aw.data.targets.forEach(function(a5){a5.values.splice(0,aP)});a3=aw.updateXDomain(a1,true,true);if(aw.updateXGrid){aw.updateXGrid(true)}if(!aJ.orgDataCount){if(aw.data.targets[0].values.length!==1){a4=aw.x(aT[0])-aw.x(a3[0])}else{if(aw.isTimeSeries()){a2=aw.getValueOnIndex(aw.data.targets[0].values,0);aM=aw.getValueOnIndex(aw.data.targets[0].values,aw.data.targets[0].values.length-1);a4=aw.x(a2.x)-aw.x(aM.x)}else{a4=N(a3)/2}}}else{if(aJ.orgDataCount===1||a2.x===aM.x){a4=aw.x(aT[0])-aw.x(a3[0])}else{if(aw.isTimeSeries()){a4=(aw.x(aT[0])-aw.x(a3[0]))}else{a4=(aw.x(a2.x)-aw.x(aM.x))}}}aZ=(N(aT)/N(a3));aO="translate("+a4+",0) scale("+aZ+",1)";aw.hideXGridFocus();aw.hideTooltip();az.transition().ease("linear").duration(aK).each(function(){aV.add(aw.axes.x.transition().call(aw.xAxis));aV.add(aR.transition().attr("transform",aO));aV.add(aD.transition().attr("transform",aO));aV.add(aN.transition().attr("transform",aO));aV.add(aX.transition().attr("transform",aO));aV.add(aH.transition().attr("transform",aO));aV.add(aI.filter(aw.isRegionOnX).transition().attr("transform",aO));aV.add(aC.transition().attr("transform",aO));aV.add(aY.transition().attr("transform",aO))}).call(aV,function(){var a7,a5=[],a8=[],a6=[];if(aP){for(a7=0;a7<aP;a7++){a5.push("."+D.shape+"-"+(aA+a7));a8.push("."+D.text+"-"+(aA+a7));a6.push("."+D.eventRect+"-"+(aA+a7))}aw.svg.selectAll("."+D.shapes).selectAll(a5).remove();aw.svg.selectAll("."+D.texts).selectAll(a8).remove();aw.svg.selectAll("."+D.eventRects).selectAll(a6).remove();aw.svg.select("."+D.xgrid).remove()}aC.attr("transform",null).attr(aw.xgridAttr);aY.attr("transform",null);aY.select("line").attr("x1",ax.axis_rotated?0:aL).attr("x2",ax.axis_rotated?aw.width:aL);aY.select("text").attr("x",ax.axis_rotated?aw.width:0).attr("y",aL);aR.attr("transform",null).attr("d",aW);aD.attr("transform",null).attr("d",aQ);aN.attr("transform",null).attr("d",a0);aX.attr("transform",null).attr("cx",aG).attr("cy",aE);aH.attr("transform",null).attr("x",aF).attr("y",aU).style("fill-opacity",aw.opacityForText.bind(aw));aI.attr("transform",null);aI.select("rect").filter(aw.isRegionOnX).attr("x",aw.regionX.bind(aw)).attr("width",aw.regionWidth.bind(aw));if(ax.interaction_enabled){aw.redrawEventRect()}aS();aw.flowing=false})}};B.selected=function(ax){var aw=this.internal,ay=aw.d3;return ay.merge(aw.main.selectAll("."+D.shapes+aw.getTargetSelectorSuffix(ax)).selectAll("."+D.shape).filter(function(){return ay.select(this).classed(D.SELECTED)}).map(function(az){return az.map(function(aB){var aA=aB.__data__;return aA.data?aA.data:aA})}))};B.select=function(aA,aB,az){var aw=this.internal,ay=aw.d3,ax=aw.config;if(!ax.data_selection_enabled){return}aw.main.selectAll("."+D.shapes).selectAll("."+D.shape).each(function(aI,aG){var aE=ay.select(this),aJ=aI.data?aI.data.id:aI.id,aC=aw.getToggle(this,aI).bind(aw),aD=ax.data_selection_grouped||!aA||aA.indexOf(aJ)>=0,aH=!aB||aB.indexOf(aG)>=0,aF=aE.classed(D.SELECTED);if(aE.classed(D.line)||aE.classed(D.area)){return}if(aD&&aH){if(ax.data_selection_isselectable(aI)&&!aF){aC(true,aE.classed(D.SELECTED,true),aI,aG)}}else{if(I(az)&&az){if(aF){aC(false,aE.classed(D.SELECTED,false),aI,aG)}}}})};B.unselect=function(az,aA){var aw=this.internal,ay=aw.d3,ax=aw.config;if(!ax.data_selection_enabled){return}aw.main.selectAll("."+D.shapes).selectAll("."+D.shape).each(function(aH,aF){var aD=ay.select(this),aI=aH.data?aH.data.id:aH.id,aB=aw.getToggle(this,aH).bind(aw),aC=ax.data_selection_grouped||!az||az.indexOf(aI)>=0,aG=!aA||aA.indexOf(aF)>=0,aE=aD.classed(D.SELECTED);if(aD.classed(D.line)||aD.classed(D.area)){return}if(aC&&aG){if(ax.data_selection_isselectable(aH)){if(aE){aB(false,aD.classed(D.SELECTED,false),aH,aF)}}}})};B.transform=function(az,aw){var ax=this.internal,ay=["pie","donut"].indexOf(az)>=0?{withTransform:true}:null;ax.transformTo(aw,az,ay)};F.transformTo=function(ax,aA,aw){var ay=this,aB=!ay.hasArcType(),az=aw||{withTransitionForAxis:aB};az.withTransitionForTransform=false;ay.transiting=false;ay.setTargetType(ax,aA);ay.updateTargets(ay.data.targets);ay.updateAndRedraw(az)};B.groups=function(aw){var ax=this.internal,ay=ax.config;if(E(aw)){return ay.data_groups}ay.data_groups=aw;ax.redraw();return ay.data_groups};B.xgrids=function(ay){var aw=this.internal,ax=aw.config;if(!ay){return ax.grid_x_lines}ax.grid_x_lines=ay;aw.redrawWithoutRescale();return ax.grid_x_lines};B.xgrids.add=function(ax){var aw=this.internal;return this.xgrids(aw.config.grid_x_lines.concat(ax?ax:[]))};B.xgrids.remove=function(ax){var aw=this.internal;aw.removeGridLines(ax,true)};B.ygrids=function(ay){var aw=this.internal,ax=aw.config;if(!ay){return ax.grid_y_lines}ax.grid_y_lines=ay;aw.redrawWithoutRescale();return ax.grid_y_lines};B.ygrids.add=function(ax){var aw=this.internal;return this.ygrids(aw.config.grid_y_lines.concat(ax?ax:[]))};B.ygrids.remove=function(ax){var aw=this.internal;aw.removeGridLines(ax,false)};B.regions=function(ay){var aw=this.internal,ax=aw.config;if(!ay){return ax.regions}ax.regions=ay;aw.redrawWithoutRescale();return ax.regions};B.regions.add=function(ay){var aw=this.internal,ax=aw.config;if(!ay){return ax.regions}ax.regions=ax.regions.concat(ay);aw.redrawWithoutRescale();return ax.regions};B.regions.remove=function(ay){var aw=this.internal,ax=aw.config,aA,az,aB;ay=ay||{};aA=aw.getOption(ay,"duration",ax.transition_duration);az=aw.getOption(ay,"classes",[D.region]);aB=aw.main.select("."+D.regions).selectAll(az.map(function(aC){return"."+aC}));(aA?aB.transition().duration(aA):aB).style("opacity",0).remove();ax.regions=ax.regions.filter(function(aD){var aC=false;if(!aD["class"]){return true}aD["class"].split(" ").forEach(function(aE){if(az.indexOf(aE)>=0){aC=true}});return !aC});return ax.regions};B.data=function(ax){var aw=this.internal.data.targets;return typeof ax==="undefined"?aw:aw.filter(function(ay){return[].concat(ax).indexOf(ay.id)>=0})};B.data.shown=function(aw){return this.internal.filterTargetsToShow(this.data(aw))};B.data.values=function(ay){var aw,ax=null;if(ay){aw=this.data(ay);ax=aw[0]?aw[0].values.map(function(az){return az.value}):null}return ax};B.data.names=function(aw){this.internal.clearLegendItemTextBoxCache();return this.internal.updateDataAttributes("names",aw)};B.data.colors=function(aw){return this.internal.updateDataAttributes("colors",aw)};B.data.axes=function(aw){return this.internal.updateDataAttributes("axes",aw)};B.category=function(ay,az){var aw=this.internal,ax=aw.config;if(arguments.length>1){ax.axis_x_categories[ay]=az;aw.redraw()}return ax.axis_x_categories[ay]};B.categories=function(ax){var aw=this.internal,ay=aw.config;if(!arguments.length){return ay.axis_x_categories}ay.axis_x_categories=ax;aw.redraw();return ay.axis_x_categories};B.color=function(ax){var aw=this.internal;return aw.color(ax)};B.x=function(aw){var ax=this.internal;if(arguments.length){ax.updateTargetX(ax.data.targets,aw);ax.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true})}return ax.data.xs};B.xs=function(ax){var aw=this.internal;if(arguments.length){aw.updateTargetXs(aw.data.targets,ax);aw.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true})}return aw.data.xs};B.axis=function(){};B.axis.labels=function(ax){var aw=this.internal;if(arguments.length){Object.keys(ax).forEach(function(ay){aw.axis.setLabelText(ay,ax[ay])});aw.axis.updateLabels()}};B.axis.max=function(aw){var ax=this.internal,ay=ax.config;if(arguments.length){if(typeof aw==="object"){if(i(aw.x)){ay.axis_x_max=aw.x}if(i(aw.y)){ay.axis_y_max=aw.y}if(i(aw.y2)){ay.axis_y2_max=aw.y2}}else{ay.axis_y_max=ay.axis_y2_max=aw}ax.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true})}else{return{x:ay.axis_x_max,y:ay.axis_y_max,y2:ay.axis_y2_max}}};B.axis.min=function(ay){var aw=this.internal,ax=aw.config;if(arguments.length){if(typeof ay==="object"){if(i(ay.x)){ax.axis_x_min=ay.x}if(i(ay.y)){ax.axis_y_min=ay.y}if(i(ay.y2)){ax.axis_y2_min=ay.y2}}else{ax.axis_y_min=ax.axis_y2_min=ay}aw.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true})}else{return{x:ax.axis_x_min,y:ax.axis_y_min,y2:ax.axis_y2_min}}};B.axis.range=function(aw){if(arguments.length){if(I(aw.max)){this.axis.max(aw.max)}if(I(aw.min)){this.axis.min(aw.min)}}else{return{max:this.axis.max(),min:this.axis.min()}}};B.legend=function(){};B.legend.show=function(aw){var ax=this.internal;ax.showLegend(ax.mapToTargetIds(aw));ax.updateAndRedraw({withLegend:true})};B.legend.hide=function(aw){var ax=this.internal;ax.hideLegend(ax.mapToTargetIds(aw));ax.updateAndRedraw({withLegend:true})};B.resize=function(ay){var aw=this.internal,ax=aw.config;ax.size_width=ay?ay.width:null;ax.size_height=ay?ay.height:null;this.flush()};B.flush=function(){var aw=this.internal;aw.updateAndRedraw({withLegend:true,withTransition:false,withTransitionForTransform:false})};B.destroy=function(){var aw=this.internal;ad.clearInterval(aw.intervalForObserveInserted);ad.onresize=null;aw.selectChart.classed("c3",false).html("");Object.keys(aw).forEach(function(ax){aw[ax]=null});return null};B.tooltip=function(){};B.tooltip.show=function(az){var aw=this.internal,ay,ax;if(az.mouse){ax=az.mouse}if(az.data){if(aw.isMultipleX()){ax=[aw.x(az.data.x),aw.getYScale(az.data.id)(az.data.value)];ay=null}else{ay=i(az.data.index)?az.data.index:aw.getIndexByX(az.data.x)}}else{if(typeof az.x!=="undefined"){ay=aw.getIndexByX(az.x)}else{if(typeof az.index!=="undefined"){ay=az.index}}}aw.dispatchEvent("mouseover",ay,ax);aw.dispatchEvent("mousemove",ay,ax)};B.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0)};var ar;function d(aQ,aN){var aR=aQ.scale.linear(),aH="bottom",aF=6,aD,aL=3,aw=null,aK,aB;var aC=0,aM=true,aE;aN=aN||{};aD=aN.withOuterTick?6:0;function az(aT,aS){aT.attr("transform",function(aU){return"translate("+Math.ceil(aS(aU)+aC)+", 0)"})}function ay(aS,aT){aS.attr("transform",function(aU){return"translate(0,"+Math.ceil(aT(aU))+")"})}function ax(aT){var aU=aT[0],aS=aT[aT.length-1];return aU<aS?[aU,aS]:[aS,aU]}function aP(aV){var aS,aU,aT=[];if(aV.ticks){return aV.ticks.apply(aV,aB)}aU=aV.domain();for(aS=Math.ceil(aU[0]);aS<aU[1];aS++){aT.push(aS)}if(aT.length>0&&aT[0]>0){aT.unshift(aT[0]-(aT[1]-aT[0]))}return aT}function aG(){var aT=aR.copy(),aS;if(aN.isCategory){aS=aR.domain();aT.domain([aS[0],aS[1]-1])}return aT}function aJ(aS){var aT=aK?aK(aS):aS;return typeof aT!=="undefined"?aT:""}function aI(aT){if(ar){return ar}var aS={h:11.5,w:5.5};aT.select("text").text(aJ).each(function(aY){var aW=this.getBoundingClientRect(),aX=aJ(aY),aV=aW.height,aU=aX?(aW.width/aX.length):undefined;if(aV&&aU){aS.h=aV;aS.w=aU}}).text("");ar=aS;return aS}function aO(aS){return aN.withoutTransition?aS:aQ.transition(aS)}function aA(aS){aS.each(function(){var bk=aA.g=aQ.select(this);var bg=this.__chart__||aR,be=this.__chart__=aG();var bo=aw?aw:aP(be),bh=bk.selectAll(".tick").data(bo,be),a8=bh.enter().insert("g",".domain").attr("class","tick").style("opacity",0.000001),bd=bh.exit().remove(),aY=aO(bh).style("opacity",1),aT,a6,a4;var a7=aR.rangeExtent?aR.rangeExtent():ax(aR.range()),bb=bk.selectAll(".domain").data([0]),bq=(bb.enter().append("path").attr("class","domain"),aO(bb));a8.append("line");a8.append("text");var aW=a8.select("line"),bm=aY.select("line"),aZ=a8.select("text"),bj=aY.select("text");if(aN.isCategory){aC=Math.ceil((be(1)-be(0))/2);a6=aE?0:aC;a4=aE?aC:0}else{aC=a6=0}var a5,a0,bp=aI(bk.select(".tick")),bl=[];var aU=Math.max(aF,0)+aL,a1=aH==="left"||aH==="right";function aV(bx,bv){var br=aJ(bx),bt,bu,bw,by=[];if(Object.prototype.toString.call(br)==="[object Array]"){return br}if(!bv||bv<=0){bv=a1?95:aN.isCategory?(Math.ceil(be(bo[1])-be(bo[0]))-12):110}function bs(bB,bA){bu=undefined;for(var bz=1;bz<bA.length;bz++){if(bA.charAt(bz)===" "){bu=bz}bt=bA.substr(0,bz+1);bw=bp.w*bt.length;if(bv<bw){return bs(bB.concat(bA.substr(0,bu?bu:bz)),bA.slice(bu?bu+1:bz))}}return bB.concat(bA)}return bs(by,br+"")}function ba(bt,bs){var br=bp.h;if(bs===0){if(aH==="left"||aH==="right"){br=-((bl[bt.index]-1)*(bp.h/2)-3)}else{br=".71em"}}return br}function a9(bs){var br=aR(bs)+(aE?0:aC);return a7[0]<br&&br<a7[1]?aF:0}a5=bh.select("text");a0=a5.selectAll("tspan").data(function(bs,br){var bt=aN.tickMultiline?aV(bs,aN.tickWidth):[].concat(aJ(bs));bl[br]=bt.length;return bt.map(function(bu){return{index:br,splitted:bu}})});a0.enter().append("tspan");a0.exit().remove();a0.text(function(br){return br.splitted});var bf=aN.tickTextRotate;function bi(br){if(!br){return"middle"}return br>0?"start":"end"}function bn(br){if(!br){return""}return"rotate("+br+")"}function aX(br){if(!br){return 0}return 8*Math.sin(Math.PI*(br/180))}function bc(br){if(!br){return aU}return 11.5-2.5*(br/15)*(br>0?1:-1)}switch(aH){case"bottom":aT=az;aW.attr("y2",aF);aZ.attr("y",aU);bm.attr("x1",a6).attr("x2",a6).attr("y2",a9);bj.attr("x",0).attr("y",bc(bf)).style("text-anchor",bi(bf)).attr("transform",bn(bf));a0.attr("x",0).attr("dy",ba).attr("dx",aX(bf));bq.attr("d","M"+a7[0]+","+aD+"V0H"+a7[1]+"V"+aD);break;case"top":aT=az;aW.attr("y2",-aF);aZ.attr("y",-aU);bm.attr("x2",0).attr("y2",-aF);bj.attr("x",0).attr("y",-aU);a5.style("text-anchor","middle");a0.attr("x",0).attr("dy","0em");bq.attr("d","M"+a7[0]+","+-aD+"V0H"+a7[1]+"V"+-aD);break;case"left":aT=ay;aW.attr("x2",-aF);aZ.attr("x",-aU);bm.attr("x2",-aF).attr("y1",a4).attr("y2",a4);bj.attr("x",-aU).attr("y",aC);a5.style("text-anchor","end");a0.attr("x",-aU).attr("dy",ba);bq.attr("d","M"+-aD+","+a7[0]+"H0V"+a7[1]+"H"+-aD);break;case"right":aT=ay;aW.attr("x2",aF);aZ.attr("x",aU);bm.attr("x2",aF).attr("y2",0);bj.attr("x",aU).attr("y",0);a5.style("text-anchor","start");a0.attr("x",aU).attr("dy",ba);bq.attr("d","M"+aD+","+a7[0]+"H0V"+a7[1]+"H"+aD);break}if(be.rangeBand){var a2=be,a3=a2.rangeBand()/2;bg=be=function(br){return a2(br)+a3}}else{if(bg.rangeBand){bg=be}else{bd.call(aT,be)}}a8.call(aT,bg);aY.call(aT,be)})}aA.scale=function(aS){if(!arguments.length){return aR}aR=aS;return aA};aA.orient=function(aS){if(!arguments.length){return aH}aH=aS in {top:1,right:1,bottom:1,left:1}?aS+"":"bottom";return aA};aA.tickFormat=function(aS){if(!arguments.length){return aK}aK=aS;return aA};aA.tickCentered=function(aS){if(!arguments.length){return aE}aE=aS;return aA};aA.tickOffset=function(){return aC};aA.tickInterval=function(){var aS,aT;if(aN.isCategory){aS=aC*2}else{aT=aA.g.select("path.domain").node().getTotalLength()-aD*2;aS=aT/aA.g.selectAll("line").size()}return aS===Infinity?0:aS};aA.ticks=function(){if(!arguments.length){return aB}aB=arguments;return aA};aA.tickCulling=function(aS){if(!arguments.length){return aM}aM=aS;return aA};aA.tickValues=function(aS){if(typeof aS==="function"){aw=function(){return aS(aR.domain())}}else{if(!arguments.length){return aw}aw=aS}return aA};return aA}F.isSafari=function(){var aw=ad.navigator.userAgent;return aw.indexOf("Safari")>=0&&aw.indexOf("Chrome")<0};F.isChrome=function(){var aw=ad.navigator.userAgent;return aw.indexOf("Chrome")>=0};if(!Function.prototype.bind){Function.prototype.bind=function(aw){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var aA=Array.prototype.slice.call(arguments,1),az=this,ax=function(){},ay=function(){return az.apply(this instanceof ax?this:aw,aA.concat(Array.prototype.slice.call(arguments)))};ax.prototype=this.prototype;ay.prototype=new ax();return ay}}if(typeof define==="function"&&define.amd){define("c3",["d3"],m)}else{if("undefined"!==typeof a&&"undefined"!==typeof c){c.exports=m}else{ad.c3=m}}})(window)},{d3:30}],30:[function(b,c,a){!function(){var hl={version:"3.5.0"};if(!Date.now){Date.now=function(){return +new Date()}}var bO=[].slice,dN=function(d3){return bO.call(d3)};var bN=document,d6=bN.documentElement,fy=window;try{dN(d6.childNodes)[0].nodeType}catch(ha){dN=function(h8){var d3=h8.length,h9=new Array(d3);while(d3--){h9[d3]=h8[d3]}return h9}}try{bN.createElement("div").style.setProperty("opacity",0,"")}catch(fw){var dL=fy.Element.prototype,b2=dL.setAttribute,g3=dL.setAttributeNS,dz=fy.CSSStyleDeclaration.prototype,gN=dz.setProperty;dL.setAttribute=function(d3,h8){b2.call(this,d3,h8+"")};dL.setAttributeNS=function(h9,d3,h8){g3.call(this,h9,d3,h8+"")};dz.setProperty=function(d3,h9,h8){gN.call(this,d3,h9+"",h8)}}hl.ascending=fi;function fi(h8,d3){return h8<d3?-1:h8>d3?1:h8>=d3?0:NaN}hl.descending=function(h8,d3){return d3<h8?-1:d3>h8?1:d3>=h8?0:NaN};hl.min=function(ic,ia){var h9=-1,ib=ic.length,h8,d3;if(arguments.length===1){while(++h9<ib){if((d3=ic[h9])!=null&&d3>=d3){h8=d3;break}}while(++h9<ib){if((d3=ic[h9])!=null&&h8>d3){h8=d3}}}else{while(++h9<ib){if((d3=ia.call(ic,ic[h9],h9))!=null&&d3>=d3){h8=d3;break}}while(++h9<ib){if((d3=ia.call(ic,ic[h9],h9))!=null&&h8>d3){h8=d3}}}return h8};hl.max=function(ic,ia){var h9=-1,ib=ic.length,h8,d3;if(arguments.length===1){while(++h9<ib){if((d3=ic[h9])!=null&&d3>=d3){h8=d3;break}}while(++h9<ib){if((d3=ic[h9])!=null&&d3>h8){h8=d3}}}else{while(++h9<ib){if((d3=ia.call(ic,ic[h9],h9))!=null&&d3>=d3){h8=d3;break}}while(++h9<ib){if((d3=ia.call(ic,ic[h9],h9))!=null&&d3>h8){h8=d3}}}return h8};hl.extent=function(id,ia){var h9=-1,ic=id.length,h8,d3,ib;if(arguments.length===1){while(++h9<ic){if((d3=id[h9])!=null&&d3>=d3){h8=ib=d3;break}}while(++h9<ic){if((d3=id[h9])!=null){if(h8>d3){h8=d3}if(ib<d3){ib=d3}}}}else{while(++h9<ic){if((d3=ia.call(id,id[h9],h9))!=null&&d3>=d3){h8=ib=d3;break}}while(++h9<ic){if((d3=ia.call(id,id[h9],h9))!=null){if(h8>d3){h8=d3}if(ib<d3){ib=d3}}}}return[h8,ib]};function hq(d3){return d3===null?NaN:+d3}function bb(d3){return !isNaN(d3)}hl.sum=function(ic,ia){var h9=0,ib=ic.length,d3,h8=-1;if(arguments.length===1){while(++h8<ib){if(bb(d3=+ic[h8])){h9+=d3}}}else{while(++h8<ib){if(bb(d3=+ia.call(ic,ic[h8],h8))){h9+=d3}}}return h9};hl.mean=function(id,ib){var ia=0,ic=id.length,d3,h9=-1,h8=ic;if(arguments.length===1){while(++h9<ic){if(bb(d3=hq(id[h9]))){ia+=d3}else{--h8}}}else{while(++h9<ic){if(bb(d3=hq(ib.call(id,id[h9],h9)))){ia+=d3}else{--h8}}}if(h8){return ia/h8}};hl.quantile=function(h8,ic){var h9=(h8.length-1)*ic+1,ia=Math.floor(h9),d3=+h8[ia-1],ib=h9-ia;return ib?d3+ib*(h8[ia]-d3):d3};hl.median=function(ic,ia){var h8=[],ib=ic.length,d3,h9=-1;if(arguments.length===1){while(++h9<ib){if(bb(d3=hq(ic[h9]))){h8.push(d3)}}}else{while(++h9<ib){if(bb(d3=hq(ia.call(ic,ic[h9],h9)))){h8.push(d3)}}}if(h8.length){return hl.quantile(h8.sort(fi),0.5)}};function gn(d3){return{left:function(h9,h8,ic,ib){if(arguments.length<3){ic=0}if(arguments.length<4){ib=h9.length}while(ic<ib){var ia=ic+ib>>>1;if(d3(h9[ia],h8)<0){ic=ia+1}else{ib=ia}}return ic},right:function(h9,h8,ic,ib){if(arguments.length<3){ic=0}if(arguments.length<4){ib=h9.length}while(ic<ib){var ia=ic+ib>>>1;if(d3(h9[ia],h8)>0){ib=ia}else{ic=ia+1}}return ic}}}var cZ=gn(fi);hl.bisectLeft=cZ.left;hl.bisect=hl.bisectRight=cZ.right;hl.bisector=function(d3){return gn(d3.length===1?function(h9,h8){return fi(d3(h9),h8)}:d3)};hl.shuffle=function(ic,ib,ia){if((d3=arguments.length)<3){ia=ic.length;if(d3<2){ib=0}}var d3=ia-ib,h9,h8;while(d3){h8=Math.random()*d3--|0;h9=ic[d3+ib],ic[d3+ib]=ic[h8+ib],ic[h8+ib]=h9}return ic};hl.permute=function(ia,h8){var h9=h8.length,d3=new Array(h9);while(h9--){d3[h9]=ia[h8[h9]]}return d3};hl.pairs=function(ic){var d3=0,ib=ic.length-1,ia,h9=ic[0],h8=new Array(ib<0?0:ib);while(d3<ib){h8[d3]=[ia=h9,h9=ic[++d3]]}return h8};hl.zip=function(){if(!(ic=arguments.length)){return[]}for(var ia=-1,d3=hl.min(arguments,fc),h9=new Array(d3);++ia<d3;){for(var h8=-1,ic,ib=h9[ia]=new Array(ic);++h8<ic;){ib[h8]=arguments[h8][ia]}}return h9};function fc(d3){return d3.length}hl.transpose=function(d3){return hl.zip.apply(hl,d3)};hl.keys=function(h9){var h8=[];for(var d3 in h9){h8.push(d3)}return h8};hl.values=function(h9){var d3=[];for(var h8 in h9){d3.push(h9[h8])}return d3};hl.entries=function(h9){var d3=[];for(var h8 in h9){d3.push({key:h8,value:h9[h8]})}return d3};hl.merge=function(ib){var id=ib.length,h8,ia=-1,h9=0,d3,ic;while(++ia<id){h9+=ib[ia].length}d3=new Array(h9);while(--id>=0){ic=ib[id];h8=ic.length;while(--h8>=0){d3[--h9]=ic[h8]}}return d3};var cG=Math.abs;hl.range=function(id,ib,ic){if(arguments.length<3){ic=1;if(arguments.length<2){ib=id;id=0}}if((ib-id)/ic===Infinity){throw new Error("infinite range")}var h8=[],d3=gj(cG(ic)),ia=-1,h9;id*=d3,ib*=d3,ic*=d3;if(ic<0){while((h9=id+ic*++ia)>ib){h8.push(h9/d3)}}else{while((h9=id+ic*++ia)<ib){h8.push(h9/d3)}}return h8};function gj(d3){var h8=1;while(d3*h8%1){h8*=10}return h8}function h0(h9,h8){for(var d3 in h8){Object.defineProperty(h9.prototype,d3,{value:h8[d3],enumerable:false})}}hl.map=function(d3,ia){var ib=new aI();if(d3 instanceof aI){d3.forEach(function(ie,ig){ib.set(ie,ig)})}else{if(Array.isArray(d3)){var h9=-1,id=d3.length,ic;if(arguments.length===1){while(++h9<id){ib.set(h9,d3[h9])}}else{while(++h9<id){ib.set(ia.call(d3,ic=d3[h9],h9),ic)}}}else{for(var h8 in d3){ib.set(h8,d3[h8])}}}return ib};function aI(){this._=Object.create(null)}var db="__proto__",cF="\x00";h0(aI,{has:gH,get:function(d3){return this._[a0(d3)]},set:function(d3,h8){return this._[a0(d3)]=h8},remove:cW,keys:fv,values:function(){var d3=[];for(var h8 in this._){d3.push(this._[h8])}return d3},entries:function(){var d3=[];for(var h8 in this._){d3.push({key:a1(h8),value:this._[h8]})}return d3},size:hD,empty:aA,forEach:function(h8){for(var d3 in this._){h8.call(this,a1(d3),this._[d3])}}});function a0(d3){return(d3+="")===db||d3[0]===cF?cF+d3:d3}function a1(d3){return(d3+="")[0]===cF?d3.slice(1):d3}function gH(d3){return a0(d3) in this._}function cW(d3){return(d3=a0(d3)) in this._&&delete this._[d3]}function fv(){var h8=[];for(var d3 in this._){h8.push(a1(d3))}return h8}function hD(){var h8=0;for(var d3 in this._){++h8}return h8}function aA(){for(var d3 in this._){return false}return true}hl.nest=function(){var ia={},h9=[],id=[],h8,ib;function ic(ig,io,il){if(il>=h9.length){return ib?ib.call(ia,io):h8?io.sort(h8):io}var im=-1,ie=io.length,iq=h9[il++],ik,ij,ii,ih=new aI(),ip;while(++im<ie){if(ip=ih.get(ik=iq(ij=io[im]))){ip.push(ij)}else{ih.set(ik,[ij])}}if(ig){ij=ig();ii=function(it,ir){ij.set(it,ic(ig,ir,il))}}else{ij={};ii=function(it,ir){ij[it]=ic(ig,ir,il)}}ih.forEach(ii);return ij}function d3(ig,ih){if(ih>=h9.length){return ig}var ii=[],ie=id[ih++];ig.forEach(function(ij,ik){ii.push({key:ij,values:d3(ik,ih)})});return ie?ii.sort(function(ik,ij){return ie(ik.key,ij.key)}):ii}ia.map=function(ig,ie){return ic(ie,ig,0)};ia.entries=function(ie){return d3(ic(hl.map,ie,0),0)};ia.key=function(ie){h9.push(ie);return ia};ia.sortKeys=function(ie){id[h9.length-1]=ie;return ia};ia.sortValues=function(ie){h8=ie;return ia};ia.rollup=function(ie){ib=ie;return ia};return ia};hl.set=function(ia){var h9=new dr();if(ia){for(var d3=0,h8=ia.length;d3<h8;++d3){h9.add(ia[d3])}}return h9};function dr(){this._=Object.create(null)}h0(dr,{has:gH,add:function(d3){this._[a0(d3+="")]=true;return d3},remove:cW,values:fv,size:hD,empty:aA,forEach:function(h8){for(var d3 in this._){h8.call(this,a1(d3))}}});hl.behavior={};hl.rebind=function(h9,h8){var d3=1,ib=arguments.length,ia;while(++d3<ib){h9[ia=arguments[d3]]=ez(h9,h8,h8[ia])}return h9};function ez(h8,d3,h9){return function(){var ia=h9.apply(d3,arguments);return ia===d3?h8:ia}}function dg(h9,h8){if(h8 in h9){return h8}h8=h8.charAt(0).toUpperCase()+h8.slice(1);for(var ia=0,ib=K.length;ia<ib;++ia){var d3=K[ia]+h8;if(d3 in h9){return d3}}}var K=["webkit","ms","moz","Moz","o","O"];function aH(){}hl.dispatch=function(){var d3=new eU(),h8=-1,h9=arguments.length;while(++h8<h9){d3[arguments[h8]]=fg(d3)}return d3};function eU(){}eU.prototype.on=function(h9,ia){var h8=h9.indexOf("."),d3="";if(h8>=0){d3=h9.slice(h8+1);h9=h9.slice(0,h8)}if(h9){return arguments.length<2?this[h9].on(d3):this[h9].on(d3,ia)}if(arguments.length===2){if(ia==null){for(h9 in this){if(this.hasOwnProperty(h9)){this[h9].on(d3,null)}}}return this}};function fg(d3){var h9=[],h8=new aI();function ia(){var id=h9,ic=-1,ie=id.length,ib;while(++ic<ie){if(ib=id[ic].on){ib.apply(this,arguments)}}return d3}ia.on=function(ic,ie){var ib=h8.get(ic),id;if(arguments.length<2){return ib&&ib.on}if(ib){ib.on=null;h9=h9.slice(0,id=h9.indexOf(ib)).concat(h9.slice(id+1));h8.remove(ic)}if(ie){h9.push(h8.set(ic,{on:ie}))}return d3};return ia}hl.event=null;function w(){hl.event.preventDefault()}function ae(){var h8=hl.event,d3;while(d3=h8.sourceEvent){h8=d3}return h8}function hf(h9){var d3=new eU(),h8=0,ia=arguments.length;while(++h8<ia){d3[arguments[h8]]=fg(d3)}d3.of=function(ic,ib){return function(id){try{var ie=id.sourceEvent=hl.event;id.target=h9;hl.event=id;d3[id.type].apply(ic,ib)}finally{hl.event=ie}}};return d3}hl.requote=function(d3){return d3.replace(c8,"\\$&")};var c8=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var h2={}.__proto__?function(h8,d3){h8.__proto__=d3}:function(h8,d3){for(var h9 in d3){h8[h9]=d3[h9]}};function dY(d3){h2(d3,dX);return d3}var dq=function(d3,h8){return h8.querySelector(d3)},f6=function(d3,h8){return h8.querySelectorAll(d3)},g=d6.matches||d6[dg(d6,"matchesSelector")],d=function(h8,d3){return g.call(h8,d3)};if(typeof Sizzle==="function"){dq=function(d3,h8){return Sizzle(d3,h8)[0]||null};f6=Sizzle;d=Sizzle.matchesSelector}hl.selection=function(){return gS};var dX=hl.selection.prototype=[];dX.select=function(ic){var h9=[],ih,d3,ig,ia;ic=z(ic);for(var id=-1,ib=this.length;++id<ib;){h9.push(ih=[]);ih.parentNode=(ig=this[id]).parentNode;for(var ie=-1,h8=ig.length;++ie<h8;){if(ia=ig[ie]){ih.push(d3=ic.call(ia,ia.__data__,ie,id));if(d3&&"__data__" in ia){d3.__data__=ia.__data__}}else{ih.push(null)}}}return dY(h9)};function z(d3){return typeof d3==="function"?d3:function(){return dq(d3,this)}}dX.selectAll=function(ib){var h8=[],ig,h9;ib=c1(ib);for(var ic=-1,ia=this.length;++ic<ia;){for(var ie=this[ic],id=-1,d3=ie.length;++id<d3;){if(h9=ie[id]){h8.push(ig=dN(ib.call(h9,h9.__data__,id,ic)));ig.parentNode=h9}}}return dY(h8)};function c1(d3){return typeof d3==="function"?d3:function(){return f6(d3,this)}}var ec={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};hl.ns={prefix:ec,qualify:function(d3){var h8=d3.indexOf(":"),h9=d3;if(h8>=0){h9=d3.slice(0,h8);d3=d3.slice(h8+1)}return ec.hasOwnProperty(h9)?{space:ec[h9],local:d3}:d3}};dX.attr=function(d3,h9){if(arguments.length<2){if(typeof d3==="string"){var h8=this.node();d3=hl.ns.qualify(d3);return d3.local?h8.getAttributeNS(d3.space,d3.local):h8.getAttribute(d3)}for(h9 in d3){this.each(bv(h9,d3[h9]))}return this}return this.each(bv(d3,h9))};function bv(h9,id){h9=hl.ns.qualify(h9);function h8(){this.removeAttribute(h9)}function ie(){this.removeAttributeNS(h9.space,h9.local)}function ic(){this.setAttribute(h9,id)}function ib(){this.setAttributeNS(h9.space,h9.local,id)}function d3(){var ig=id.apply(this,arguments);if(ig==null){this.removeAttribute(h9)}else{this.setAttribute(h9,ig)}}function ia(){var ig=id.apply(this,arguments);if(ig==null){this.removeAttributeNS(h9.space,h9.local)}else{this.setAttributeNS(h9.space,h9.local,ig)}}return id==null?h9.local?ie:h8:typeof id==="function"?h9.local?ia:d3:h9.local?ib:ic}function cH(d3){return d3.trim().replace(/\s+/g," ")}dX.classed=function(d3,ia){if(arguments.length<2){if(typeof d3==="string"){var h9=this.node(),ib=(d3=gu(d3)).length,h8=-1;if(ia=h9.classList){while(++h8<ib){if(!ia.contains(d3[h8])){return false}}}else{ia=h9.getAttribute("class");while(++h8<ib){if(!gP(d3[h8]).test(ia)){return false}}}return true}for(ia in d3){this.each(gD(ia,d3[ia]))}return this}return this.each(gD(d3,ia))};function gP(d3){return new RegExp("(?:^|\\s+)"+hl.requote(d3)+"(?:\\s+|$)","g")}function gu(d3){return(d3+"").trim().split(/^|\s+/)}function gD(h8,ia){h8=gu(h8).map(hY);var ib=h8.length;function d3(){var ic=-1;while(++ic<ib){h8[ic](this,ia)}}function h9(){var id=-1,ic=ia.apply(this,arguments);while(++id<ib){h8[id](this,ic)}}return typeof ia==="function"?h9:d3}function hY(d3){var h8=gP(d3);return function(h9,ia){if(ib=h9.classList){return ia?ib.add(d3):ib.remove(d3)}var ib=h9.getAttribute("class")||"";if(ia){h8.lastIndex=0;if(!h8.test(ib)){h9.setAttribute("class",cH(ib+" "+d3))}}else{h9.setAttribute("class",cH(ib.replace(h8," ")))}}}dX.style=function(d3,h9,h8){var ia=arguments.length;if(ia<3){if(typeof d3!=="string"){if(ia<2){h9=""}for(h8 in d3){this.each(fL(h8,d3[h8],h9))}return this}if(ia<2){return fy.getComputedStyle(this.node(),null).getPropertyValue(d3)}h8=""}return this.each(fL(d3,h9,h8))};function fL(h9,ic,ia){function h8(){this.style.removeProperty(h9)}function ib(){this.style.setProperty(h9,ic,ia)}function d3(){var id=ic.apply(this,arguments);if(id==null){this.style.removeProperty(h9)}else{this.style.setProperty(h9,id,ia)}}return ic==null?h8:typeof ic==="function"?d3:ib}dX.property=function(d3,h8){if(arguments.length<2){if(typeof d3==="string"){return this.node()[d3]}for(h8 in d3){this.each(hF(h8,d3[h8]))}return this}return this.each(hF(d3,h8))};function hF(h8,ia){function d3(){delete this[h8]}function h9(){this[h8]=ia}function ib(){var ic=ia.apply(this,arguments);if(ic==null){delete this[h8]}else{this[h8]=ic}}return ia==null?d3:typeof ia==="function"?ib:h9}dX.text=function(d3){return arguments.length?this.each(typeof d3==="function"?function(){var h8=d3.apply(this,arguments);this.textContent=h8==null?"":h8}:d3==null?function(){this.textContent=""}:function(){this.textContent=d3}):this.node().textContent};dX.html=function(d3){return arguments.length?this.each(typeof d3==="function"?function(){var h8=d3.apply(this,arguments);this.innerHTML=h8==null?"":h8}:d3==null?function(){this.innerHTML=""}:function(){this.innerHTML=d3}):this.node().innerHTML};dX.append=function(d3){d3=aD(d3);return this.select(function(){return this.appendChild(d3.apply(this,arguments))})};function aD(d3){return typeof d3==="function"?d3:(d3=hl.ns.qualify(d3)).local?function(){return this.ownerDocument.createElementNS(d3.space,d3.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,d3)}}dX.insert=function(d3,h8){d3=aD(d3);h8=z(h8);return this.select(function(){return this.insertBefore(d3.apply(this,arguments),h8.apply(this,arguments)||null)})};dX.remove=function(){return this.each(ei)};function ei(){var d3=this.parentNode;if(d3){d3.removeChild(this)}}dX.data=function(ie,ih){var ib=-1,h8=this.length,ig,h9;if(!arguments.length){ie=new Array(h8=(ig=this[0]).length);while(++ib<h8){if(h9=ig[ib]){ie[ib]=h9.__data__}}return ie}function ic(it,im){var ip,ij=it.length,il=im.length,ir=Math.min(ij,il),iw=new Array(il),iu=new Array(il),iq=new Array(ij),ik,ii;if(ih){var ix=new aI(),iv=new Array(ij),io;for(ip=-1;++ip<ij;){if(ix.has(io=ih.call(ik=it[ip],ik.__data__,ip))){iq[ip]=ik}else{ix.set(io,ik)}iv[ip]=io}for(ip=-1;++ip<il;){if(!(ik=ix.get(io=ih.call(im,ii=im[ip],ip)))){iu[ip]=L(ii)}else{if(ik!==true){iw[ip]=ik;ik.__data__=ii}}ix.set(io,true)}for(ip=-1;++ip<ij;){if(ix.get(iv[ip])!==true){iq[ip]=it[ip]}}}else{for(ip=-1;++ip<ir;){ik=it[ip];ii=im[ip];if(ik){ik.__data__=ii;iw[ip]=ik}else{iu[ip]=L(ii)}}for(;ip<il;++ip){iu[ip]=L(im[ip])}for(;ip<ij;++ip){iq[ip]=it[ip]}}iu.update=iw;iu.parentNode=iw.parentNode=iq.parentNode=it.parentNode;id.push(iu);ia.push(iw);d3.push(iq)}var id=bV([]),ia=dY([]),d3=dY([]);if(typeof ie==="function"){while(++ib<h8){ic(ig=this[ib],ie.call(ig,ig.parentNode.__data__,ib))}}else{while(++ib<h8){ic(ig=this[ib],ie)}}ia.enter=function(){return id};ia.exit=function(){return d3};return ia};function L(d3){return{__data__:d3}}dX.datum=function(d3){return arguments.length?this.property("__data__",d3):this.property("__data__")};dX.filter=function(d3){var h9=[],ig,ie,ia;if(typeof d3!=="function"){d3=a8(d3)}for(var ic=0,ib=this.length;ic<ib;ic++){h9.push(ig=[]);ig.parentNode=(ie=this[ic]).parentNode;for(var id=0,h8=ie.length;id<h8;id++){if((ia=ie[id])&&d3.call(ia,ia.__data__,id,ic)){ig.push(ia)}}}return dY(h9)};function a8(d3){return function(){return d(this,d3)}}dX.order=function(){for(var h8=-1,d3=this.length;++h8<d3;){for(var ic=this[h8],h9=ic.length-1,ia=ic[h9],ib;--h9>=0;){if(ib=ic[h9]){if(ia&&ia!==ib.nextSibling){ia.parentNode.insertBefore(ib,ia)}ia=ib}}}return this};dX.sort=function(h8){h8=gM.apply(this,arguments);for(var h9=-1,d3=this.length;++h9<d3;){this[h9].sort(h8)}return this.order()};function gM(d3){if(!arguments.length){d3=fi}return function(h9,h8){return h9&&h8?d3(h9.__data__,h8.__data__):!h9-!h8}}dX.each=function(d3){return cI(this,function(ia,h9,h8){d3.call(ia,ia.__data__,h9,h8)})};function cI(h8,ie){for(var h9=0,d3=h8.length;h9<d3;h9++){for(var ic=h8[h9],ia=0,id=ic.length,ib;ia<id;ia++){if(ib=ic[ia]){ie(ib,ia,h9)}}}return h8}dX.call=function(h8){var d3=dN(arguments);h8.apply(d3[0]=this,d3);return this};dX.empty=function(){return !this.node()};dX.node=function(){for(var h8=0,d3=this.length;h8<d3;h8++){for(var ib=this[h8],h9=0,ic=ib.length;h9<ic;h9++){var ia=ib[h9];if(ia){return ia}}}return null};dX.size=function(){var d3=0;cI(this,function(){++d3});return d3};function bV(d3){h2(d3,e3);return d3}var e3=[];hl.selection.enter=bV;hl.selection.enter.prototype=e3;e3.append=dX.append;e3.empty=dX.empty;e3.node=dX.node;e3.call=dX.call;e3.size=dX.size;e3.select=function(ic){var h9=[],ii,d3,ig,ih,ib;for(var id=-1,ia=this.length;++id<ia;){ig=(ih=this[id]).update;h9.push(ii=[]);ii.parentNode=ih.parentNode;for(var ie=-1,h8=ih.length;++ie<h8;){if(ib=ih[ie]){ii.push(ig[ie]=d3=ic.call(ih.parentNode,ib.__data__,ie,id));d3.__data__=ib.__data__}else{ii.push(null)}}}return dY(h9)};e3.insert=function(d3,h8){if(arguments.length<2){h8=gt(this)}return dX.insert.call(this,d3,h8)};function gt(h9){var d3,h8;return function(ie,ib,ia){var id=h9[ia].update,ig=id.length,ic;if(ia!=h8){h8=ia,d3=0}if(ib>=d3){d3=ib+1}while(!(ic=id[d3])&&++d3<ig){}return ic}}dX.transition=function(d3){var h8=ar||++g8,ii=gy(d3),ia=[],ik,ic,ih=d2||{time:Date.now(),ease:aw,delay:0,duration:250};for(var ie=-1,ib=this.length;++ie<ib;){ia.push(ik=[]);for(var ij=this[ie],ig=-1,h9=ij.length;++ig<h9;){if(ic=ij[ig]){fB(ic,ig,ii,h8,ih)}ik.push(ic)}}return gQ(ia,ii,h8)};dX.interrupt=function(d3){var h8=gy(d3);return this.each(function(){var h9=this[h8];if(h9){++h9.active}})};function cU(h8){var d3=h8.__transition__;if(d3){++d3.active}}hl.select=function(d3){var h8=[typeof d3==="string"?dq(d3,bN):d3];h8.parentNode=d6;return dY([h8])};hl.selectAll=function(d3){var h8=dN(typeof d3==="string"?f6(d3,bN):d3);h8.parentNode=d6;return dY([h8])};var gS=hl.select(d6);dX.on=function(h8,h9,d3){var ia=arguments.length;if(ia<3){if(typeof h8!=="string"){if(ia<2){h9=false}for(d3 in h8){this.each(m(d3,h8[d3],h9))}return this}if(ia<2){return(ia=this.node()["__on"+h8])&&ia._}d3=false}return this.each(m(h8,h9,d3))};function m(ig,ia,ih){var d3="__on"+ig,ic=ig.indexOf("."),h8=fq;if(ic>0){ig=ig.slice(0,ic)}var h9=bJ.get(ig);if(h9){ig=h9,h8=ap}function ib(){var ii=this[d3];if(ii){this.removeEventListener(ig,ii,ii.$);delete this[d3]}}function ie(){var ii=h8(ia,dN(arguments));ib.call(this);this.addEventListener(ig,this[d3]=ii,ii.$=ih);ii._=ia}function id(){var il=new RegExp("^__on([^.]+)"+hl.requote(ig)+"$"),ik;for(var ij in this){if(ik=ij.match(il)){var ii=this[ij];this.removeEventListener(ik[1],ii,ii.$);delete this[ij]}}}return ic?ia?ie:ib:ia?aH:id}var bJ=hl.map({mouseenter:"mouseover",mouseleave:"mouseout"});bJ.forEach(function(d3){if("on"+d3 in bN){bJ.remove(d3)}});function fq(h8,d3){return function(h9){var ia=hl.event;hl.event=h9;d3[0]=this.__data__;try{h8.apply(this,d3)}finally{hl.event=ia}}}function ap(h9,d3){var h8=fq(h9,d3);return function(ic){var ib=this,ia=ic.relatedTarget;if(!ia||ia!==ib&&!(ia.compareDocumentPosition(ib)&8)){h8.call(ib,ic)}}}var cc="onselectstart" in bN?null:dg(d6.style,"userSelect"),gJ=0;function bK(){var h9=".dragsuppress-"+ ++gJ,ib="click"+h9,h8=hl.select(fy).on("touchmove"+h9,w).on("dragstart"+h9,w).on("selectstart"+h9,w);if(cc){var ia=d6.style,d3=ia[cc];ia[cc]="none"}return function(ic){h8.on(h9,null);if(cc){ia[cc]=d3}if(ic){var id=function(){h8.on(ib,null)};h8.on(ib,function(){w();id()},true);setTimeout(id,0)}}}hl.mouse=function(d3){return aX(d3,ae())};var cD=/WebKit/.test(fy.navigator.userAgent)?-1:0;function aX(h9,ic){if(ic.changedTouches){ic=ic.changedTouches[0]}var ia=h9.ownerSVGElement||h9;if(ia.createSVGPoint){var d3=ia.createSVGPoint();if(cD<0&&(fy.scrollX||fy.scrollY)){ia=hl.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var h8=ia[0][0].getScreenCTM();cD=!(h8.f||h8.e);ia.remove()}if(cD){d3.x=ic.pageX,d3.y=ic.pageY}else{d3.x=ic.clientX,d3.y=ic.clientY}d3=d3.matrixTransform(h9.getScreenCTM().inverse());return[d3.x,d3.y]}var ib=h9.getBoundingClientRect();return[ic.clientX-ib.left-h9.clientLeft,ic.clientY-ib.top-h9.clientTop]}hl.touch=function(d3,ia,h8){if(arguments.length<3){h8=ia,ia=ae().changedTouches}if(ia){for(var h9=0,ic=ia.length,ib;h9<ic;++h9){if((ib=ia[h9]).identifier===h8){return aX(d3,ib)}}}};hl.behavior.drag=function(){var ib=hf(ia,"drag","dragstart","dragend"),d3=null,h8=h9(aH,hl.mouse,bT,"mousemove","mouseup"),ic=h9(hj,hl.touch,es,"touchmove","touchend");function ia(){this.on("mousedown.drag",h8).on("touchstart.drag",ic)}function h9(ij,ie,ii,ih,ig){return function(){var iq=this,ir=hl.event.target,ix=iq.parentNode,it=ib.of(iq,arguments),iv=0,ik=ij(),id=".drag"+(ik==null?"":"-"+ik),io,il=hl.select(ii()).on(ih+id,iu).on(ig+id,iw),ip=bK(),im=ie(ix,ik);if(d3){io=d3.apply(iq,arguments);io=[io.x-im[0],io.y-im[1]]}else{io=[0,0]}it({type:"dragstart"});function iu(){var iz=ie(ix,ik),iA,iy;if(!iz){return}iA=iz[0]-im[0];iy=iz[1]-im[1];iv|=iA|iy;im=iz;it({type:"drag",x:iz[0]+io[0],y:iz[1]+io[1],dx:iA,dy:iy})}function iw(){if(!ie(ix,ik)){return}il.on(ih+id,null).on(ig+id,null);ip(iv&&hl.event.target===ir);it({type:"dragend"})}}}ia.origin=function(id){if(!arguments.length){return d3}d3=id;return ia};return hl.rebind(ia,ib,"on")};function hj(){return hl.event.changedTouches[0].identifier}function es(){return hl.event.target}function bT(){return fy}hl.touches=function(d3,h8){if(arguments.length<2){h8=ae().touches}return h8?dN(h8).map(function(ia){var h9=aX(d3,ia);h9.identifier=ia.identifier;return h9}):[]};var gm=0.000001,eD=gm*gm,gd=Math.PI,f7=2*gd,gE=f7-gm,eo=gd/2,J=gd/180,hC=180/gd;function b9(d3){return d3>0?1:d3<0?-1:0}function eZ(h8,d3,h9){return(d3[0]-h8[0])*(h9[1]-h8[1])-(d3[1]-h8[1])*(h9[0]-h8[0])}function ad(d3){return d3>1?0:d3<-1?gd:Math.acos(d3)}function cf(d3){return d3>1?eo:d3<-1?-eo:Math.asin(d3)}function dV(d3){return((d3=Math.exp(d3))-1/d3)/2}function bE(d3){return((d3=Math.exp(d3))+1/d3)/2}function fs(d3){return((d3=Math.exp(2*d3))-1)/(d3+1)}function aE(d3){return(d3=Math.sin(d3/2))*d3}var ga=Math.SQRT2,aa=2,Y=4;hl.interpolateZoom=function(h8,d3){var ij=h8[0],ip=h8[1],ih=h8[2],ii=d3[0],io=d3[1],ie=d3[2];var ig=ii-ij,id=io-ip,iq=ig*ig+id*id,ir=Math.sqrt(iq),ib=(ie*ie-ih*ih+Y*iq)/(2*ih*aa*ir),ia=(ie*ie-ih*ih-Y*iq)/(2*ie*aa*ir),im=Math.log(Math.sqrt(ib*ib+1)-ib),il=Math.log(Math.sqrt(ia*ia+1)-ia),ik=il-im,h9=(ik||Math.log(ie/ih))/ga;function ic(iu){var iv=iu*h9;if(ik){var iw=bE(im),it=ih/(aa*ir)*(iw*fs(ga*iv+im)-dV(im));return[ij+it*ig,ip+it*id,ih*iw/bE(ga*iv+im)]}return[ij+iu*ig,ip+iu*id,ih*Math.exp(ga*iv)]}ic.duration=h9*1000;return ic};hl.behavior.zoom=function(){var il={x:0,y:0,k:1},iD,ii,iF,ir=[960,500],ia=fU,d3=250,iC=0,iw="mousedown.zoom",iE="mousemove.zoom",ix="mouseup.zoom",it,iA="touchstart.zoom",ih,iy=hf(h9,"zoomstart","zoom","zoomend"),iB,iz,ie,ic;function h9(iH){iH.on(iw,ib).on(g2+".zoom",im).on("dblclick.zoom",ij).on(iA,id)}h9.event=function(iH){iH.each(function(){var iJ=iy.of(this,arguments),iI=il;if(ar){hl.select(this).transition().each("start.zoom",function(){il=this.__chart__||{x:0,y:0,k:1};iu(iJ)}).tween("zoom:zoom",function(){var iM=ir[0],iL=ir[1],iK=ii?ii[0]:iM/2,iO=ii?ii[1]:iL/2,iN=hl.interpolateZoom([(iK-il.x)/il.k,(iO-il.y)/il.k,iM/il.k],[(iK-iI.x)/iI.k,(iO-iI.y)/iI.k,iM/iI.k]);return function(iR){var iP=iN(iR),iQ=iM/iP[2];this.__chart__=il={x:iK-iP[0]*iQ,y:iO-iP[1]*iQ,k:iQ};iq(iJ)}}).each("interrupt.zoom",function(){ip(iJ)}).each("end.zoom",function(){ip(iJ)})}else{this.__chart__=il;iu(iJ);iq(iJ);ip(iJ)}})};h9.translate=function(iH){if(!arguments.length){return[il.x,il.y]}il={x:+iH[0],y:+iH[1],k:il.k};ik();return h9};h9.scale=function(iH){if(!arguments.length){return il.k}il={x:il.x,y:il.y,k:+iH};ik();return h9};h9.scaleExtent=function(iH){if(!arguments.length){return ia}ia=iH==null?fU:[+iH[0],+iH[1]];return h9};h9.center=function(iH){if(!arguments.length){return iF}iF=iH&&[+iH[0],+iH[1]];return h9};h9.size=function(iH){if(!arguments.length){return ir}ir=iH&&[+iH[0],+iH[1]];return h9};h9.duration=function(iH){if(!arguments.length){return d3}d3=+iH;return h9};h9.x=function(iH){if(!arguments.length){return iz}iz=iH;iB=iH.copy();il={x:0,y:0,k:1};return h9};h9.y=function(iH){if(!arguments.length){return ic}ic=iH;ie=iH.copy();il={x:0,y:0,k:1};return h9};function h8(iH){return[(iH[0]-il.x)/il.k,(iH[1]-il.y)/il.k]}function iv(iH){return[iH[0]*il.k+il.x,iH[1]*il.k+il.y]}function ig(iH){il.k=Math.max(ia[0],Math.min(ia[1],iH))}function iG(iI,iH){iH=iv(iH);il.x+=iI[0]-iH[0];il.y+=iI[1]-iH[1]}function io(iJ,iK,iH,iI){iJ.__chart__={x:il.x,y:il.y,k:il.k};ig(Math.pow(2,iI));iG(ii=iK,iH);iJ=hl.select(iJ);if(d3>0){iJ=iJ.transition().duration(d3)}iJ.call(h9.event)}function ik(){if(iz){iz.domain(iB.range().map(function(iH){return(iH-il.x)/il.k}).map(iB.invert))}if(ic){ic.domain(ie.range().map(function(iH){return(iH-il.y)/il.k}).map(ie.invert))}}function iu(iH){if(!iC++){iH({type:"zoomstart"})}}function iq(iH){ik();iH({type:"zoom",scale:il.k,translate:[il.x,il.y]})}function ip(iH){if(!--iC){iH({type:"zoomend"})}ii=null}function ib(){var iI=this,iK=hl.event.target,iL=iy.of(iI,arguments),iO=0,iM=hl.select(fy).on(iE,iN).on(ix,iP),iJ=h8(hl.mouse(iI)),iH=bK();cU(iI);iu(iL);function iN(){iO=1;iG(hl.mouse(iI),iJ);iq(iL)}function iP(){iM.on(iE,null).on(ix,null);iH(iO&&hl.event.target===iK);ip(iL)}}function id(){var iN=this,iP=iy.of(iN,arguments),iL={},iR=0,iO,iI=".zoom-"+hl.event.changedTouches[0].identifier,iJ="touchmove"+iI,iV="touchend"+iI,iM=[],iS=hl.select(iN),iK=bK();iQ();iu(iP);iS.on(iw,null).on(iA,iQ);function iH(){var iW=hl.touches(iN);iO=il.k;iW.forEach(function(iX){if(iX.identifier in iL){iL[iX.identifier]=h8(iX)}});return iW}function iQ(){var i3=hl.event.target;hl.select(i3).on(iJ,iT).on(iV,iU);iM.push(i3);var i0=hl.event.changedTouches;for(var i1=0,iZ=i0.length;i1<iZ;++i1){iL[i0[i1].identifier]=null}var i2=iH(),iY=Date.now();if(i2.length===1){if(iY-ih<500){var iX=i2[0];io(iN,iX,iL[iX.identifier],Math.floor(Math.log(il.k)/Math.LN2)+1);w()}ih=iY}else{if(i2.length>1){var iX=i2[0],iW=i2[1],i5=iX[0]-iW[0],i4=iX[1]-iW[1];iR=i5*i5+i4*i4}}}function iT(){var i0=hl.touches(iN),i4,iY,i3,iX;cU(iN);for(var iZ=0,iW=i0.length;iZ<iW;++iZ,iX=null){i3=i0[iZ];if(iX=iL[i3.identifier]){if(iY){break}i4=i3,iY=iX}}if(iX){var i2=(i2=i3[0]-i4[0])*i2+(i2=i3[1]-i4[1])*i2,i1=iR&&Math.sqrt(i2/iR);i4=[(i4[0]+i3[0])/2,(i4[1]+i3[1])/2];iY=[(iY[0]+iX[0])/2,(iY[1]+iX[1])/2];ig(i1*iO)}ih=null;iG(i4,iY);iq(iP)}function iU(){if(hl.event.touches.length){var iY=hl.event.changedTouches;for(var iX=0,iZ=iY.length;iX<iZ;++iX){delete iL[iY[iX].identifier]}for(var iW in iL){return void iH()}}hl.selectAll(iM).on(iI,null);iS.on(iw,ib).on(iA,id);iK();ip(iP)}}function im(){var iH=iy.of(this,arguments);if(it){clearTimeout(it)}else{iD=h8(ii=iF||hl.mouse(this)),cU(this),iu(iH)}it=setTimeout(function(){it=null;ip(iH)},50);w();ig(Math.pow(2,cx()*0.002)*il.k);iG(ii,iD);iq(iH)}function ij(){var iI=hl.mouse(this),iH=Math.log(il.k)/Math.LN2;io(this,iI,h8(iI),hl.event.shiftKey?Math.ceil(iH)-1:Math.floor(iH)+1)}return hl.rebind(h9,iy,"on")};var fU=[0,Infinity];var cx,g2="onwheel" in bN?(cx=function(){return -hl.event.deltaY*(hl.event.deltaMode?120:1)},"wheel"):"onmousewheel" in bN?(cx=function(){return hl.event.wheelDelta},"mousewheel"):(cx=function(){return -hl.event.detail},"MozMousePixelScroll");hl.color=gV;function gV(){}gV.prototype.toString=function(){return this.rgb()+""};hl.hsl=eH;function eH(h9,h8,d3){return this instanceof eH?void (this.h=+h9,this.s=+h8,this.l=+d3):arguments.length<2?h9 instanceof eH?new eH(h9.h,h9.s,h9.l):aW(""+h9,gw,eH):new eH(h9,h8,d3)}var ex=eH.prototype=new gV();ex.brighter=function(d3){d3=Math.pow(0.7,arguments.length?d3:1);return new eH(this.h,this.s,this.l/d3)};ex.darker=function(d3){d3=Math.pow(0.7,arguments.length?d3:1);return new eH(this.h,this.s,d3*this.l)};ex.rgb=function(){return bg(this.h,this.s,this.l)};function bg(ic,ib,d3){var ia,h9;ic=isNaN(ic)?0:(ic%=360)<0?ic+360:ic;ib=isNaN(ib)?0:ib<0?0:ib>1?1:ib;d3=d3<0?0:d3>1?1:d3;h9=d3<=0.5?d3*(1+ib):d3+ib-d3*ib;ia=2*d3-h9;function h8(ie){if(ie>360){ie-=360}else{if(ie<0){ie+=360}}if(ie<60){return ia+(h9-ia)*ie/60}if(ie<180){return h9}if(ie<240){return ia+(h9-ia)*(240-ie)/60}return ia}function id(ie){return Math.round(h8(ie)*255)}return new eq(id(ic+120),id(ic),id(ic-120))}hl.hcl=bC;function bC(h8,h9,d3){return this instanceof bC?void (this.h=+h8,this.c=+h9,this.l=+d3):arguments.length<2?h8 instanceof bC?new bC(h8.h,h8.c,h8.l):h8 instanceof cn?gG(h8.l,h8.a,h8.b):gG((h8=dZ((h8=hl.rgb(h8)).r,h8.g,h8.b)).l,h8.a,h8.b):new bC(h8,h9,d3)}var hd=bC.prototype=new gV();hd.brighter=function(d3){return new bC(this.h,this.c,Math.min(100,this.l+bs*(arguments.length?d3:1)))};hd.darker=function(d3){return new bC(this.h,this.c,Math.max(0,this.l-bs*(arguments.length?d3:1)))};hd.rgb=function(){return bD(this.h,this.c,this.l).rgb()};function bD(h8,h9,d3){if(isNaN(h8)){h8=0}if(isNaN(h9)){h9=0}return new cn(d3,Math.cos(h8*=J)*h9,Math.sin(h8)*h9)}hl.lab=cn;function cn(h9,h8,d3){return this instanceof cn?void (this.l=+h9,this.a=+h8,this.b=+d3):arguments.length<2?h9 instanceof cn?new cn(h9.l,h9.a,h9.b):h9 instanceof bC?bD(h9.h,h9.c,h9.l):dZ((h9=eq(h9)).r,h9.g,h9.b):new cn(h9,h8,d3)}var bs=18;var bh=0.95047,bf=1,bc=1.08883;var gx=cn.prototype=new gV();gx.brighter=function(d3){return new cn(Math.min(100,this.l+bs*(arguments.length?d3:1)),this.a,this.b)};gx.darker=function(d3){return new cn(Math.max(0,this.l-bs*(arguments.length?d3:1)),this.a,this.b)};gx.rgb=function(){return aC(this.l,this.a,this.b)};function aC(ia,h9,h8){var ic=(ia+16)/116,d3=ic+h9/500,ib=ic-h8/200;d3=g0(d3)*bh;ic=g0(ic)*bf;ib=g0(ib)*bc;return new eq(h(3.2404542*d3-1.5371385*ic-0.4985314*ib),h(-0.969266*d3+1.8760108*ic+0.041556*ib),h(0.0556434*d3-0.2040259*ic+1.0572252*ib))}function gG(h9,h8,d3){return h9>0?new bC(Math.atan2(d3,h8)*hC,Math.sqrt(h8*h8+d3*d3),h9):new bC(NaN,NaN,h9)}function g0(d3){return d3>0.206893034?d3*d3*d3:(d3-4/29)/7.787037}function gp(d3){return d3>0.008856?Math.pow(d3,1/3):7.787037*d3+4/29}function h(d3){return Math.round(255*(d3<=0.00304?12.92*d3:1.055*Math.pow(d3,1/2.4)-0.055))}hl.rgb=eq;function eq(h9,h8,d3){return this instanceof eq?void (this.r=~~h9,this.g=~~h8,this.b=~~d3):arguments.length<2?h9 instanceof eq?new eq(h9.r,h9.g,h9.b):aW(""+h9,eq,bg):new eq(h9,h8,d3)}function de(d3){return new eq(d3>>16,d3>>8&255,d3&255)}function dv(d3){return de(d3)+""}var eI=eq.prototype=new gV();eI.brighter=function(h8){h8=Math.pow(0.7,arguments.length?h8:1);var ib=this.r,ia=this.g,d3=this.b,h9=30;if(!ib&&!ia&&!d3){return new eq(h9,h9,h9)}if(ib&&ib<h9){ib=h9}if(ia&&ia<h9){ia=h9}if(d3&&d3<h9){d3=h9}return new eq(Math.min(255,ib/h8),Math.min(255,ia/h8),Math.min(255,d3/h8))};eI.darker=function(d3){d3=Math.pow(0.7,arguments.length?d3:1);return new eq(d3*this.r,d3*this.g,d3*this.b)};eI.hsl=function(){return gw(this.r,this.g,this.b)};eI.toString=function(){return"#"+cv(this.r)+cv(this.g)+cv(this.b)};function cv(d3){return d3<16?"0"+Math.max(0,d3).toString(16):Math.min(255,d3).toString(16)}function aW(ic,ia,id){var d3=0,h9=0,ib=0,ig,ie,h8;ig=/([a-z]+)\((.*)\)/i.exec(ic);if(ig){ie=ig[2].split(",");switch(ig[1]){case"hsl":return id(parseFloat(ie[0]),parseFloat(ie[1])/100,parseFloat(ie[2])/100);case"rgb":return ia(eW(ie[0]),eW(ie[1]),eW(ie[2]))}}if(h8=am.get(ic)){return ia(h8.r,h8.g,h8.b)}if(ic!=null&&ic.charAt(0)==="#"&&!isNaN(h8=parseInt(ic.slice(1),16))){if(ic.length===4){d3=(h8&3840)>>4;d3=d3>>4|d3;h9=h8&240;h9=h9>>4|h9;ib=h8&15;ib=ib<<4|ib}else{if(ic.length===7){d3=(h8&16711680)>>16;h9=(h8&65280)>>8;ib=h8&255}}}return ia(d3,h9,ib)}function gw(d3,ib,id){var h9=Math.min(d3/=255,ib/=255,id/=255),ie=Math.max(d3,ib,id),ic=ie-h9,ia,ig,h8=(ie+h9)/2;if(ic){ig=h8<0.5?ic/(ie+h9):ic/(2-ie-h9);if(d3==ie){ia=(ib-id)/ic+(ib<id?6:0)}else{if(ib==ie){ia=(id-d3)/ic+2}else{ia=(d3-ib)/ic+4}}ia*=60}else{ia=NaN;ig=h8>0&&h8<1?0:ia}return new eH(ia,ig,h8)}function dZ(ia,h9,h8){ia=dC(ia);h9=dC(h9);h8=dC(h8);var d3=gp((0.4124564*ia+0.3575761*h9+0.1804375*h8)/bh),ic=gp((0.2126729*ia+0.7151522*h9+0.072175*h8)/bf),ib=gp((0.0193339*ia+0.119192*h9+0.9503041*h8)/bc);return cn(116*ic-16,500*(d3-ic),200*(ic-ib))}function dC(d3){return(d3/=255)<=0.04045?d3/12.92:Math.pow((d3+0.055)/1.055,2.4)}function eW(h8){var d3=parseFloat(h8);return h8.charAt(h8.length-1)==="%"?Math.round(d3*2.55):d3}var am=hl.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});am.forEach(function(d3,h8){am.set(d3,de(h8))});function R(d3){return typeof d3==="function"?d3:function(){return d3}}hl.functor=R;function gk(d3){return d3}hl.xhr=X(gk);function X(d3){return function(h8,h9,ia){if(arguments.length===2&&typeof h9==="function"){ia=h9,h9=null}return hV(h8,h9,d3,ia)}}function hV(d3,h9,ib,ig){var ih={},ie=hl.dispatch("beforesend","progress","load","error"),ia={},ic=new XMLHttpRequest(),id=null;if(fy.XDomainRequest&&!("withCredentials" in ic)&&/^(http(s)?:)?\/\//.test(d3)){ic=new XDomainRequest()}"onload" in ic?ic.onload=ic.onerror=h8:ic.onreadystatechange=function(){ic.readyState>3&&h8()};function h8(){var ij=ic.status,ii;if(!ij&&fI(ic)||ij>=200&&ij<300||ij===304){try{ii=ib.call(ih,ic)}catch(ik){ie.error.call(ih,ik);return}ie.load.call(ih,ii)}else{ie.error.call(ih,ic)}}ic.onprogress=function(ii){var ij=hl.event;hl.event=ii;try{ie.progress.call(ih,ic)}finally{hl.event=ij}};ih.header=function(ii,ij){ii=(ii+"").toLowerCase();if(arguments.length<2){return ia[ii]}if(ij==null){delete ia[ii]}else{ia[ii]=ij+""}return ih};ih.mimeType=function(ii){if(!arguments.length){return h9}h9=ii==null?null:ii+"";return ih};ih.responseType=function(ii){if(!arguments.length){return id}id=ii;return ih};ih.response=function(ii){ib=ii;return ih};["get","post"].forEach(function(ii){ih[ii]=function(){return ih.send.apply(ih,[ii].concat(dN(arguments)))}});ih.send=function(il,ij,ik){if(arguments.length===2&&typeof ij==="function"){ik=ij,ij=null}ic.open(il,d3,true);if(h9!=null&&!("accept" in ia)){ia.accept=h9+",*/*"}if(ic.setRequestHeader){for(var ii in ia){ic.setRequestHeader(ii,ia[ii])}}if(h9!=null&&ic.overrideMimeType){ic.overrideMimeType(h9)}if(id!=null){ic.responseType=id}if(ik!=null){ih.on("error",ik).on("load",function(im){ik(null,im)})}ie.beforesend.call(ih,ic);ic.send(ij==null?null:ij);return ih};ih.abort=function(){ic.abort();return ih};hl.rebind(ih,ie,"on");return ig==null?ih:ih.get(d5(ig))}function d5(d3){return d3.length===1?function(h8,h9){d3(h8==null?h9:null)}:d3}function fI(h8){var d3=h8.responseType;return d3&&d3!=="text"?h8.response:h8.responseText}hl.dsv=function(d3,h8){var ia=new RegExp('["'+d3+"\n]"),ic=d3.charCodeAt(0);function ie(ih,ij,ik){if(arguments.length<3){ik=ij,ij=null}var ii=hV(ih,h8,ij==null?ib:h9(ij),ik);ii.row=function(il){return arguments.length?ii.response((ij=il)==null?ib:h9(il)):ij};return ii}function ib(ih){return ie.parse(ih.responseText)}function h9(ih){return function(ii){return ie.parse(ii.responseText,ih)}}ie.parse=function(ij,ih){var ii;return ie.parseRows(ij,function(im,il){if(ii){return ii(im,il-1)}var ik=new Function("d","return {"+im.map(function(io,ip){return JSON.stringify(io)+": d["+ip+"]"}).join(",")+"}");ii=ih?function(ip,io){return ih(ik(ip),io)}:ik})};ie.parseRows=function(ir,il){var ii={},ik={},iu=[],im=ir.length,iq=0,ih=0,it,io;function ij(){if(iq>=im){return ik}if(io){return io=false,ii}var iw=iq;if(ir.charCodeAt(iw)===34){var ix=iw;while(ix++<im){if(ir.charCodeAt(ix)===34){if(ir.charCodeAt(ix+1)!==34){break}++ix}}iq=ix+2;var iy=ir.charCodeAt(ix+1);if(iy===13){io=true;if(ir.charCodeAt(ix+2)===10){++iq}}else{if(iy===10){io=true}}return ir.slice(iw+1,ix).replace(/""/g,'"')}while(iq<im){var iy=ir.charCodeAt(iq++),iv=1;if(iy===10){io=true}else{if(iy===13){io=true;if(ir.charCodeAt(iq)===10){++iq,++iv}}else{if(iy!==ic){continue}}}return ir.slice(iw,iq-iv)}return ir.slice(iw)}while((it=ij())!==ik){var ip=[];while(it!==ii&&it!==ik){ip.push(it);it=ij()}if(il&&(ip=il(ip,ih++))==null){continue}iu.push(ip)}return iu};ie.format=function(ij){if(Array.isArray(ij[0])){return ie.formatRows(ij)}var ii=new dr(),ih=[];ij.forEach(function(il){for(var ik in il){if(!ii.has(ik)){ih.push(ii.add(ik))}}});return[ih.map(id).join(d3)].concat(ij.map(function(ik){return ih.map(function(il){return id(ik[il])}).join(d3)})).join("\n")};ie.formatRows=function(ih){return ih.map(ig).join("\n")};function ig(ih){return ih.map(id).join(d3)}function id(ih){return ia.test(ih)?'"'+ih.replace(/\"/g,'""')+'"':ih}return ie};hl.csv=hl.dsv(",","text/csv");hl.tsv=hl.dsv("	","text/tab-separated-values");var d0,af,cq,ff,dj,hr=fy[dg(fy,"requestAnimationFrame")]||function(d3){setTimeout(d3,17)};hl.timer=function(ic,d3,h9){var ib=arguments.length;if(ib<2){d3=0}if(ib<3){h9=Date.now()}var h8=h9+d3,ia={c:ic,t:h8,f:false,n:null};if(af){af.n=ia}else{d0=ia}af=ia;if(!cq){ff=clearTimeout(ff);cq=1;hr(hs)}};function hs(){var h8=bF(),d3=ac()-h8;if(d3>24){if(isFinite(d3)){clearTimeout(ff);ff=setTimeout(hs,d3)}cq=0}else{cq=1;hr(hs)}}hl.timer.flush=function(){bF();ac()};function bF(){var d3=Date.now();dj=d0;while(dj){if(d3>=dj.t){dj.f=dj.c(d3-dj.t)}dj=dj.n}return d3}function ac(){var h8,d3=d0,h9=Infinity;while(d3){if(d3.f){d3=h8?h8.n=d3.n:d0=d3.n}else{if(d3.t<h9){h9=d3.t}d3=(h8=d3).n}}af=h8;return h9}function ee(d3,h8){return h8-(d3?Math.ceil(Math.log(d3)/Math.LN10):1)}hl.round=function(d3,h8){return h8?Math.round(d3*(h8=Math.pow(10,h8)))/h8:Math.round(d3)};var cu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(dM);hl.formatPrefix=function(h9,d3){var h8=0;if(h9){if(h9<0){h9*=-1}if(d3){h9=hl.round(h9,ee(h9,d3))}h8=1+Math.floor(1e-12+Math.log(h9)/Math.LN10);h8=Math.max(-24,Math.min(24,Math.floor((h8-1)/3)*3))}return cu[8+h8/3]};function dM(h9,h8){var d3=Math.pow(10,cG(8-h8)*3);return{scale:h8>8?function(ia){return ia/d3}:function(ia){return ia*d3},symbol:h9}}function bo(d3){var ia=d3.decimal,ic=d3.thousands,ib=d3.grouping,h9=d3.currency,h8=ib&&ic?function(ik,ih){var ig=ik.length,ie=[],id=0,ij=ib[0],ii=0;while(ig>0&&ij>0){if(ii+ij+1>ih){ij=Math.max(1,ih-ii)}ie.push(ik.substring(ig-=ij,ig+ij));if((ii+=ij+1)>ih){break}ij=ib[id=(id+1)%ib.length]}return ie.reverse().join(ic)}:gk;return function(it){var im=cz.exec(it),iv=im[1]||" ",ip=im[2]||">",ie=im[3]||"-",ih=im[4]||"",ii=im[5],id=+im[6],iw=im[7],il=im[8],iq=im[9],ig=1,io="",iu="",ik=false,ir=true;if(il){il=+il.substring(1)}if(ii||iv==="0"&&ip==="="){ii=iv="0";ip="="}switch(iq){case"n":iw=true;iq="g";break;case"%":ig=100;iu="%";iq="f";break;case"p":ig=100;iu="%";iq="r";break;case"b":case"o":case"x":case"X":if(ih==="#"){io="0"+iq.toLowerCase()}case"c":ir=false;case"d":ik=true;il=0;break;case"s":ig=-1;iq="r";break}if(ih==="$"){io=h9[0],iu=h9[1]}if(iq=="r"&&!il){iq="g"}if(il!=null){if(iq=="g"){il=Math.max(1,Math.min(21,il))}else{if(iq=="e"||iq=="f"){il=Math.max(0,Math.min(20,il))}}}iq=x.get(iq)||bn;var ij=ii&&iw;return function(iF){var iD=iu;if(ik&&iF%1){return""}var iz=iF<0||iF===0&&1/iF<0?(iF=-iF,"-"):ie==="-"?"":ie;if(ig<0){var iG=hl.formatPrefix(iF,il);iF=iG.scale(iF);iD=iG.symbol+iu}else{iF*=ig}iF=iq(iF,il);var iB=iF.lastIndexOf("."),iE,ix;if(iB<0){var iA=ir?iF.lastIndexOf("e"):-1;if(iA<0){iE=iF,ix=""}else{iE=iF.substring(0,iA),ix=iF.substring(iA)}}else{iE=iF.substring(0,iB);ix=ia+iF.substring(iB+1)}if(!ii&&iw){iE=h8(iE,Infinity)}var iy=io.length+iE.length+ix.length+(ij?0:iz.length),iC=iy<id?new Array(iy=id-iy+1).join(iv):"";if(ij){iE=h8(iC+iE,iC.length?id-ix.length:Infinity)}iz+=io;iF=iE+ix;return(ip==="<"?iz+iF+iC:ip===">"?iC+iz+iF:ip==="^"?iC.substring(0,iy>>=1)+iz+iF+iC.substring(iy):iz+(ij?iF:iC+iF))+iD}}}var cz=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var x=hl.map({b:function(d3){return d3.toString(2)},c:function(d3){return String.fromCharCode(d3)},o:function(d3){return d3.toString(8)},x:function(d3){return d3.toString(16)},X:function(d3){return d3.toString(16).toUpperCase()},g:function(d3,h8){return d3.toPrecision(h8)},e:function(d3,h8){return d3.toExponential(h8)},f:function(d3,h8){return d3.toFixed(h8)},r:function(d3,h8){return(d3=hl.round(d3,ee(d3,h8))).toFixed(Math.max(0,Math.min(20,ee(d3*(1+1e-15),h8))))}});function bn(d3){return d3+""}var fG=hl.time={},hp=Date;function cl(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}cl.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){f0.setUTCDate.apply(this._,arguments)},setDay:function(){f0.setUTCDay.apply(this._,arguments)},setFullYear:function(){f0.setUTCFullYear.apply(this._,arguments)},setHours:function(){f0.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){f0.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){f0.setUTCMinutes.apply(this._,arguments)},setMonth:function(){f0.setUTCMonth.apply(this._,arguments)},setSeconds:function(){f0.setUTCSeconds.apply(this._,arguments)},setTime:function(){f0.setTime.apply(this._,arguments)}};var f0=Date.prototype;function c0(ic,d3,h8){function ig(ih){var ij=ic(ih),ii=ia(ij,1);return ih-ij<ii-ih?ij:ii}function ie(ih){d3(ih=ic(new hp(ih-1)),1);return ih}function ia(ii,ih){d3(ii=new hp(+ii),ih);return ii}function ib(ij,ii,ih){var ik=ie(ij),il=[];if(ih>1){while(ik<ii){if(!(h8(ik)%ih)){il.push(new Date(+ik))}d3(ik,1)}}else{while(ik<ii){il.push(new Date(+ik)),d3(ik,1)}}return il}function h9(ik,ij,ii){try{hp=cl;var ih=new cl();ih._=ik;return ib(ih,ij,ii)}finally{hp=Date}}ic.floor=ic;ic.round=ig;ic.ceil=ie;ic.offset=ia;ic.range=ib;var id=ic.utc=dR(ic);id.floor=id;id.round=dR(ig);id.ceil=dR(ie);id.offset=dR(ia);id.range=h9;return ic}function dR(d3){return function(h9,h8){try{hp=cl;var ia=new cl();ia._=h9;return d3(ia,h8)._}finally{hp=Date}}}fG.year=c0(function(d3){d3=fG.day(d3);d3.setMonth(0,1);return d3},function(d3,h8){d3.setFullYear(d3.getFullYear()+h8)},function(d3){return d3.getFullYear()});fG.years=fG.year.range;fG.years.utc=fG.year.utc.range;fG.day=c0(function(h8){var d3=new hp(2000,0);d3.setFullYear(h8.getFullYear(),h8.getMonth(),h8.getDate());return d3},function(d3,h8){d3.setDate(d3.getDate()+h8)},function(d3){return d3.getDate()-1});fG.days=fG.day.range;fG.days.utc=fG.day.utc.range;fG.dayOfYear=function(d3){var h8=fG.year(d3);return Math.floor((d3-h8-(d3.getTimezoneOffset()-h8.getTimezoneOffset())*60000)/86400000)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(h8,h9){h9=7-h9;var d3=fG[h8]=c0(function(ia){(ia=fG.day(ia)).setDate(ia.getDate()-(ia.getDay()+h9)%7);return ia},function(ia,ib){ia.setDate(ia.getDate()+Math.floor(ib)*7)},function(ib){var ia=fG.year(ib).getDay();return Math.floor((fG.dayOfYear(ib)+(ia+h9)%7)/7)-(ia!==h9)});fG[h8+"s"]=d3.range;fG[h8+"s"].utc=d3.utc.range;fG[h8+"OfYear"]=function(ib){var ia=fG.year(ib).getDay();return Math.floor((fG.dayOfYear(ib)+(ia+h9)%7)/7)}});fG.week=fG.sunday;fG.weeks=fG.sunday.range;fG.weeks.utc=fG.sunday.utc.range;fG.weekOfYear=fG.sundayOfYear;function aq(ir){var ix=ir.dateTime,il=ir.date,h8=ir.time,ig=ir.periods,d3=ir.days,ih=ir.shortDays,ik=ir.months,ib=ir.shortMonths;function iw(iE){var iG=iE.length;function iF(iJ){var iI=[],iK=-1,iH=0,iN,iM,iL;while(++iK<iG){if(iE.charCodeAt(iK)===37){iI.push(iE.slice(iH,iK));if((iM=aO[iN=iE.charAt(++iK)])!=null){iN=iE.charAt(++iK)}if(iL=iu[iN]){iN=iL(iJ,iM==null?iN==="e"?" ":"0":iM)}iI.push(iN);iH=iK+1}}iI.push(iE.slice(iH,iK));return iI.join("")}iF.parse=function(iJ){var iL={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},iK=ip(iL,iE,iJ,0);if(iK!=iJ.length){return null}if("p" in iL){iL.H=iL.H%12+iL.p*12}var iH=iL.Z!=null&&hp!==cl,iI=new (iH?cl:hp)();if("j" in iL){iI.setFullYear(iL.y,0,iL.j)}else{if("w" in iL&&("W" in iL||"U" in iL)){iI.setFullYear(iL.y,0,1);iI.setFullYear(iL.y,0,"W" in iL?(iL.w+6)%7+iL.W*7-(iI.getDay()+5)%7:iL.w+iL.U*7-(iI.getDay()+6)%7)}else{iI.setFullYear(iL.y,iL.m,iL.d)}}iI.setHours(iL.H+(iL.Z/100|0),iL.M+iL.Z%100,iL.S,iL.L);return iH?iI._:iI};iF.toString=function(){return iE};return iF}function ip(iH,iM,iK,iI){var iL,iE,iN,iJ=0,iF=iM.length,iG=iK.length;while(iJ<iF){if(iI>=iG){return -1}iL=iM.charCodeAt(iJ++);if(iL===37){iN=iM.charAt(iJ++);iE=it[iN in aO?iM.charAt(iJ++):iN];if(!iE||(iI=iE(iH,iK,iI))<0){return -1}}else{if(iL!=iK.charCodeAt(iI++)){return -1}}}return iI}iw.utc=function(iF){var iE=iw(iF);function iG(iH){try{hp=cl;var iI=new hp();iI._=iH;return iE(iI)}finally{hp=Date}}iG.parse=function(iI){try{hp=cl;var iH=iE.parse(iI);return iH&&iH._}finally{hp=Date}};iG.toString=iE.toString;return iG};iw.multi=iw.utc.multi=go;var im=hl.map(),iA=cK(d3),iB=gU(d3),iz=cK(ih),ic=gU(ih),iC=cK(ik),iD=gU(ik),ii=cK(ib),ia=gU(ib);ig.forEach(function(iF,iE){im.set(iF.toLowerCase(),iE)});var iu={a:function(iE){return ih[iE.getDay()]},A:function(iE){return d3[iE.getDay()]},b:function(iE){return ib[iE.getMonth()]},B:function(iE){return ik[iE.getMonth()]},c:iw(ix),d:function(iF,iE){return dx(iF.getDate(),iE,2)},e:function(iF,iE){return dx(iF.getDate(),iE,2)},H:function(iF,iE){return dx(iF.getHours(),iE,2)},I:function(iF,iE){return dx(iF.getHours()%12||12,iE,2)},j:function(iF,iE){return dx(1+fG.dayOfYear(iF),iE,3)},L:function(iF,iE){return dx(iF.getMilliseconds(),iE,3)},m:function(iF,iE){return dx(iF.getMonth()+1,iE,2)},M:function(iF,iE){return dx(iF.getMinutes(),iE,2)},p:function(iE){return ig[+(iE.getHours()>=12)]},S:function(iF,iE){return dx(iF.getSeconds(),iE,2)},U:function(iF,iE){return dx(fG.sundayOfYear(iF),iE,2)},w:function(iE){return iE.getDay()},W:function(iF,iE){return dx(fG.mondayOfYear(iF),iE,2)},x:iw(il),X:iw(h8),y:function(iF,iE){return dx(iF.getFullYear()%100,iE,2)},Y:function(iF,iE){return dx(iF.getFullYear()%10000,iE,4)},Z:fV,"%":function(){return"%"}};var it={a:ij,A:h9,b:iy,B:iq,c:ie,d:b3,e:b3,H:aQ,I:aQ,j:F,L:gX,m:gI,M:cV,p:io,S:dW,U:bu,w:dT,W:dG,x:iv,X:id,y:O,Y:bA,Z:a4,"%":ft};function ij(iF,iE,iG){iz.lastIndex=0;var iH=iz.exec(iE.slice(iG));return iH?(iF.w=ic.get(iH[0].toLowerCase()),iG+iH[0].length):-1}function h9(iF,iE,iG){iA.lastIndex=0;var iH=iA.exec(iE.slice(iG));return iH?(iF.w=iB.get(iH[0].toLowerCase()),iG+iH[0].length):-1}function iy(iF,iE,iG){ii.lastIndex=0;var iH=ii.exec(iE.slice(iG));return iH?(iF.m=ia.get(iH[0].toLowerCase()),iG+iH[0].length):-1}function iq(iF,iE,iG){iC.lastIndex=0;var iH=iC.exec(iE.slice(iG));return iH?(iF.m=iD.get(iH[0].toLowerCase()),iG+iH[0].length):-1}function ie(iF,iE,iG){return ip(iF,iu.c.toString(),iE,iG)}function iv(iF,iE,iG){return ip(iF,iu.x.toString(),iE,iG)}function id(iF,iE,iG){return ip(iF,iu.X.toString(),iE,iG)}function io(iF,iE,iG){var iH=im.get(iE.slice(iG,iG+=2).toLowerCase());return iH==null?-1:(iF.p=iH,iG)}return iw}var aO={"-":"",_:" ","0":"0"},f5=/^\s*\d+/,e7=/^%/;function dx(ib,ic,h9){var d3=ib<0?"-":"",h8=(d3?-ib:ib)+"",ia=h8.length;return d3+(ia<h9?new Array(h9-ia+1).join(ic)+h8:h8)}function cK(d3){return new RegExp("^(?:"+d3.map(hl.requote).join("|")+")","i")}function gU(h9){var h8=new aI(),d3=-1,ia=h9.length;while(++d3<ia){h8.set(h9[d3].toLowerCase(),d3)}return h8}function dT(h8,d3,h9){f5.lastIndex=0;var ia=f5.exec(d3.slice(h9,h9+1));return ia?(h8.w=+ia[0],h9+ia[0].length):-1}function bu(h8,d3,h9){f5.lastIndex=0;var ia=f5.exec(d3.slice(h9));return ia?(h8.U=+ia[0],h9+ia[0].length):-1}function dG(h8,d3,h9){f5.lastIndex=0;var ia=f5.exec(d3.slice(h9));return ia?(h8.W=+ia[0],h9+ia[0].length):-1}function bA(h8,d3,h9){f5.lastIndex=0;var ia=f5.exec(d3.slice(h9,h9+4));return ia?(h8.y=+ia[0],h9+ia[0].length):-1}function O(h8,d3,h9){f5.lastIndex=0;var ia=f5.exec(d3.slice(h9,h9+2));return ia?(h8.y=c2(+ia[0]),h9+ia[0].length):-1}function a4(h8,d3,h9){return/^[+-]\d{4}$/.test(d3=d3.slice(h9,h9+5))?(h8.Z=-d3,h9+5):-1}function c2(d3){return d3+(d3>68?1900:2000)}function gI(h8,d3,h9){f5.lastIndex=0;var ia=f5.exec(d3.slice(h9,h9+2));return ia?(h8.m=ia[0]-1,h9+ia[0].length):-1}function b3(h8,d3,h9){f5.lastIndex=0;var ia=f5.exec(d3.slice(h9,h9+2));return ia?(h8.d=+ia[0],h9+ia[0].length):-1}function F(h8,d3,h9){f5.lastIndex=0;var ia=f5.exec(d3.slice(h9,h9+3));return ia?(h8.j=+ia[0],h9+ia[0].length):-1}function aQ(h8,d3,h9){f5.lastIndex=0;var ia=f5.exec(d3.slice(h9,h9+2));return ia?(h8.H=+ia[0],h9+ia[0].length):-1}function cV(h8,d3,h9){f5.lastIndex=0;var ia=f5.exec(d3.slice(h9,h9+2));return ia?(h8.M=+ia[0],h9+ia[0].length):-1}function dW(h8,d3,h9){f5.lastIndex=0;var ia=f5.exec(d3.slice(h9,h9+2));return ia?(h8.S=+ia[0],h9+ia[0].length):-1}function gX(h8,d3,h9){f5.lastIndex=0;var ia=f5.exec(d3.slice(h9,h9+3));return ia?(h8.L=+ia[0],h9+ia[0].length):-1}function fV(ib){var ia=ib.getTimezoneOffset(),h9=ia>0?"-":"+",h8=cG(ia)/60|0,d3=cG(ia)%60;return h9+dx(h8,"0",2)+dx(d3,"0",2)}function ft(h8,d3,h9){e7.lastIndex=0;var ia=e7.exec(d3.slice(h9,h9+1));return ia?h9+ia[0].length:-1}function go(d3){var h9=d3.length,h8=-1;while(++h8<h9){d3[h8][0]=this(d3[h8][0])}return function(ia){var ib=0,ic=d3[ib];while(!ic[1](ia)){ic=d3[++ib]}return ic[0](ia)}}hl.locale=function(d3){return{numberFormat:bo(d3),timeFormat:aq(d3)}};var dh=hl.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});hl.format=dh.numberFormat;hl.geo={};function fb(){}fb.prototype={s:0,t:0,add:function(d3){dp(d3,this.t,hM);dp(hM.s,this.s,this);if(this.s){this.t+=hM.t}else{this.s=hM.t}},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var hM=new fb();function dp(ia,h9,ic){var h8=ic.s=ia+h9,d3=h8-ia,ib=h8-d3;ic.t=ia-ib+(h9-d3)}hl.geo.stream=function(d3,h8){if(d3&&A.hasOwnProperty(d3.type)){A[d3.type](d3,h8)}else{aP(d3,h8)}};function aP(h8,d3){if(h8&&eR.hasOwnProperty(h8.type)){eR[h8.type](h8,d3)}}var A={Feature:function(d3,h8){aP(d3.geometry,h8)},FeatureCollection:function(d3,ia){var h9=d3.features,h8=-1,ib=h9.length;while(++h8<ib){aP(h9[h8].geometry,ia)}}};var eR={Sphere:function(d3,h8){h8.sphere()},Point:function(d3,h8){d3=d3.coordinates;h8.point(d3[0],d3[1],d3[2])},MultiPoint:function(d3,h9){var ia=d3.coordinates,h8=-1,ib=ia.length;while(++h8<ib){d3=ia[h8],h9.point(d3[0],d3[1],d3[2])}},LineString:function(d3,h8){co(d3.coordinates,h8,0)},MultiLineString:function(d3,h9){var ia=d3.coordinates,h8=-1,ib=ia.length;while(++h8<ib){co(ia[h8],h9,0)}},Polygon:function(d3,h8){hc(d3.coordinates,h8)},MultiPolygon:function(d3,h9){var ia=d3.coordinates,h8=-1,ib=ia.length;while(++h8<ib){hc(ia[h8],h9)}},GeometryCollection:function(d3,ia){var h9=d3.geometries,h8=-1,ib=h9.length;while(++h8<ib){aP(h9[h8],ia)}}};function co(ia,h9,d3){var h8=-1,ic=ia.length-d3,ib;h9.lineStart();while(++h8<ic){ib=ia[h8],h9.point(ib[0],ib[1],ib[2])}h9.lineEnd()}function hc(h9,h8){var d3=-1,ia=h9.length;h8.polygonStart();while(++d3<ia){co(h9[d3],h8,1)}h8.polygonEnd()}hl.geo.area=function(d3){a9=0;hl.geo.stream(d3,hi);return a9};var a9,fP=new fb();var hi={sphere:function(){a9+=4*gd},point:aH,lineStart:aH,lineEnd:aH,polygonStart:function(){fP.reset();hi.lineStart=b6},polygonEnd:function(){var d3=2*fP;a9+=d3<0?4*gd+d3:d3;hi.lineStart=hi.lineEnd=hi.point=aH}};function b6(){var h8,d3,ia,h9,ib;hi.point=function(ie,id){hi.point=ic;ia=(h8=ie)*J,h9=Math.cos(id=(d3=id)*J/2+gd/4),ib=Math.sin(id)};function ic(ig,io){ig*=J;io=io*J/2+gd/4;var ij=ig-ia,ii=ij>=0?1:-1,ik=ii*ij,id=Math.cos(io),ih=Math.sin(io),ie=ib*ih,im=h9*id+ie*Math.cos(ik),il=ie*ii*Math.sin(ik);fP.add(Math.atan2(il,im));ia=ig,h9=id,ib=ih}hi.lineEnd=function(){ic(h8,d3)}}function av(d3){var h9=d3[0],h8=d3[1],ia=Math.cos(h8);return[ia*Math.cos(h9),ia*Math.sin(h9),Math.sin(h8)]}function ay(h8,d3){return h8[0]*d3[0]+h8[1]*d3[1]+h8[2]*d3[2]}function cY(h8,d3){return[h8[1]*d3[2]-h8[2]*d3[1],h8[2]*d3[0]-h8[0]*d3[2],h8[0]*d3[1]-h8[1]*d3[0]]}function cB(h8,d3){h8[0]+=d3[0];h8[1]+=d3[1];h8[2]+=d3[2]}function ge(d3,h8){return[d3[0]*h8,d3[1]*h8,d3[2]*h8]}function fk(h8){var d3=Math.sqrt(h8[0]*h8[0]+h8[1]*h8[1]+h8[2]*h8[2]);h8[0]/=d3;h8[1]/=d3;h8[2]/=d3}function h4(d3){return[Math.atan2(d3[1],d3[0]),cf(d3[2])]}function eS(h8,d3){return cG(h8[0]-d3[0])<gm&&cG(h8[1]-d3[1])<gm}hl.geo.bounds=function(){var ia,it,h8,iq,ib,ij,il,ic,ig,id,ih;var d3={point:im,lineStart:ii,lineEnd:ip,polygonStart:function(){d3.point=io;d3.lineStart=ie;d3.lineEnd=ik;ig=0;hi.polygonStart()},polygonEnd:function(){hi.polygonEnd();d3.point=im;d3.lineStart=ii;d3.lineEnd=ip;if(fP<0){ia=-(h8=180),it=-(iq=90)}else{if(ig>gm){iq=90}else{if(ig<-gm){it=-90}}}ih[0]=ia,ih[1]=h8}};function im(ix,iw){id.push(ih=[ia=ix,h8=ix]);if(iw<it){it=iw}if(iw>iq){iq=iw}}function h9(iA,iG){var iw=av([iA*J,iG*J]);if(ic){var iC=cY(ic,iw),iD=[iC[1],-iC[0],0],iB=cY(iD,iC);fk(iB);iB=h4(iB);var iE=iA-ib,iF=iE>0?1:-1,ix=iB[0]*hC*iF,iz=cG(iE)>180;if(iz^(iF*ib<ix&&ix<iF*iA)){var iy=iB[1]*hC;if(iy>iq){iq=iy}}else{if(ix=(ix+360)%360-180,iz^(iF*ib<ix&&ix<iF*iA)){var iy=-iB[1]*hC;if(iy<it){it=iy}}else{if(iG<it){it=iG}if(iG>iq){iq=iG}}}if(iz){if(iA<ib){if(ir(ia,iA)>ir(ia,h8)){h8=iA}}else{if(ir(iA,h8)>ir(ia,h8)){ia=iA}}}else{if(h8>=ia){if(iA<ia){ia=iA}if(iA>h8){h8=iA}}else{if(iA>ib){if(ir(ia,iA)>ir(ia,h8)){h8=iA}}else{if(ir(iA,h8)>ir(ia,h8)){ia=iA}}}}}else{im(iA,iG)}ic=iw,ib=iA}function ii(){d3.point=h9}function ip(){ih[0]=ia,ih[1]=h8;d3.point=im;ic=null}function io(ix,iw){if(ic){var iy=ix-ib;ig+=cG(iy)>180?iy+(iy>0?360:-360):iy}else{ij=ix,il=iw}hi.point(ix,iw);h9(ix,iw)}function ie(){hi.lineStart()}function ik(){io(ij,il);hi.lineEnd();if(cG(ig)>gm){ia=-(h8=180)}ih[0]=ia,ih[1]=h8;ic=null}function ir(ix,iw){return(iw-=ix)<0?iw+360:iw}function iv(ix,iw){return ix[0]-iw[0]}function iu(iw,ix){return ix[0]<=ix[1]?ix[0]<=iw&&iw<=ix[1]:iw<ix[0]||ix[1]<iw}return function(iB){iq=h8=-(ia=it=Infinity);id=[];hl.geo.stream(iB,d3);var iD=id.length;if(iD){id.sort(iv);for(var iA=1,iy=id[0],ix,iw=[iy];iA<iD;++iA){ix=id[iA];if(iu(ix[0],iy)||iu(ix[1],iy)){if(ir(iy[0],ix[1])>ir(iy[0],iy[1])){iy[1]=ix[1]}if(ir(ix[0],iy[1])>ir(iy[0],iy[1])){iy[0]=ix[0]}}else{iw.push(iy=ix)}}var iC=-Infinity,iz;for(var iD=iw.length-1,iA=0,iy=iw[iD],ix;iA<=iD;iy=ix,++iA){ix=iw[iA];if((iz=ir(iy[1],ix[0]))>iC){iC=iz,ia=ix[0],h8=iy[1]}}}id=ih=null;return ia===Infinity||it===Infinity?[[NaN,NaN],[NaN,NaN]]:[[ia,it],[h8,iq]]}}();hl.geo.centroid=function(h9){ea=d8=dJ=dm=c6=dI=dl=c4=dH=dk=c3=0;hl.geo.stream(h9,gg);var h8=dH,ib=dk,ia=c3,d3=h8*h8+ib*ib+ia*ia;if(d3<eD){h8=dI,ib=dl,ia=c4;if(d8<gm){h8=dJ,ib=dm,ia=c6}d3=h8*h8+ib*ib+ia*ia;if(d3<eD){return[NaN,NaN]}}return[Math.atan2(ib,h8)*hC,cf(ia/Math.sqrt(d3))*hC]};var ea,d8,dJ,dm,c6,dI,dl,c4,dH,dk,c3;var gg={sphere:aH,point:ca,lineStart:fj,lineEnd:aF,polygonStart:function(){gg.lineStart=br},polygonEnd:function(){gg.lineStart=fj}};function ca(h8,d3){h8*=J;var h9=Math.cos(d3*=J);gs(h9*Math.cos(h8),h9*Math.sin(h8),Math.sin(d3))}function gs(d3,h9,h8){++ea;dJ+=(d3-dJ)/ea;dm+=(h9-dm)/ea;c6+=(h8-c6)/ea}function fj(){var d3,h8,ia;gg.point=function(ic,ib){ic*=J;var id=Math.cos(ib*=J);d3=id*Math.cos(ic);h8=id*Math.sin(ic);ia=Math.sin(ib);gg.point=h9;gs(d3,h8,ia)};function h9(ie,id){ie*=J;var ig=Math.cos(id*=J),ib=ig*Math.cos(ie),ii=ig*Math.sin(ie),ih=Math.sin(id),ic=Math.atan2(Math.sqrt((ic=h8*ih-ia*ii)*ic+(ic=ia*ib-d3*ih)*ic+(ic=d3*ii-h8*ib)*ic),d3*ib+h8*ii+ia*ih);d8+=ic;dI+=ic*(d3+(d3=ib));dl+=ic*(h8+(h8=ii));c4+=ic*(ia+(ia=ih));gs(d3,h8,ia)}}function aF(){gg.point=ca}function br(){var h8,d3,h9,ia,ic;gg.point=function(ie,id){h8=ie,d3=id;gg.point=ib;ie*=J;var ig=Math.cos(id*=J);h9=ig*Math.cos(ie);ia=ig*Math.sin(ie);ic=Math.sin(id);gs(h9,ia,ic)};gg.lineEnd=function(){ib(h8,d3);gg.lineEnd=aF;gg.point=ca};function ib(ij,ir){ij*=J;var ih=Math.cos(ir*=J),im=ih*Math.cos(ij),il=ih*Math.sin(ij),ik=Math.sin(ir),ii=ia*ik-ic*il,ig=ic*im-h9*ik,ie=h9*il-ia*im,id=Math.sqrt(ii*ii+ig*ig+ie*ie),iq=h9*im+ia*il+ic*ik,ip=id&&-ad(iq)/id,io=Math.atan2(id,iq);dH+=ip*ii;dk+=ip*ig;c3+=ip*ie;d8+=io;dI+=io*(h9+(h9=im));dl+=io*(ia+(ia=il));c4+=io*(ic+(ic=ik));gs(h9,ia,ic)}}function e5(h8,d3){function h9(ia,ib){return ia=h8(ia,ib),d3(ia[0],ia[1])}if(h8.invert&&d3.invert){h9.invert=function(ia,ib){return ia=d3.invert(ia,ib),ia&&h8.invert(ia[0],ia[1])}}return h9}function ah(){return true}function cr(id,h8,ii,ig,ia){var ih=[],ib=[];id.forEach(function(ir){if((iv=ir.length-1)<=0){return}var iv,iu=ir[0],it=ir[iv];if(eS(iu,it)){ia.lineStart();for(var iq=0;iq<iv;++iq){ia.point((iu=ir[iq])[0],iu[1])}ia.lineEnd();return}var ip=new f(iu,ir,null,true),io=new f(iu,null,ip,false);ip.o=io;ih.push(ip);ib.push(io);ip=new f(it,ir,null,false);io=new f(it,null,ip,true);ip.o=io;ih.push(ip);ib.push(io)});ib.sort(h8);hH(ih);hH(ib);if(!ih.length){return}for(var ic=0,ik=ii,h9=ib.length;ic<h9;++ic){ib[ic].e=ik=!ik}var d3=ih[0],il,ij;while(1){var ie=d3,im=true;while(ie.v){if((ie=ie.n)===d3){return}}il=ie.z;ia.lineStart();do{ie.v=ie.o.v=true;if(ie.e){if(im){for(var ic=0,h9=il.length;ic<h9;++ic){ia.point((ij=il[ic])[0],ij[1])}}else{ig(ie.x,ie.n.x,1,ia)}ie=ie.n}else{if(im){il=ie.p.z;for(var ic=il.length-1;ic>=0;--ic){ia.point((ij=il[ic])[0],ij[1])}}else{ig(ie.x,ie.p.x,-1,ia)}ie=ie.p}ie=ie.o;il=ie.z;im=!im}while(!ie.v);ia.lineEnd()}}function hH(ib){if(!(ia=ib.length)){return}var ia,h9=0,h8=ib[0],d3;while(++h9<ia){h8.n=d3=ib[h9];d3.p=h8;h8=d3}h8.n=d3=ib[0];d3.p=h8}function f(h8,h9,d3,ia){this.x=h8;this.z=h9;this.o=d3;this.e=ia;this.v=false;this.n=this.p=null}function eg(d3,ia,h8,h9){return function(it,ig){var ik=ia(ig),ie=it.invert(h9[0],h9[1]);var iv={point:ip,lineStart:im,lineEnd:iu,polygonStart:function(){iv.point=ic;iv.lineStart=ih;iv.lineEnd=io;iq=[];il=[]},polygonEnd:function(){iv.point=ip;iv.lineStart=im;iv.lineEnd=iu;iq=hl.merge(iq);var iw=fM(ie,il);if(iq.length){if(!id){ig.polygonStart(),id=true}cr(iq,dU,iw,h8,ig)}else{if(iw){if(!id){ig.polygonStart(),id=true}ig.lineStart();h8(null,null,1,ig);ig.lineEnd()}}if(id){ig.polygonEnd(),id=false}iq=il=null},sphere:function(){ig.polygonStart();ig.lineStart();h8(null,null,1,ig);ig.lineEnd();ig.polygonEnd()}};function ip(iy,ix){var iw=it(iy,ix);if(d3(iy=iw[0],ix=iw[1])){ig.point(iy,ix)}}function ii(iy,ix){var iw=it(iy,ix);ik.point(iw[0],iw[1])}function im(){iv.point=ii;ik.lineStart()}function iu(){iv.point=ip;ik.lineEnd()}var iq;var ir=Q(),ib=ia(ir),id=false,il,ij;function ic(iy,ix){ij.push([iy,ix]);var iw=it(iy,ix);ib.point(iw[0],iw[1])}function ih(){ib.lineStart();ij=[]}function io(){ic(ij[0][0],ij[0][1]);ib.lineEnd();var iy=ib.clean(),iA=ir.buffer(),iz,iB=iA.length;ij.pop();il.push(ij);ij=null;if(!iB){return}if(iy&1){iz=iA[0];var iB=iz.length-1,ix=-1,iw;if(iB>0){if(!id){ig.polygonStart(),id=true}ig.lineStart();while(++ix<iB){ig.point((iw=iz[ix])[0],iw[1])}ig.lineEnd()}return}if(iB>1&&iy&2){iA.push(iA.pop().concat(iA.shift()))}iq.push(iA.filter(eN))}return iv}}function eN(d3){return d3.length>1}function Q(){var h8=[],d3;return{lineStart:function(){h8.push(d3=[])},point:function(ia,h9){d3.push([ia,h9])},lineEnd:aH,buffer:function(){var h9=h8;h8=[];d3=null;return h9},rejoin:function(){if(h8.length>1){h8.push(h8.pop().concat(h8.shift()))}}}}function dU(h8,d3){return((h8=h8.x)[0]<0?h8[1]-eo-gm:eo-h8[1])-((d3=d3.x)[0]<0?d3[1]-eo-gm:eo-d3[1])}var l=eg(ah,eE,dc,[-gd,-gd/2]);function eE(ib){var h8=NaN,d3=NaN,ia=NaN,h9;return{lineStart:function(){ib.lineStart();h9=1},point:function(id,ic){var ig=id>0?gd:-gd,ie=cG(id-h8);if(cG(ie-gd)<gm){ib.point(h8,d3=(d3+ic)/2>0?eo:-eo);ib.point(ia,d3);ib.lineEnd();ib.lineStart();ib.point(ig,d3);ib.point(id,d3);h9=0}else{if(ia!==ig&&ie>=gd){if(cG(h8-ia)<gm){h8-=ia*gm}if(cG(id-ig)<gm){id-=ig*gm}d3=v(h8,d3,id,ic);ib.point(ia,d3);ib.lineEnd();ib.lineStart();ib.point(ig,d3);h9=0}}ib.point(h8=id,d3=ic);ia=ig},lineEnd:function(){ib.lineEnd();h8=d3=NaN},clean:function(){return 2-h9}}}function v(ic,ib,ia,h9){var h8,d3,id=Math.sin(ic-ia);return cG(id)>gm?Math.atan((Math.sin(ib)*(d3=Math.cos(h9))*Math.sin(ia)-Math.sin(h9)*(h8=Math.cos(ib))*Math.sin(ic))/(h8*d3*id)):(ib+h9)/2}function dc(ic,ib,ia,h9){var d3;if(ic==null){d3=ia*eo;h9.point(-gd,d3);h9.point(0,d3);h9.point(gd,d3);h9.point(gd,0);h9.point(gd,-d3);h9.point(0,-d3);h9.point(-gd,-d3);h9.point(-gd,0);h9.point(-gd,d3)}else{if(cG(ic[0]-ib[0])>gm){var h8=ic[0]<ib[0]?gd:-gd;d3=ia*h8/2;h9.point(-h8,d3);h9.point(0,d3);h9.point(h8,d3)}else{h9.point(ib[0],ib[1])}}}function fM(it,io){var iB=it[0],iC=it[1],d3=[Math.sin(iB),-Math.cos(iB),0],im=0,iz=0;fP.reset();for(var iy=0,ip=io.length;iy<ip;++iy){var ig=io[iy],ir=ig.length;if(!ir){continue}var ic=ig[0],h9=ic[0],iA=ic[1]/2+gd/4,ie=Math.sin(iA),h8=Math.cos(iA),ix=1;while(true){if(ix===ir){ix=0}it=ig[ix];var iq=it[0],il=it[1]/2+gd/4,ia=Math.sin(il),iw=Math.cos(il),iv=iq-h9,ih=iv>=0?1:-1,ij=ih*iv,ib=ij>gd,iu=ie*ia;fP.add(Math.atan2(iu*ih*Math.sin(ij),h8*iw+iu*Math.cos(ij)));im+=ib?iv+ih*f7:iv;if(ib^h9>=iB^iq>=iB){var ii=cY(av(ic),av(it));fk(ii);var ik=cY(d3,ii);fk(ik);var id=(ib^iv>=0?-1:1)*cf(ik[2]);if(iC>id||iC===id&&(ii[0]||ii[1])){iz+=ib^iv>=0?1:-1}}if(!ix++){break}h9=iq,ie=ia,h8=iw,ic=it}}return(im<-gm||im<gm&&fP<0)^iz&1}function aL(ib){var ic=Math.cos(ib),ia=ic>0,id=cG(ic)>gm,ie=b5(ib,6*J);return eg(h9,ig,ie,ia?[0,-ib]:[-gd,ib-gd]);function h9(ii,ih){return Math.cos(ii)*Math.cos(ih)>ic}function ig(im){var il,ik,ih,ij,ii;return{lineStart:function(){ij=ih=false;ii=1},point:function(ip,io){var iu=[ip,io],it,iq=h9(ip,io),iv=ia?iq?0:d3(ip,io):iq?d3(ip+(ip<0?gd:-gd),io):0;if(!il&&(ij=ih=iq)){im.lineStart()}if(iq!==ih){it=h8(il,iu);if(eS(il,it)||eS(iu,it)){iu[0]+=gm;iu[1]+=gm;iq=h9(iu[0],iu[1])}}if(iq!==ih){ii=0;if(iq){im.lineStart();it=h8(iu,il);im.point(it[0],it[1])}else{it=h8(il,iu);im.point(it[0],it[1]);im.lineEnd()}il=it}else{if(id&&il&&ia^iq){var ir;if(!(iv&ik)&&(ir=h8(iu,il,true))){ii=0;if(ia){im.lineStart();im.point(ir[0][0],ir[0][1]);im.point(ir[1][0],ir[1][1]);im.lineEnd()}else{im.point(ir[1][0],ir[1][1]);im.lineEnd();im.lineStart();im.point(ir[0][0],ir[0][1])}}}}if(iq&&(!il||!eS(il,iu))){im.point(iu[0],iu[1])}il=iu,ih=iq,ik=iv},lineEnd:function(){if(ih){im.lineEnd()}il=null},clean:function(){return ii|(ij&&ih)<<1}}}function h8(iK,iJ,il){var ij=av(iK),ih=av(iJ);var ir=[1,0,0],io=cY(ij,ih),iv=ay(io,io),iI=io[0],iB=iv-iI*iI;if(!iB){return !il&&iK}var iE=ic*iv/iB,iD=-ic*iI/iB,iL=cY(ir,io),iC=ge(ir,iE),iA=ge(io,iD);cB(iC,iA);var ix=iL,iw=ay(iC,ix),im=ay(ix,ix),iu=iw*iw-im*(ay(iC,iC)-1);if(iu<0){return}var iy=Math.sqrt(iu),iz=ge(ix,(-iw-iy)/im);cB(iz,iC);iz=h4(iz);if(!il){return iz}var ik=iK[0],ii=iJ[0],iG=iK[1],iF=iJ[1],iq;if(ii<ik){iq=ik,ik=ii,ii=iq}var ip=ii-ik,iM=cG(ip-gd)<gm,iH=iM||ip<gm;if(!iM&&iF<iG){iq=iG,iG=iF,iF=iq}if(iH?iM?iG+iF>0^iz[1]<(cG(iz[0]-ik)<gm?iG:iF):iG<=iz[1]&&iz[1]<=iF:ip>gd^(ik<=iz[0]&&iz[0]<=ii)){var it=ge(ix,(-iw+iy)/im);cB(it,iC);return[iz,h4(it)]}}function d3(ii,ih){var ik=ia?ib:gd-ib,ij=0;if(ii<-ik){ij|=1}else{if(ii>ik){ij|=2}}if(ih<-ik){ij|=4}else{if(ih>ik){ij|=8}}return ij}}function ak(h8,ia,d3,h9){return function(io){var ij=io.a,ii=io.b,ic=ij.x,im=ij.y,ih=ii.x,ig=ii.y,ie=0,id=1,il=ih-ic,ik=ig-im,ib;ib=h8-ic;if(!il&&ib>0){return}ib/=il;if(il<0){if(ib<ie){return}if(ib<id){id=ib}}else{if(il>0){if(ib>id){return}if(ib>ie){ie=ib}}}ib=d3-ic;if(!il&&ib<0){return}ib/=il;if(il<0){if(ib>id){return}if(ib>ie){ie=ib}}else{if(il>0){if(ib<ie){return}if(ib<id){id=ib}}}ib=ia-im;if(!ik&&ib>0){return}ib/=ik;if(ik<0){if(ib<ie){return}if(ib<id){id=ib}}else{if(ik>0){if(ib>id){return}if(ib>ie){ie=ib}}}ib=h9-im;if(!ik&&ib<0){return}ib/=ik;if(ik<0){if(ib>id){return}if(ib>ie){ie=ib}}else{if(ik>0){if(ib<ie){return}if(ib<id){id=ib}}}if(ie>0){io.a={x:ic+ie*il,y:im+ie*ik}}if(id<1){io.b={x:ic+id*il,y:im+id*ik}}return io}}var cJ=1000000000;hl.geo.clipExtent=function(){var h9,ic,h8,ia,id,ib,d3={stream:function(ie){if(id){id.valid=false}id=ib(ie);id.valid=true;return id},extent:function(ie){if(!arguments.length){return[[h9,ic],[h8,ia]]}ib=ed(h9=+ie[0][0],ic=+ie[0][1],h8=+ie[1][0],ia=+ie[1][1]);if(id){id.valid=false,id=null}return d3}};return d3.extent([[0,0],[960,500]])};function ed(h8,ib,d3,h9){return function(ik){var ig=ik,iq=Q(),ih=ak(h8,ib,d3,h9),iz,ir,io;var iD={point:iy,lineStart:iv,lineEnd:iB,polygonStart:function(){ik=iq;iz=[];ir=[];iA=true},polygonEnd:function(){ik=ig;iz=hl.merge(iz);var iF=iu([h8,h9]),iE=iA&&iF,iG=iz.length;if(iE||iG){ik.polygonStart();if(iE){ik.lineStart();ip(null,null,1,ik);ik.lineEnd()}if(iG){cr(iz,ic,iF,ip,ik)}ik.polygonEnd()}iz=ir=io=null}};function iu(iE){var iM=0,iF=ir.length,iK=iE[1];for(var iI=0;iI<iF;++iI){for(var iH=1,iN=ir[iI],iG=iN.length,iL=iN[0],iJ;iH<iG;++iH){iJ=iN[iH];if(iL[1]<=iK){if(iJ[1]>iK&&eZ(iL,iJ,iE)>0){++iM}}else{if(iJ[1]<=iK&&eZ(iL,iJ,iE)<0){--iM}}iL=iJ}}return iM!==0}function ip(iJ,iI,iH,iG){var iF=0,iE=0;if(iJ==null||(iF=ia(iJ,iH))!==(iE=ia(iI,iH))||id(iJ,iI)<0^iH>0){do{iG.point(iF===0||iF===3?h8:d3,iF>1?h9:ib)}while((iF=(iF+iH+4)%4)!==iE)}else{iG.point(iI[0],iI[1])}}function it(iE,iF){return h8<=iE&&iE<=d3&&ib<=iF&&iF<=h9}function iy(iE,iF){if(it(iE,iF)){ik.point(iE,iF)}}var ix,il,iw,iC,ij,ii,im,iA;function iv(){iD.point=ie;if(ir){ir.push(io=[])}im=true;ii=false;iC=ij=NaN}function iB(){if(iz){ie(ix,il);if(iw&&ii){iq.rejoin()}iz.push(iq.buffer())}iD.point=iy;if(ii){ik.lineEnd()}}function ie(iE,iH){iE=Math.max(-cJ,Math.min(cJ,iE));iH=Math.max(-cJ,Math.min(cJ,iH));var iG=it(iE,iH);if(ir){io.push([iE,iH])}if(im){ix=iE,il=iH,iw=iG;im=false;if(iG){ik.lineStart();ik.point(iE,iH)}}else{if(iG&&ii){ik.point(iE,iH)}else{var iF={a:{x:iC,y:ij},b:{x:iE,y:iH}};if(ih(iF)){if(!ii){ik.lineStart();ik.point(iF.a.x,iF.a.y)}ik.point(iF.b.x,iF.b.y);if(!iG){ik.lineEnd()}iA=false}else{if(iG){ik.lineStart();ik.point(iE,iH);iA=false}}}}iC=iE,ij=iH,ii=iG}return iD};function ia(ig,ie){return cG(ig[0]-h8)<gm?ie>0?0:3:cG(ig[0]-d3)<gm?ie>0?2:1:cG(ig[1]-ib)<gm?ie>0?1:0:ie>0?3:2}function ic(ig,ie){return id(ig.x,ie.x)}function id(ii,ig){var ih=ia(ii,1),ie=ia(ig,1);return ih!==ie?ih-ie:ih===0?ig[1]-ii[1]:ih===1?ii[0]-ig[0]:ih===2?ii[1]-ig[1]:ig[0]-ii[0]}}function b7(ia){var h9=0,h8=gd/3,d3=fh(ia),ib=d3(h9,h8);ib.parallels=function(ic){if(!arguments.length){return[h9/gd*180,h8/gd*180]}return d3(h9=ic[0]*gd/180,h8=ic[1]*gd/180)};return ib}function N(h8,d3){var ib=Math.sin(h8),id=(ib+Math.sin(d3))/2,ic=1+ib*(2*id-ib),ia=Math.sqrt(ic)/id;function h9(ig,ie){var ih=Math.sqrt(ic-2*id*Math.sin(ie))/id;return[ih*Math.sin(ig*=id),ia-ih*Math.cos(ig)]}h9.invert=function(ie,ih){var ig=ia-ih;return[Math.atan2(ie,ig)/id,cf((ic-(ie*ie+ig*ig)*id*id)/(2*id))]};return h9}(hl.geo.conicEqualArea=function(){return b7(N)}).raw=N;hl.geo.albers=function(){return hl.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)};hl.geo.albersUsa=function(){var h8=hl.geo.albers();var ic=hl.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var h9=hl.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var ie,d3={point:function(ih,ii){ie=[ih,ii]}},ib,id,ia;function ig(ii){var ih=ii[0],ij=ii[1];ie=null;(ib(ih,ij),ie)||(id(ih,ij),ie)||ia(ih,ij);return ie}ig.invert=function(ik){var ii=h8.scale(),ij=h8.translate(),ih=(ik[0]-ij[0])/ii,il=(ik[1]-ij[1])/ii;return(il>=0.12&&il<0.234&&ih>=-0.425&&ih<-0.214?ic:il>=0.166&&il<0.234&&ih>=-0.214&&ih<-0.115?h9:h8).invert(ik)};ig.stream=function(ij){var ii=h8.stream(ij),ik=ic.stream(ij),ih=h9.stream(ij);return{point:function(il,im){ii.point(il,im);ik.point(il,im);ih.point(il,im)},sphere:function(){ii.sphere();ik.sphere();ih.sphere()},lineStart:function(){ii.lineStart();ik.lineStart();ih.lineStart()},lineEnd:function(){ii.lineEnd();ik.lineEnd();ih.lineEnd()},polygonStart:function(){ii.polygonStart();ik.polygonStart();ih.polygonStart()},polygonEnd:function(){ii.polygonEnd();ik.polygonEnd();ih.polygonEnd()}}};ig.precision=function(ih){if(!arguments.length){return h8.precision()}h8.precision(ih);ic.precision(ih);h9.precision(ih);return ig};ig.scale=function(ih){if(!arguments.length){return h8.scale()}h8.scale(ih);ic.scale(ih*0.35);h9.scale(ih);return ig.translate(h8.translate())};ig.translate=function(ij){if(!arguments.length){return h8.translate()}var ii=h8.scale(),ih=+ij[0],ik=+ij[1];ib=h8.translate(ij).clipExtent([[ih-0.455*ii,ik-0.238*ii],[ih+0.455*ii,ik+0.238*ii]]).stream(d3).point;id=ic.translate([ih-0.307*ii,ik+0.201*ii]).clipExtent([[ih-0.425*ii+gm,ik+0.12*ii+gm],[ih-0.214*ii-gm,ik+0.234*ii-gm]]).stream(d3).point;ia=h9.translate([ih-0.205*ii,ik+0.212*ii]).clipExtent([[ih-0.214*ii+gm,ik+0.166*ii+gm],[ih-0.115*ii-gm,ik+0.234*ii-gm]]).stream(d3).point;return ig};return ig.scale(1070)};var fN,B,dA={point:aH,lineStart:aH,lineEnd:aH,polygonStart:function(){B=0;dA.lineStart=cL},polygonEnd:function(){dA.lineStart=dA.lineEnd=dA.point=aH;fN+=cG(B/2)}};function cL(){var ia,d3,h8,h9;dA.point=function(ic,id){dA.point=ib;ia=h8=ic,d3=h9=id};function ib(ic,id){B+=h9*ic-h8*id;h8=ic,h9=id}dA.lineEnd=function(){ib(ia,d3)}}var eL,en,eJ,em;var ax={point:cT,lineStart:aH,lineEnd:aH,polygonStart:aH,polygonEnd:aH};function cT(d3,h8){if(d3<eL){eL=d3}if(d3>eJ){eJ=d3}if(h8<en){en=h8}if(h8>em){em=h8}}function cj(){var h9=g5(4.5),h8=[];var ie={point:d3,lineStart:function(){ie.point=id},lineEnd:ic,polygonStart:function(){ie.lineEnd=ia},polygonEnd:function(){ie.lineEnd=ic;ie.point=d3},pointRadius:function(ig){h9=g5(ig);return ie},result:function(){if(h8.length){var ig=h8.join("");h8=[];return ig}}};function d3(ig,ih){h8.push("M",ig,",",ih,h9)}function id(ig,ih){h8.push("M",ig,",",ih);ie.point=ib}function ib(ig,ih){h8.push("L",ig,",",ih)}function ic(){ie.point=d3}function ia(){h8.push("Z")}return ie}function g5(d3){return"m0,"+d3+"a"+d3+","+d3+" 0 1,1 0,"+-2*d3+"a"+d3+","+d3+" 0 1,1 0,"+2*d3+"z"}var g4={point:cP,lineStart:fR,lineEnd:cO,polygonStart:function(){g4.lineStart=b0},polygonEnd:function(){g4.point=cP;g4.lineStart=fR;g4.lineEnd=cO}};function cP(d3,h8){dJ+=d3;dm+=h8;++c6}function fR(){var d3,h8;g4.point=function(ia,ib){g4.point=h9;cP(d3=ia,h8=ib)};function h9(ia,ie){var ic=ia-d3,ib=ie-h8,id=Math.sqrt(ic*ic+ib*ib);dI+=id*(d3+ia)/2;dl+=id*(h8+ie)/2;c4+=id;cP(d3=ia,h8=ie)}}function cO(){g4.point=cP}function b0(){var ia,d3,h8,h9;g4.point=function(ic,id){g4.point=ib;cP(ia=h8=ic,d3=h9=id)};function ib(ic,ih){var ie=ic-h8,id=ih-h9,ig=Math.sqrt(ie*ie+id*id);dI+=ig*(h8+ic)/2;dl+=ig*(h9+ih)/2;c4+=ig;ig=h9*ic-h8*ih;dH+=ig*(h8+ic);dk+=ig*(h9+ih);c3+=ig*3;cP(h8=ic,h9=ih)}g4.lineEnd=function(){ib(ia,d3)}}function cE(h8){var ib=4.5;var ie={point:d3,lineStart:function(){ie.point=id},lineEnd:ic,polygonStart:function(){ie.lineEnd=h9},polygonEnd:function(){ie.lineEnd=ic;ie.point=d3},pointRadius:function(ig){ib=ig;return ie},result:aH};function d3(ig,ih){h8.moveTo(ig+ib,ih);h8.arc(ig,ih,ib,0,f7)}function id(ig,ih){h8.moveTo(ig,ih);ie.point=ia}function ia(ig,ih){h8.lineTo(ig,ih)}function ic(){ie.point=d3}function h9(){h8.closePath()}return ie}function fO(id){var ib=0.5,ic=Math.cos(30*J),ie=16;function h9(ig){return(ie?ia:d3)(ig)}function d3(ig){return eG(ig,function(ih,ii){ih=id(ih,ii);ig.point(ih[0],ih[1])})}function ia(im){var it,iz,iy,io,iC,iq,ih,ii,iB,ij,iD,ip,iu;var ik={point:ix,lineStart:ir,lineEnd:iA,polygonStart:function(){im.polygonStart();ik.lineStart=il},polygonEnd:function(){im.polygonEnd();ik.lineStart=ir}};function ix(iE,iF){iE=id(iE,iF);im.point(iE[0],iE[1])}function ir(){iB=NaN;ik.point=ig;im.lineStart()}function ig(iF,iE){var iH=av([iF,iE]),iG=id(iF,iE);h8(iB,ij,ii,iD,ip,iu,iB=iG[0],ij=iG[1],ii=iF,iD=iH[0],ip=iH[1],iu=iH[2],ie,im);im.point(iB,ij)}function iA(){ik.point=ix;im.lineEnd()}function il(){ir();ik.point=iw;ik.lineEnd=iv}function iw(iF,iE){ig(it=iF,iz=iE),iy=iB,io=ij,iC=iD,iq=ip,ih=iu;ik.point=ig}function iv(){h8(iB,ij,ii,iD,ip,iu,iy,io,it,iC,iq,ih,ie,im);ik.lineEnd=iA;iA()}return ik}function h8(iD,im,ii,iK,iq,iz,iC,il,ih,iI,ip,ix,iH,io){var iv=iC-iD,iu=il-im,iJ=iv*iv+iu*iu;if(iJ>4*ib&&iH--){var iG=iK+iI,iF=iq+ip,iE=iz+ix,iy=Math.sqrt(iG*iG+iF*iF+iE*iE),iB=Math.asin(iE/=iy),ig=cG(cG(iE)-1)<gm||cG(ii-ih)<gm?(ii+ih)/2:Math.atan2(iF,iG),iw=id(ig,iB),iA=iw[0],ik=iw[1],ij=iA-iD,it=ik-im,ir=iu*ij-iv*it;if(ir*ir/iJ>ib||cG((iv*ij+iu*it)/iJ-0.5)>0.3||iK*iI+iq*ip+iz*ix<ic){h8(iD,im,ii,iK,iq,iz,iA,ik,ig,iG/=iy,iF/=iy,iE,iH,io);io.point(iA,ik);h8(iA,ik,ig,iG,iF,iE,iC,il,ih,iI,ip,ix,iH,io)}}}h9.precision=function(ig){if(!arguments.length){return Math.sqrt(ib)}ie=(ib=ig*ig)>0&&16;return h9};return h9}hl.geo.path=function(){var id=4.5,h8,ia,ib,d3,h9;function ie(ig){if(ig){if(typeof id==="function"){d3.pointRadius(+id.apply(this,arguments))}if(!h9||!h9.valid){h9=ib(d3)}hl.geo.stream(ig,h9)}return d3.result()}ie.area=function(ig){fN=0;hl.geo.stream(ig,ib(dA));return fN};ie.centroid=function(ig){dJ=dm=c6=dI=dl=c4=dH=dk=c3=0;hl.geo.stream(ig,ib(g4));return c3?[dH/c3,dk/c3]:c4?[dI/c4,dl/c4]:c6?[dJ/c6,dm/c6]:[NaN,NaN]};ie.bounds=function(ig){eJ=em=-(eL=en=Infinity);hl.geo.stream(ig,ib(ax));return[[eL,en],[eJ,em]]};ie.projection=function(ig){if(!arguments.length){return h8}ib=(h8=ig)?ig.stream||he(ig):gk;return ic()};ie.context=function(ig){if(!arguments.length){return ia}d3=(ia=ig)==null?new cj():new cE(ig);if(typeof id!=="function"){d3.pointRadius(id)}return ic()};ie.pointRadius=function(ig){if(!arguments.length){return id}id=typeof ig==="function"?ig:(d3.pointRadius(+ig),+ig);return ie};function ic(){h9=null;return ie}return ie.projection(hl.geo.albersUsa()).context(null)};function he(h8){var d3=fO(function(h9,ia){return h8([h9*hC,ia*hC])});return function(h9){return ch(d3(h9))}}hl.geo.transform=function(d3){return{stream:function(ia){var h9=new d9(ia);for(var h8 in d3){h9[h8]=d3[h8]}return h9}}};function d9(d3){this.stream=d3}d9.prototype={point:function(d3,h8){this.stream.point(d3,h8)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function eG(h8,d3){return{point:d3,sphere:function(){h8.sphere()},lineStart:function(){h8.lineStart()},lineEnd:function(){h8.lineEnd()},polygonStart:function(){h8.polygonStart()},polygonEnd:function(){h8.polygonEnd()}}}hl.geo.projection=fA;hl.geo.projectionMutator=fh;function fA(d3){return fh(function(){return d3})()}function fh(im){var ia,it,ie,ip=fO(function(iy,iz){iy=ia(iy,iz);return[iy[0]*ir+ic,h9-iy[1]*ir]}),ir=150,ik=480,ii=250,iq=0,ij=0,ig=0,ib=0,io=0,ic,h9,ix=l,iu=gk,d3=null,h8=null,id;function iw(iy){iy=ie(iy[0]*J,iy[1]*J);return[iy[0]*ir+ic,h9-iy[1]*ir]}function il(iy){iy=ie.invert((iy[0]-ic)/ir,(h9-iy[1])/ir);return iy&&[iy[0]*hC,iy[1]*hC]}iw.stream=function(iy){if(id){id.valid=false}id=ch(ix(it,ip(iu(iy))));id.valid=true;return id};iw.clipAngle=function(iy){if(!arguments.length){return d3}ix=iy==null?(d3=iy,l):aL((d3=+iy)*J);return ih()};iw.clipExtent=function(iy){if(!arguments.length){return h8}h8=iy;iu=iy?ed(iy[0][0],iy[0][1],iy[1][0],iy[1][1]):gk;return ih()};iw.scale=function(iy){if(!arguments.length){return ir}ir=+iy;return iv()};iw.translate=function(iy){if(!arguments.length){return[ik,ii]}ik=+iy[0];ii=+iy[1];return iv()};iw.center=function(iy){if(!arguments.length){return[iq*hC,ij*hC]}iq=iy[0]%360*J;ij=iy[1]%360*J;return iv()};iw.rotate=function(iy){if(!arguments.length){return[ig*hC,ib*hC,io*hC]}ig=iy[0]%360*J;ib=iy[1]%360*J;io=iy.length>2?iy[2]%360*J:0;return iv()};hl.rebind(iw,ip,"precision");function iv(){ie=e5(it=dF(ig,ib,io),ia);var iy=ia(iq,ij);ic=ik-iy[0]*ir;h9=ii+iy[1]*ir;return ih()}function ih(){if(id){id.valid=false,id=null}return iw}return function(){ia=im.apply(this,arguments);iw.invert=ia.invert&&il;return iv()}}function ch(d3){return eG(d3,function(h8,h9){d3.point(h8*J,h9*J)})}function bz(h8,d3){return[h8,d3]}(hl.geo.equirectangular=function(){return fA(bz)}).raw=bz.invert=bz;hl.geo.rotation=function(h8){h8=dF(h8[0]%360*J,h8[1]*J,h8.length>2?h8[2]*J:0);function d3(h9){h9=h8(h9[0]*J,h9[1]*J);return h9[0]*=hC,h9[1]*=hC,h9}d3.invert=function(h9){h9=h8.invert(h9[0]*J,h9[1]*J);return h9[0]*=hC,h9[1]*=hC,h9};return d3};function bI(h8,d3){return[h8>gd?h8-f7:h8<-gd?h8+f7:h8,d3]}bI.invert=bz;function dF(h9,h8,d3){return h9?h8||d3?e5(e0(h9),bU(h8,d3)):e0(h9):h8||d3?bU(h8,d3):bI}function gY(d3){return function(h9,h8){return h9+=d3,[h9>gd?h9-f7:h9<-gd?h9+f7:h9,h8]}}function e0(h8){var d3=gY(h8);d3.invert=gY(-h8);return d3}function bU(ic,h8){var ib=Math.cos(ic),id=Math.sin(ic),d3=Math.cos(h8),h9=Math.sin(h8);function ia(ih,ig){var ij=Math.cos(ig),ie=Math.cos(ih)*ij,il=Math.sin(ih)*ij,ik=Math.sin(ig),ii=ik*ib+ie*id;return[Math.atan2(il*d3-ii*h9,ie*ib-ik*id),cf(ii*d3+il*h9)]}ia.invert=function(ih,ig){var ij=Math.cos(ig),ie=Math.cos(ih)*ij,il=Math.sin(ih)*ij,ik=Math.sin(ig),ii=ik*d3-il*h9;return[Math.atan2(il*d3+ik*h9,ie*ib+ii*id),cf(ii*ib-ie*id)]};return ia}hl.geo.circle=function(){var h8=[0,0],ib,d3=6,h9;function ia(){var ic=typeof h8==="function"?h8.apply(this,arguments):h8,ie=dF(-ic[0]*J,-ic[1]*J,0).invert,id=[];h9(null,null,1,{point:function(ig,ih){id.push(ig=ie(ig,ih));ig[0]*=hC,ig[1]*=hC}});return{type:"Polygon",coordinates:[id]}}ia.origin=function(ic){if(!arguments.length){return h8}h8=ic;return ia};ia.angle=function(ic){if(!arguments.length){return ib}h9=b5((ib=+ic)*J,d3*J);return ia};ia.precision=function(ic){if(!arguments.length){return d3}h9=b5(ib*J,(d3=+ic)*J);return ia};return ia.angle(90)};function b5(d3,h8){var ia=Math.cos(d3),h9=Math.sin(d3);return function(ii,ih,ig,ie){var id=ig*h8;if(ii!=null){ii=hP(ia,ii);ih=hP(ia,ih);if(ig>0?ii<ih:ii>ih){ii+=ig*f7}}else{ii=d3+ig*f7;ih=d3-0.5*id}for(var ib,ic=ii;ig>0?ic>ih:ic<ih;ic-=id){ie.point((ib=h4([ia,-h9*Math.cos(ic),-h9*Math.sin(ic)]))[0],ib[1])}}}function hP(h9,d3){var h8=av(d3);h8[0]-=h9;fk(h8);var ia=ad(-h8[1]);return((-h8[2]<0?-ia:ia)+2*Math.PI-gm)%(2*Math.PI)}hl.geo.distance=function(ie,id){var ig=(id[0]-ie[0])*J,ii=ie[1]*J,ih=id[1]*J,ib=Math.sin(ig),h8=Math.cos(ig),ic=Math.sin(ii),h9=Math.cos(ii),ia=Math.sin(ih),d3=Math.cos(ih),ij;return Math.atan2(Math.sqrt((ij=d3*ib)*ij+(ij=h9*ia-ic*d3*h8)*ij),ic*ia+h9*d3*h8)};hl.geo.graticule=function(){var im,ip,iq,ir,ia,ib,ic,ie,ik=10,ij=ik,ig=90,id=360,ii,ih,h9,h8,il=2.5;function io(){return{type:"MultiLineString",coordinates:d3()}}function d3(){return hl.range(Math.ceil(ir/ig)*ig,iq,ig).map(h9).concat(hl.range(Math.ceil(ie/id)*id,ic,id).map(h8)).concat(hl.range(Math.ceil(ip/ik)*ik,im,ik).filter(function(it){return cG(it%ig)>gm}).map(ii)).concat(hl.range(Math.ceil(ib/ij)*ij,ia,ij).filter(function(it){return cG(it%id)>gm}).map(ih))}io.lines=function(){return d3().map(function(it){return{type:"LineString",coordinates:it}})};io.outline=function(){return{type:"Polygon",coordinates:[h9(ir).concat(h8(ic).slice(1),h9(iq).reverse().slice(1),h8(ie).reverse().slice(1))]}};io.extent=function(it){if(!arguments.length){return io.minorExtent()}return io.majorExtent(it).minorExtent(it)};io.majorExtent=function(it){if(!arguments.length){return[[ir,ie],[iq,ic]]}ir=+it[0][0],iq=+it[1][0];ie=+it[0][1],ic=+it[1][1];if(ir>iq){it=ir,ir=iq,iq=it}if(ie>ic){it=ie,ie=ic,ic=it}return io.precision(il)};io.minorExtent=function(it){if(!arguments.length){return[[ip,ib],[im,ia]]}ip=+it[0][0],im=+it[1][0];ib=+it[0][1],ia=+it[1][1];if(ip>im){it=ip,ip=im,im=it}if(ib>ia){it=ib,ib=ia,ia=it}return io.precision(il)};io.step=function(it){if(!arguments.length){return io.minorStep()}return io.majorStep(it).minorStep(it)};io.majorStep=function(it){if(!arguments.length){return[ig,id]}ig=+it[0],id=+it[1];return io};io.minorStep=function(it){if(!arguments.length){return[ik,ij]}ik=+it[0],ij=+it[1];return io};io.precision=function(it){if(!arguments.length){return il}il=+it;ii=aK(ib,ia,90);ih=aJ(ip,im,il);h9=aK(ie,ic,90);h8=aJ(ir,iq,il);return io};return io.majorExtent([[-180,-90+gm],[180,90-gm]]).minorExtent([[-180,-80-gm],[180,80+gm]])};function aK(h9,h8,d3){var ia=hl.range(h9,h8-gm,d3).concat(h8);return function(ib){return ia.map(function(ic){return[ib,ic]})}}function aJ(ia,h9,h8){var d3=hl.range(ia,h9-gm,h8).concat(h9);return function(ib){return d3.map(function(ic){return[ic,ib]})}}function hG(d3){return d3.source}function hN(d3){return d3.target}hl.geo.greatArc=function(){var h9=hG,h8,ia=hN,ib;function d3(){return{type:"LineString",coordinates:[h8||h9.apply(this,arguments),ib||ia.apply(this,arguments)]}}d3.distance=function(){return hl.geo.distance(h8||h9.apply(this,arguments),ib||ia.apply(this,arguments))};d3.source=function(ic){if(!arguments.length){return h9}h9=ic,h8=typeof ic==="function"?null:ic;return d3};d3.target=function(ic){if(!arguments.length){return ia}ia=ic,ib=typeof ic==="function"?null:ic;return d3};d3.precision=function(){return arguments.length?d3:0};return d3};hl.geo.interpolate=function(d3,h8){return i(d3[0]*J,d3[1]*J,h8[0]*J,h8[1]*J)};function i(ia,im,h9,ik){var id=Math.cos(im),il=Math.sin(im),ib=Math.cos(ik),ij=Math.sin(ik),ig=id*Math.cos(ia),h8=id*Math.sin(ia),ie=ib*Math.cos(h9),d3=ib*Math.sin(h9),ii=2*Math.asin(Math.sqrt(aE(ik-im)+id*ib*aE(h9-ia))),ic=1/Math.sin(ii);var ih=ii?function(iq){var iu=Math.sin(iq*=ii)*ic,ip=Math.sin(ii-iq)*ic,io=ip*ig+iu*ie,it=ip*h8+iu*d3,ir=ip*il+iu*ij;return[Math.atan2(it,io)*hC,Math.atan2(ir,Math.sqrt(io*io+it*it))*hC]}:function(){return[ia*hC,im*hC]};ih.distance=ii;return ih}hl.geo.length=function(d3){dS=0;hl.geo.stream(d3,fW);return dS};var dS;var fW={sphere:aH,point:aH,lineStart:hJ,lineEnd:aH,polygonStart:aH,polygonEnd:aH};function hJ(){var h8,h9,d3;fW.point=function(ic,ib){h8=ic*J,h9=Math.sin(ib*=J),d3=Math.cos(ib);fW.point=ia};fW.lineEnd=function(){fW.point=fW.lineEnd=aH};function ia(ic,ib){var ig=Math.sin(ib*=J),ih=Math.cos(ib),id=cG((ic*=J)-h8),ie=Math.cos(id);dS+=Math.atan2(Math.sqrt((id=ih*Math.sin(id))*id+(id=d3*ig-h9*ih*ie)*id),h9*ig+d3*ih*ie);h8=ic,h9=ig,d3=ih}}function ey(h9,h8){function d3(ib,ia){var ie=Math.cos(ib),id=Math.cos(ia),ic=h9(ie*id);return[ic*id*Math.sin(ib),ic*Math.sin(ia)]}d3.invert=function(ia,ig){var id=Math.sqrt(ia*ia+ig*ig),ie=h8(id),ib=Math.sin(ie),ic=Math.cos(ie);return[Math.atan2(ia*ib,id*ic),Math.asin(id&&ig*ib/id)]};return d3}var bt=ey(function(d3){return Math.sqrt(2/(1+d3))},function(d3){return 2*Math.asin(d3/2)});(hl.geo.azimuthalEqualArea=function(){return fA(bt)}).raw=bt;var bH=ey(function(d3){var h8=Math.acos(d3);return h8&&h8/Math.sin(h8)},gk);(hl.geo.azimuthalEquidistant=function(){return fA(bH)}).raw=bH;function fJ(h9,h8){var d3=Math.cos(h9),ib=function(ie){return Math.tan(gd/4+ie/2)},id=h9===h8?Math.sin(h9):Math.log(d3/Math.cos(h8))/Math.log(ib(h8)/ib(h9)),ic=d3*Math.pow(ib(h9),id)/id;if(!id){return aT}function ia(ig,ie){if(ic>0){if(ie<-eo+gm){ie=-eo+gm}}else{if(ie>eo-gm){ie=eo-gm}}var ih=ic/Math.pow(ib(ie),id);return[ih*Math.sin(id*ig),ic-ih*Math.cos(id*ig)]}ia.invert=function(ie,ii){var ih=ic-ii,ig=b9(id)*Math.sqrt(ie*ie+ih*ih);return[Math.atan2(ie,ih)/id,2*Math.atan(Math.pow(ic/ig,1/id))-eo]};return ia}(hl.geo.conicConformal=function(){return b7(fJ)}).raw=fJ;function hy(h9,h8){var d3=Math.cos(h9),ic=h9===h8?Math.sin(h9):(d3-Math.cos(h8))/(h8-h9),ib=d3/ic+h9;if(cG(ic)<gm){return bz}function ia(ie,id){var ig=ib-id;return[ig*Math.sin(ic*ie),ib-ig*Math.cos(ic*ie)]}ia.invert=function(id,ig){var ie=ib-ig;return[Math.atan2(id,ie)/ic,ib-b9(ic)*Math.sqrt(id*id+ie*ie)]};return ia}(hl.geo.conicEquidistant=function(){return b7(hy)}).raw=hy;var eF=ey(function(d3){return 1/d3},Math.atan);(hl.geo.gnomonic=function(){return fA(eF)}).raw=eF;function aT(h8,d3){return[h8,Math.log(Math.tan(gd/4+d3/2))]}aT.invert=function(d3,h8){return[d3,2*Math.atan(Math.exp(h8))-eo]};function c5(ic){var d3=fA(ic),ib=d3.scale,ia=d3.translate,h8=d3.clipExtent,h9;d3.scale=function(){var id=ib.apply(d3,arguments);return id===d3?h9?d3.clipExtent(null):d3:id};d3.translate=function(){var id=ia.apply(d3,arguments);return id===d3?h9?d3.clipExtent(null):d3:id};d3.clipExtent=function(ig){var ie=h8.apply(d3,arguments);if(ie===d3){if(h9=ig==null){var id=gd*ib(),ih=ia();h8([[ih[0]-id,ih[1]-id],[ih[0]+id,ih[1]+id]])}}else{if(h9){ie=null}}return ie};return d3.clipExtent(null)}(hl.geo.mercator=function(){return c5(aT)}).raw=aT;var fY=ey(function(){return 1},Math.asin);(hl.geo.orthographic=function(){return fA(fY)}).raw=fY;var cd=ey(function(d3){return 1/(1+d3)},function(d3){return 2*Math.atan(d3)});(hl.geo.stereographic=function(){return fA(cd)}).raw=cd;function aj(h8,d3){return[Math.log(Math.tan(gd/4+d3/2)),-h8]}aj.invert=function(d3,h8){return[-h8,2*Math.atan(Math.exp(d3))-eo]};(hl.geo.transverseMercator=function(){var h8=c5(aj),d3=h8.center,h9=h8.rotate;h8.center=function(ia){return ia?d3([-ia[1],ia[0]]):(ia=d3(),[ia[1],-ia[0]])};h8.rotate=function(ia){return ia?h9([ia[0],ia[1],ia.length>2?ia[2]+90:90]):(ia=h9(),[ia[0],ia[1],ia[2]-90])};return h9([0,0,90])}).raw=aj;hl.geom={};function hR(d3){return d3[0]}function hQ(d3){return d3[1]}hl.geom.hull=function(h8){var d3=hR,ia=hQ;if(arguments.length){return h9(h8)}function h9(ii){if(ii.length<3){return[]}var id=R(d3),ic=R(ia),ij,ib=ii.length,il=[],im=[];for(ij=0;ij<ib;ij++){il.push([+id.call(this,ii[ij],ij),+ic.call(this,ii[ij],ij),ij])}il.sort(hZ);for(ij=0;ij<ib;ij++){im.push([il[ij][0],-il[ij][1]])}var io=bp(il),ih=bp(im);var ie=ih[0]===io[0],ig=ih[ih.length-1]===io[io.length-1],ik=[];for(ij=io.length-1;ij>=0;--ij){ik.push(ii[il[io[ij]][2]])}for(ij=+ie;ij<ih.length-ig;++ij){ik.push(ii[il[ih[ij]][2]])}return ik}h9.x=function(ib){return arguments.length?(d3=ib,h9):d3};h9.y=function(ib){return arguments.length?(ia=ib,h9):ia};return h9};function bp(h9){var ib=h9.length,ia=[0,1],h8=2;for(var d3=2;d3<ib;d3++){while(h8>1&&eZ(h9[ia[h8-2]],h9[ia[h8-1]],h9[d3])<=0){--h8}ia[h8++]=d3}return ia.slice(0,h8)}function hZ(h8,d3){return h8[0]-d3[0]||h8[1]-d3[1]}hl.geom.polygon=function(d3){h2(d3,ep);return d3};var ep=hl.geom.polygon.prototype=[];ep.area=function(){var h9=-1,ib=this.length,h8,d3=this[ib-1],ia=0;while(++h9<ib){h8=d3;d3=this[h9];ia+=h8[1]*d3[0]-h8[0]*d3[1]}return ia*0.5};ep.centroid=function(ia){var ib=-1,ie=this.length,h8=0,id=0,h9,d3=this[ie-1],ic;if(!arguments.length){ia=-1/(6*this.area())}while(++ib<ie){h9=d3;d3=this[ib];ic=h9[0]*d3[1]-d3[0]*h9[1];h8+=(h9[0]+d3[0])*ic;id+=(h9[1]+d3[1])*ic}return[h8*ia,id*ia]};ep.clip=function(ie){var ih,ib=gT(ie),ia=-1,d3=this.length-gT(this),h9,h8,ii=this[d3-1],ig,id,ic;while(++ia<d3){ih=ie.slice();ie.length=0;ig=this[ia];id=ih[(h8=ih.length-ib)-1];h9=-1;while(++h9<h8){ic=ih[h9];if(E(ic,ii,ig)){if(!E(id,ii,ig)){ie.push(gi(id,ic,ii,ig))}ie.push(ic)}else{if(E(id,ii,ig)){ie.push(gi(id,ic,ii,ig))}}id=ic}if(ib){ie.push(ie[0])}ii=ig}return ie};function E(h9,h8,d3){return(d3[0]-h8[0])*(h9[1]-h8[1])<(d3[1]-h8[1])*(h9[0]-h8[0])}function gi(id,ib,ii,ie){var h9=id[0],d3=ii[0],ia=ib[0]-h9,ij=ie[0]-d3,ih=id[1],ic=ii[1],ig=ib[1]-ih,ik=ie[1]-ic,h8=(ij*(ih-ic)-ik*(h9-d3))/(ik*ia-ij*ig);return[h9+h8*ia,ih+h8*ig]}function gT(h9){var h8=h9[0],d3=h9[h9.length-1];return !(h8[0]-d3[0]||h8[1]-d3[1])}var gO,ew,cR,dd=[],hb,d1,et=[];function gC(){t(this);this.edge=this.site=this.circle=null}function eX(h8){var d3=dd.pop()||new gC();d3.site=h8;return d3}function gB(d3){eM(d3);cR.remove(d3);dd.push(d3);t(d3)}function hn(h8){var d3=h8.circle,ih=d3.x,id=d3.cy,ib={x:ih,y:id},ic=h8.P,ia=h8.N,ig=[h8];gB(h8);var ij=ic;while(ij.circle&&cG(ih-ij.circle.x)<gm&&cG(id-ij.circle.cy)<gm){ic=ij.P;ig.unshift(ij);gB(ij);ij=ic}ig.unshift(ij);eM(ij);var h9=ia;while(h9.circle&&cG(ih-h9.circle.x)<gm&&cG(id-h9.circle.cy)<gm){ia=h9.N;ig.push(h9);gB(h9);h9=ia}ig.push(h9);eM(h9);var ii=ig.length,ie;for(ie=1;ie<ii;++ie){h9=ig[ie];ij=ig[ie-1];cp(h9.edge,ij.site,h9.site,ib)}ij=ig[0];h9=ig[ii-1];h9.edge=hh(ij.site,h9.site,null,ib);W(ij);W(h9)}function du(ii){var ig=ii.x,ik=ii.y,im,ij,iu,io,il=cR._;while(il){iu=c7(il,ik)-ig;if(iu>gm){il=il.L}else{io=ig-gc(il,ik);if(io>gm){if(!il.R){im=il;break}il=il.R}else{if(iu>-gm){im=il.P;ij=il}else{if(io>-gm){im=il;ij=il.N}else{im=ij=il}}break}}}var ia=eX(ii);cR.insert(im,ia);if(!im&&!ij){return}if(im===ij){eM(im);ij=eX(im.site);cR.insert(ia,ij);ia.edge=ij.edge=hh(im.site,ia.site);W(im);W(ij);return}if(!ij){ia.edge=hh(im.site,ia.site);return}eM(im);eM(ij);var id=im.site,ih=id.x,ie=id.y,ir=ii.x-ih,ip=ii.y-ie,d3=ij.site,h9=d3.x-ih,h8=d3.y-ie,it=2*(ir*h8-ip*h9),ic=ir*ir+ip*ip,ib=h9*h9+h8*h8,iq={x:(h8*ic-ip*ib)/it+ih,y:(ir*ib-h9*ic)/it+ie};cp(ij.edge,id,d3,iq);ia.edge=hh(id,ii,null,iq);ij.edge=hh(ii,d3,null,iq);W(im);W(ij)}function c7(ia,ib){var d3=ia.site,ij=d3.x,ii=d3.y,ih=ii-ib;if(!ih){return ij}var ik=ia.P;if(!ik){return -Infinity}d3=ik.site;var id=d3.x,ic=d3.y,h9=ic-ib;if(!h9){return id}var h8=id-ij,ig=1/ih-1/h9,ie=h8/h9;if(ig){return(-ie+Math.sqrt(ie*ie-2*ig*(h8*h8/(-2*h9)-ic+h9/2+ii-ih/2)))/ig+ij}return(ij+id)/2}function gc(h8,h9){var ia=h8.N;if(ia){return c7(ia,h9)}var d3=h8.site;return d3.y===h9?d3.x:Infinity}function bY(d3){this.site=d3;this.edges=[]}bY.prototype.prepare=function(){var h9=this.edges,d3=h9.length,h8;while(d3--){h8=h9[d3].edge;if(!h8.b||!h8.a){h9.splice(d3,1)}}h9.sort(u);return h9.length};function by(ip){var id=ip[0][0],ic=ip[1][0],ik=ip[0][1],ij=ip[1][1],ia,ii,d3,ih,io=ew,h9=io.length,im,il,ig,h8,ib,ie;while(h9--){im=io[h9];if(!im||!im.prepare()){continue}ig=im.edges;h8=ig.length;il=0;while(il<h8){ie=ig[il].end(),d3=ie.x,ih=ie.y;ib=ig[++il%h8].start(),ia=ib.x,ii=ib.y;if(cG(d3-ia)>gm||cG(ih-ii)>gm){ig.splice(il,0,new hX(g6(im.site,ie,cG(d3-id)<gm&&ij-ih>gm?{x:id,y:cG(ia-id)<gm?ii:ij}:cG(ih-ij)<gm&&ic-d3>gm?{x:cG(ii-ij)<gm?ia:ic,y:ij}:cG(d3-ic)<gm&&ih-ik>gm?{x:ic,y:cG(ia-ic)<gm?ii:ik}:cG(ih-ik)<gm&&d3-id>gm?{x:cG(ii-ik)<gm?ia:id,y:ik}:null),im.site,null));++h8}}}}function u(h8,d3){return d3.angle-h8.angle}function aV(){t(this);this.x=this.y=this.arc=this.site=this.cy=null}function W(id){var io=id.P,il=id.N;if(!io||!il){return}var ig=io.site,ir=id.site,d3=il.site;if(ig===d3){return}var iq=ir.x,ip=ir.y,ij=ig.x-iq,ih=ig.y-ip,h9=d3.x-iq,h8=d3.y-ip;var it=2*(ij*h8-ih*h9);if(it>=-eD){return}var ic=ij*ij+ih*ih,ib=h9*h9+h8*h8,ii=(h8*ic-ih*ib)/it,ie=(ij*ib-h9*ic)/it,h8=ie+ip;var ia=et.pop()||new aV();ia.arc=id;ia.site=ir;ia.x=ii+iq;ia.y=h8+Math.sqrt(ii*ii+ie*ie);ia.cy=h8;id.circle=ia;var ik=null,im=d1._;while(im){if(ia.y<im.y||ia.y===im.y&&ia.x<=im.x){if(im.L){im=im.L}else{ik=im.P;break}}else{if(im.R){im=im.R}else{ik=im;break}}}d1.insert(ik,ia);if(!ik){hb=ia}}function eM(d3){var h8=d3.circle;if(h8){if(!h8.P){hb=h8.N}d1.remove(h8);et.push(h8);t(h8);d3.circle=null}}function hA(h9){var d3=gO,ia=ak(h9[0][0],h9[0][1],h9[1][0],h9[1][1]),h8=d3.length,ib;while(h8--){ib=d3[h8];if(!bm(ib,h9)||!ia(ib)||cG(ib.a.x-ib.b.x)<gm&&cG(ib.a.y-ib.b.y)<gm){ib.a=ib.b=null;d3.splice(h8,1)}}}function bm(ij,im){var d3=ij.b;if(d3){return true}var h8=ij.a,iq=im[0][0],ip=im[1][0],ic=im[0][1],ia=im[1][1],il=ij.l,h9=ij.r,ig=il.x,ie=il.y,ii=h9.x,ih=h9.y,id=(ig+ii)/2,ib=(ie+ih)/2,ik,io;if(ih===ie){if(id<iq||id>=ip){return}if(ig>ii){if(!h8){h8={x:id,y:ic}}else{if(h8.y>=ia){return}}d3={x:id,y:ia}}else{if(!h8){h8={x:id,y:ia}}else{if(h8.y<ic){return}}d3={x:id,y:ic}}}else{ik=(ig-ii)/(ih-ie);io=ib-ik*id;if(ik<-1||ik>1){if(ig>ii){if(!h8){h8={x:(ic-io)/ik,y:ic}}else{if(h8.y>=ia){return}}d3={x:(ia-io)/ik,y:ia}}else{if(!h8){h8={x:(ia-io)/ik,y:ia}}else{if(h8.y<ic){return}}d3={x:(ic-io)/ik,y:ic}}}else{if(ie<ih){if(!h8){h8={x:iq,y:ik*iq+io}}else{if(h8.x>=ip){return}}d3={x:ip,y:ik*ip+io}}else{if(!h8){h8={x:ip,y:ik*ip+io}}else{if(h8.x<iq){return}}d3={x:iq,y:ik*iq+io}}}}ij.a=h8;ij.b=d3;return true}function G(h8,d3){this.l=h8;this.r=d3;this.a=this.b=null}function hh(ib,d3,ia,h8){var h9=new G(ib,d3);gO.push(h9);if(ia){cp(h9,ib,d3,ia)}if(h8){cp(h9,d3,ib,h8)}ew[ib.i].edges.push(new hX(h9,ib,d3));ew[d3.i].edges.push(new hX(h9,d3,ib));return h9}function g6(ia,h9,d3){var h8=new G(ia,null);h8.a=h9;h8.b=d3;gO.push(h8);return h8}function cp(h8,ia,d3,h9){if(!h8.a&&!h8.b){h8.a=h9;h8.l=ia;h8.r=d3}else{if(h8.l===d3){h8.b=h9}else{h8.a=h9}}}function hX(ia,ib,d3){var h9=ia.a,h8=ia.b;this.edge=ia;this.site=ib;this.angle=d3?Math.atan2(d3.y-ib.y,d3.x-ib.x):ia.l===ib?Math.atan2(h8.x-h9.x,h9.y-h8.y):Math.atan2(h9.x-h8.x,h8.y-h9.y)}hX.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ba(){this._=null}function t(d3){d3.U=d3.C=d3.L=d3.R=d3.P=d3.N=null}ba.prototype={insert:function(ib,ia){var h9,h8,d3;if(ib){ia.P=ib;ia.N=ib.N;if(ib.N){ib.N.P=ia}ib.N=ia;if(ib.R){ib=ib.R;while(ib.L){ib=ib.L}ib.L=ia}else{ib.R=ia}h9=ib}else{if(this._){ib=da(this._);ia.P=null;ia.N=ib;ib.P=ib.L=ia;h9=ib}else{ia.P=ia.N=null;this._=ia;h9=null}}ia.L=ia.R=null;ia.U=h9;ia.C=true;ib=ia;while(h9&&h9.C){h8=h9.U;if(h9===h8.L){d3=h8.R;if(d3&&d3.C){h9.C=d3.C=false;h8.C=true;ib=h8}else{if(ib===h9.R){ai(this,h9);ib=h9;h9=ib.U}h9.C=false;h8.C=true;eQ(this,h8)}}else{d3=h8.L;if(d3&&d3.C){h9.C=d3.C=false;h8.C=true;ib=h8}else{if(ib===h9.L){eQ(this,h9);ib=h9;h9=ib.U}h9.C=false;h8.C=true;ai(this,h8)}}h9=ib.U}this._.C=false},remove:function(ib){if(ib.N){ib.N.P=ib.P}if(ib.P){ib.P.N=ib.N}ib.N=ib.P=null;var ia=ib.U,h9,id=ib.L,d3=ib.R,h8,ic;if(!id){h8=d3}else{if(!d3){h8=id}else{h8=da(d3)}}if(ia){if(ia.L===ib){ia.L=h8}else{ia.R=h8}}else{this._=h8}if(id&&d3){ic=h8.C;h8.C=ib.C;h8.L=id;id.U=h8;if(h8!==d3){ia=h8.U;h8.U=ib.U;ib=h8.R;ia.L=ib;h8.R=d3;d3.U=h8}else{h8.U=ia;ia=h8;ib=h8.R}}else{ic=ib.C;ib=h8}if(ib){ib.U=ia}if(ic){return}if(ib&&ib.C){ib.C=false;return}do{if(ib===this._){break}if(ib===ia.L){h9=ia.R;if(h9.C){h9.C=false;ia.C=true;ai(this,ia);h9=ia.R}if(h9.L&&h9.L.C||h9.R&&h9.R.C){if(!h9.R||!h9.R.C){h9.L.C=false;h9.C=true;eQ(this,h9);h9=ia.R}h9.C=ia.C;ia.C=h9.R.C=false;ai(this,ia);ib=this._;break}}else{h9=ia.L;if(h9.C){h9.C=false;ia.C=true;eQ(this,ia);h9=ia.L}if(h9.L&&h9.L.C||h9.R&&h9.R.C){if(!h9.L||!h9.L.C){h9.R.C=false;h9.C=true;ai(this,h9);h9=ia.L}h9.C=ia.C;ia.C=h9.L.C=false;eQ(this,ia);ib=this._;break}}h9.C=true;ib=ia;ia=ia.U}while(!ib.C);if(ib){ib.C=false}}};function ai(d3,h9){var ib=h9,ia=h9.R,h8=ib.U;if(h8){if(h8.L===ib){h8.L=ia}else{h8.R=ia}}else{d3._=ia}ia.U=h8;ib.U=ia;ib.R=ia.L;if(ib.R){ib.R.U=ib}ia.L=ib}function eQ(d3,h9){var ib=h9,ia=h9.L,h8=ib.U;if(h8){if(h8.L===ib){h8.L=ia}else{h8.R=ia}}else{d3._=ia}ia.U=h8;ib.U=ia;ib.L=ia.R;if(ib.L){ib.L.U=ib}ia.R=ib}function da(d3){while(d3.L){d3=d3.L}return d3}function g1(ic,id){var h8=ic.sort(bk).pop(),h9,ia,ib;gO=[];ew=new Array(ic.length);cR=new ba();d1=new ba();while(true){ib=hb;if(h8&&(!ib||h8.y<ib.y||h8.y===ib.y&&h8.x<ib.x)){if(h8.x!==h9||h8.y!==ia){ew[h8.i]=new bY(h8);du(h8);h9=h8.x,ia=h8.y}h8=ic.pop()}else{if(ib){hn(ib.arc)}else{break}}}if(id){hA(id),by(id)}var d3={cells:ew,edges:gO};cR=d1=gO=ew=null;return d3}function bk(h8,d3){return d3.y-h8.y||d3.x-h8.x}hl.geom.voronoi=function(ia){var d3=hR,ie=hQ,ib=d3,h9=ie,h8=hE;if(ia){return id(ia)}function id(il){var ig=new Array(il.length),ii=h8[0][0],ik=h8[0][1],ih=h8[1][0],ij=h8[1][1];g1(ic(il),h8).cells.forEach(function(im,ir){var io=im.edges,ip=im.site,iq=ig[ir]=io.length?io.map(function(iu){var it=iu.start();return[it.x,it.y]}):ip.x>=ii&&ip.x<=ih&&ip.y>=ik&&ip.y<=ij?[[ii,ij],[ih,ij],[ih,ik],[ii,ik]]:[];iq.point=il[ir]});return ig}function ic(ig){return ig.map(function(ii,ih){return{x:Math.round(ib(ii,ih)/gm)*gm,y:Math.round(h9(ii,ih)/gm)*gm,i:ih}})}id.links=function(ig){return g1(ic(ig)).edges.filter(function(ih){return ih.l&&ih.r}).map(function(ih){return{source:ig[ih.l.i],target:ig[ih.r.i]}})};id.triangles=function(ih){var ig=[];g1(ic(ih)).cells.forEach(function(ir,im){var ii=ir.site,il=ir.edges.sort(u),ik=-1,ij=il.length,ip,it,io=il[ij-1].edge,iq=io.l===ii?io.r:io.l;while(++ik<ij){ip=io;it=iq;io=il[ik].edge;iq=io.l===ii?io.r:io.l;if(im<it.i&&im<iq.i&&gA(ii,it,iq)<0){ig.push([ih[im],ih[it.i],ih[iq.i]])}}});return ig};id.x=function(ig){return arguments.length?(ib=R(d3=ig),id):d3};id.y=function(ig){return arguments.length?(h9=R(ie=ig),id):ie};id.clipExtent=function(ig){if(!arguments.length){return h8===hE?null:h8}h8=ig==null?hE:ig;return id};id.size=function(ig){if(!arguments.length){return h8===hE?null:h8&&h8[1]}return id.clipExtent(ig&&[[0,0],ig])};return id};var hE=[[-1000000,-1000000],[1000000,1000000]];function gA(h8,d3,h9){return(h8.x-h9.x)*(d3.y-h8.y)-(h8.x-d3.x)*(h9.y-h8.y)}hl.geom.delaunay=function(d3){return hl.geom.voronoi().triangles(d3)};hl.geom.quadtree=function(ie,h8,ic,d3,ib){var id=hR,ia=hQ,ig;if(ig=arguments.length){id=f3;ia=f1;if(ig===3){ib=ic;d3=h8;ic=h8=0}return h9(ie)}function h9(iB){var iy,il=R(id),ij=R(ia),io,iv,iw,it,ih,ir,im,iA;if(h8!=null){ih=h8,ir=ic,im=d3,iA=ib}else{im=iA=-(ih=ir=Infinity);io=[],iv=[];it=iB.length;if(ig){for(iw=0;iw<it;++iw){iy=iB[iw];if(iy.x<ih){ih=iy.x}if(iy.y<ir){ir=iy.y}if(iy.x>im){im=iy.x}if(iy.y>iA){iA=iy.y}io.push(iy.x);iv.push(iy.y)}}else{for(iw=0;iw<it;++iw){var ix=+il(iy=iB[iw],iw),ik=+ij(iy,iw);if(ix<ih){ih=ix}if(ik<ir){ir=ik}if(ix>im){im=ix}if(ik>iA){iA=ik}io.push(ix);iv.push(ik)}}}var iq=im-ih,ip=iA-ir;if(iq>ip){iA=ir+iq}else{im=ih+ip}function ii(iE,iI,iM,iJ,iD,iL,iC,iK){if(isNaN(iM)||isNaN(iJ)){return}if(iE.leaf){var iH=iE.x,iG=iE.y;if(iH!=null){if(cG(iH-iM)+cG(iG-iJ)<0.01){iz(iE,iI,iM,iJ,iD,iL,iC,iK)}else{var iF=iE.point;iE.x=iE.y=iE.point=null;iz(iE,iF,iH,iG,iD,iL,iC,iK);iz(iE,iI,iM,iJ,iD,iL,iC,iK)}}else{iE.x=iM,iE.y=iJ,iE.point=iI}}else{iz(iE,iI,iM,iJ,iD,iL,iC,iK)}}function iz(iF,iI,iM,iJ,iD,iL,iC,iK){var iH=(iD+iC)*0.5,iE=(iL+iK)*0.5,iO=iM>=iH,iN=iJ>=iE,iG=iN<<1|iO;iF.leaf=false;iF=iF.nodes[iG]||(iF.nodes[iG]=fH());if(iO){iD=iH}else{iC=iH}if(iN){iL=iE}else{iK=iE}ii(iF,iI,iM,iJ,iD,iL,iC,iK)}var iu=fH();iu.add=function(iC){ii(iu,iC,+il(iC,++iw),+ij(iC,iw),ih,ir,im,iA)};iu.visit=function(iC){cM(iC,iu,ih,ir,im,iA)};iu.find=function(iC){return ej(iu,iC[0],iC[1],ih,ir,im,iA)};iw=-1;if(h8==null){while(++iw<it){ii(iu,iB[iw],io[iw],iv[iw],ih,ir,im,iA)}--iw}else{iB.forEach(iu.add)}io=iv=iB=iy=null;return iu}h9.x=function(ih){return arguments.length?(id=ih,h9):id};h9.y=function(ih){return arguments.length?(ia=ih,h9):ia};h9.extent=function(ih){if(!arguments.length){return h8==null?null:[[h8,ic],[d3,ib]]}if(ih==null){h8=ic=d3=ib=null}else{h8=+ih[0][0],ic=+ih[0][1],d3=+ih[1][0],ib=+ih[1][1]}return h9};h9.size=function(ih){if(!arguments.length){return h8==null?null:[d3-h8,ib-ic]}if(ih==null){h8=ic=d3=ib=null}else{h8=ic=0,d3=+ih[0],ib=+ih[1]}return h9};return h9};function f3(d3){return d3.x}function f1(d3){return d3.y}function fH(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function cM(ib,ia,h8,ig,d3,id){if(!ib(ia,h8,ig,d3,id)){var ie=(h8+d3)*0.5,ic=(ig+id)*0.5,h9=ia.nodes;if(h9[0]){cM(ib,h9[0],h8,ig,ie,ic)}if(h9[1]){cM(ib,h9[1],ie,ig,d3,ic)}if(h9[2]){cM(ib,h9[2],h8,ic,ie,id)}if(h9[3]){cM(ib,h9[3],ie,ic,d3,id)}}}function ej(id,ig,ic,h9,ih,d3,ib){var ie=Infinity,h8;(function ia(io,ik,iv,ij,iu){if(ik>d3||iv>ib||ij<h9||iu<ih){return}if(ix=io.point){var ix,iA=ig-ix[0],iz=ic-ix[1],it=iA*iA+iz*iz;if(it<ie){var ii=Math.sqrt(ie=it);h9=ig-ii,ih=ic-ii;d3=ig+ii,ib=ic+ii;h8=ix}}var im=io.nodes,ir=(ik+ij)*0.5,il=(iv+iu)*0.5,iy=ig>=ir,iw=ic>=il;for(var iq=iw<<1|iy,ip=iq+4;iq<ip;++iq){if(io=im[iq&3]){switch(iq&3){case 0:ia(io,ik,iv,ir,il);break;case 1:ia(io,ir,iv,ij,il);break;case 2:ia(io,ik,il,ir,iu);break;case 3:ia(io,ir,il,ij,iu);break}}}})(id,h9,ih,d3,ib);return h8}hl.interpolateRgb=aN;function aN(h8,d3){h8=hl.rgb(h8);d3=hl.rgb(d3);var ia=h8.r,h9=h8.g,id=h8.b,ic=d3.r-ia,ib=d3.g-h9,ie=d3.b-id;return function(ig){return"#"+cv(Math.round(ia+ic*ig))+cv(Math.round(h9+ib*ig))+cv(Math.round(id+ie*ig))}}hl.interpolateObject=bM;function bM(h8,d3){var ia={},ib={},h9;for(h9 in h8){if(h9 in d3){ia[h9]=fC(h8[h9],d3[h9])}else{ib[h9]=h8[h9]}}for(h9 in d3){if(!(h9 in h8)){ib[h9]=d3[h9]}}return function(ic){for(h9 in ia){ib[h9]=ia[h9](ic)}return ib}}hl.interpolateNumber=bG;function bG(h8,d3){h8=+h8,d3=+d3;return function(h9){return h8*(1-h9)+d3*h9}}hl.interpolateString=b1;function b1(id,ic){var h9=hz.lastIndex=hx.lastIndex=0,ib,h8,ie,ia=-1,ig=[],d3=[];id=id+"",ic=ic+"";while((ib=hz.exec(id))&&(h8=hx.exec(ic))){if((ie=h8.index)>h9){ie=ic.slice(h9,ie);if(ig[ia]){ig[ia]+=ie}else{ig[++ia]=ie}}if((ib=ib[0])===(h8=h8[0])){if(ig[ia]){ig[ia]+=h8}else{ig[++ia]=h8}}else{ig[++ia]=null;d3.push({i:ia,x:bG(ib,h8)})}h9=hx.lastIndex}if(h9<ic.length){ie=ic.slice(h9);if(ig[ia]){ig[ia]+=ie}else{ig[++ia]=ie}}return ig.length<2?d3[0]?(ic=d3[0].x,function(ih){return ic(ih)+""}):function(){return ic}:(ic=d3.length,function(ii){for(var ih=0,ij;ih<ic;++ih){ig[(ij=d3[ih]).i]=ij.x(ii)}return ig.join("")})}var hz=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hx=new RegExp(hz.source,"g");hl.interpolate=fC;function fC(h8,d3){var h9=hl.interpolators.length,ia;while(--h9>=0&&!(ia=hl.interpolators[h9](h8,d3))){}return ia}hl.interpolators=[function(h8,d3){var h9=typeof d3;return(h9==="string"?am.has(d3)||/^(#|rgb\(|hsl\()/.test(d3)?aN:b1:d3 instanceof gV?aN:Array.isArray(d3)?eO:h9==="object"&&isNaN(d3)?bM:bG)(h8,d3)}];hl.interpolateArray=eO;function eO(ib,h9){var h8=[],ie=[],ia=ib.length,d3=h9.length,id=Math.min(ib.length,h9.length),ic;for(ic=0;ic<id;++ic){h8.push(fC(ib[ic],h9[ic]))}for(;ic<ia;++ic){ie[ic]=ib[ic]}for(;ic<d3;++ic){ie[ic]=h9[ic]}return function(ig){for(ic=0;ic<id;++ic){ie[ic]=h8[ic](ig)}return ie}}var hg=function(){return gk};var ab=hl.map({linear:hg,poly:aS,quad:function(){return bZ},cubic:function(){return I},sin:function(){return gb},exp:function(){return fu},circle:function(){return d4},elastic:V,back:gZ,bounce:function(){return ck}});var k=hl.map({"in":gk,out:D,"in-out":a2,"out-in":function(d3){return a2(D(d3))}});hl.ease=function(h8){var ia=h8.indexOf("-"),h9=ia>=0?h8.slice(0,ia):h8,d3=ia>=0?h8.slice(ia+1):"in";h9=ab.get(h9)||hg;d3=k.get(d3)||gk;return fz(d3(h9.apply(null,bO.call(arguments,1))))};function fz(d3){return function(h8){return h8<=0?0:h8>=1?1:d3(h8)}}function D(d3){return function(h8){return 1-d3(1-h8)}}function a2(d3){return function(h8){return 0.5*(h8<0.5?d3(2*h8):2-d3(2-2*h8))}}function bZ(d3){return d3*d3}function I(d3){return d3*d3*d3}function aw(h8){if(h8<=0){return 0}if(h8>=1){return 1}var h9=h8*h8,d3=h9*h8;return 4*(h8<0.5?d3:3*(h8-h9)+d3-0.75)}function aS(d3){return function(h8){return Math.pow(h8,d3)}}function gb(d3){return 1-Math.cos(d3*eo)}function fu(d3){return Math.pow(2,10*(d3-1))}function d4(d3){return 1-Math.sqrt(1-d3*d3)}function V(d3,h9){var h8;if(arguments.length<2){h9=0.45}if(arguments.length){h8=h9/f7*Math.asin(1/d3)}else{d3=1,h8=h9/4}return function(ia){return 1+d3*Math.pow(2,-10*ia)*Math.sin((ia-h8)*f7/h9)}}function gZ(d3){if(!d3){d3=1.70158}return function(h8){return h8*h8*((d3+1)*h8-d3)}}function ck(d3){return d3<1/2.75?7.5625*d3*d3:d3<2/2.75?7.5625*(d3-=1.5/2.75)*d3+0.75:d3<2.5/2.75?7.5625*(d3-=2.25/2.75)*d3+0.9375:7.5625*(d3-=2.625/2.75)*d3+0.984375}hl.interpolateHcl=gR;function gR(h9,d3){h9=hl.hcl(h9);d3=hl.hcl(d3);var h8=h9.h,ib=h9.c,id=h9.l,ia=d3.h-h8,ic=d3.c-ib,ie=d3.l-id;if(isNaN(ic)){ic=0,ib=isNaN(ib)?d3.c:ib}if(isNaN(ia)){ia=0,h8=isNaN(h8)?d3.h:h8}else{if(ia>180){ia-=360}else{if(ia<-180){ia+=360}}}return function(ig){return bD(h8+ia*ig,ib+ic*ig,id+ie*ig)+""}}hl.interpolateHsl=a3;function a3(ia,d3){ia=hl.hsl(ia);d3=hl.hsl(d3);var h9=ia.h,h8=ia.s,id=ia.l,ic=d3.h-h9,ib=d3.s-h8,ie=d3.l-id;if(isNaN(ib)){ib=0,h8=isNaN(h8)?d3.s:h8}if(isNaN(ic)){ic=0,h9=isNaN(h9)?d3.h:h9}else{if(ic>180){ic-=360}else{if(ic<-180){ic+=360}}}return function(ig){return bg(h9+ic*ig,h8+ib*ig,id+ie*ig)+""}}hl.interpolateLab=hw;function hw(h8,d3){h8=hl.lab(h8);d3=hl.lab(d3);var ib=h8.l,ia=h8.a,h9=h8.b,ie=d3.l-ib,id=d3.a-ia,ic=d3.b-h9;return function(ig){return aC(ib+ie*ig,ia+id*ig,h9+ic*ig)+""}}hl.interpolateRound=fx;function fx(h8,d3){d3-=h8;return function(h9){return Math.round(h8+d3*h9)}}hl.transform=function(d3){var h8=bN.createElementNS(hl.ns.prefix.svg,"g");return(hl.transform=function(h9){if(h9!=null){h8.setAttribute("transform",h9);var ia=h8.transform.baseVal.consolidate()}return new p(ia?ia.matrix:f8)})(d3)};function p(d3){var ia=[d3.a,d3.b],h8=[d3.c,d3.d],ic=fp(ia),h9=eY(ia,h8),ib=fp(bS(h8,ia,-h9))||0;if(ia[0]*h8[1]<h8[0]*ia[1]){ia[0]*=-1;ia[1]*=-1;ic*=-1;h9*=-1}this.rotate=(ic?Math.atan2(ia[1],ia[0]):Math.atan2(-h8[0],h8[1]))*hC;this.translate=[d3.e,d3.f];this.scale=[ic,ib];this.skew=ib?Math.atan2(h9,ib)*hC:0}p.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function eY(h8,d3){return h8[0]*d3[0]+h8[1]*d3[1]}function fp(d3){var h8=Math.sqrt(eY(d3,d3));if(h8){d3[0]/=h8;d3[1]/=h8}return h8}function bS(h8,d3,h9){h8[0]+=h9*d3[0];h8[1]+=h9*d3[1];return h8}var f8={a:1,b:0,c:0,d:1,e:0,f:0};hl.interpolateTransform=ef;function ef(il,ik){var im=[],h8=[],ic,ib=hl.transform(il),ia=hl.transform(ik),ih=ib.translate,ig=ia.translate,h9=ib.rotate,d3=ia.rotate,ie=ib.skew,id=ia.skew,ij=ib.scale,ii=ia.scale;if(ih[0]!=ig[0]||ih[1]!=ig[1]){im.push("translate(",null,",",null,")");h8.push({i:1,x:bG(ih[0],ig[0])},{i:3,x:bG(ih[1],ig[1])})}else{if(ig[0]||ig[1]){im.push("translate("+ig+")")}else{im.push("")}}if(h9!=d3){if(h9-d3>180){d3+=360}else{if(d3-h9>180){h9+=360}}h8.push({i:im.push(im.pop()+"rotate(",null,")")-2,x:bG(h9,d3)})}else{if(d3){im.push(im.pop()+"rotate("+d3+")")}}if(ie!=id){h8.push({i:im.push(im.pop()+"skewX(",null,")")-2,x:bG(ie,id)})}else{if(id){im.push(im.pop()+"skewX("+id+")")}}if(ij[0]!=ii[0]||ij[1]!=ii[1]){ic=im.push(im.pop()+"scale(",null,",",null,")");h8.push({i:ic-4,x:bG(ij[0],ii[0])},{i:ic-2,x:bG(ij[1],ii[1])})}else{if(ii[0]!=1||ii[1]!=1){im.push(im.pop()+"scale("+ii+")")}}ic=h8.length;return function(ip){var io=-1,iq;while(++io<ic){im[(iq=h8[io]).i]=iq.x(ip)}return im.join("")}}function ht(h8,d3){d3=(d3-=h8=+h8)||1/d3;return function(h9){return(h9-h8)/d3}}function az(h8,d3){d3=(d3-=h8=+h8)||1/d3;return function(h9){return Math.max(0,Math.min(1,(h9-h8)/d3))}}hl.layout={};hl.layout.bundle=function(){return function(d3){var h9=[],h8=-1,ia=d3.length;while(++h8<ia){h9.push(eK(d3[h8]))}return h9}};function eK(ia){var ic=ia.source,d3=ia.target,ib=fK(ic,d3),h9=[ic];while(ic!==ib){ic=ic.parent;h9.push(ic)}var h8=h9.length;while(d3!==ib){h9.splice(h8,0,d3);d3=d3.parent}return h9}function fo(h9){var h8=[],d3=h9.parent;while(d3!=null){h8.push(h9);h9=d3;d3=d3.parent}h8.push(h9);return h8}function fK(ia,h8){if(ia===h8){return ia}var h9=fo(ia),d3=fo(h8),ib=h9.pop(),ic=d3.pop(),id=null;while(ib===ic){id=ib;ib=h9.pop();ic=d3.pop()}return id}hl.layout.chord=function(){var ic={},id,ia,ii,h9,ih=0,d3,h8,ib;function ig(){var io={},ir=[],iA=hl.range(h9),iw=[],ip,iy,im,it,iq;id=[];ia=[];ip=0,it=-1;while(++it<h9){iy=0,iq=-1;while(++iq<h9){iy+=ii[it][iq]}ir.push(iy);iw.push(hl.range(h9));ip+=iy}if(d3){iA.sort(function(iC,iB){return d3(ir[iC],ir[iB])})}if(h8){iw.forEach(function(iC,iB){iC.sort(function(iE,iD){return h8(ii[iB][iE],ii[iB][iD])})})}ip=(f7-ih*h9)/ip;iy=0,it=-1;while(++it<h9){im=iy,iq=-1;while(++iq<h9){var ix=iA[it],iv=iw[ix][iq],iz=ii[ix][iv],il=iy,ik=iy+=iz*ip;io[ix+"-"+iv]={index:ix,subindex:iv,startAngle:il,endAngle:ik,value:iz}}ia[ix]={index:ix,startAngle:im,endAngle:iy,value:(iy-im)/ip};iy+=ih}it=-1;while(++it<h9){iq=it-1;while(++iq<h9){var ij=io[it+"-"+iq],iu=io[iq+"-"+it];if(ij.value||iu.value){id.push(ij.value<iu.value?{source:iu,target:ij}:{source:ij,target:iu})}}}if(ib){ie()}}function ie(){id.sort(function(ik,ij){return ib((ik.source.value+ik.target.value)/2,(ij.source.value+ij.target.value)/2)})}ic.matrix=function(ij){if(!arguments.length){return ii}h9=(ii=ij)&&ii.length;id=ia=null;return ic};ic.padding=function(ij){if(!arguments.length){return ih}ih=ij;id=ia=null;return ic};ic.sortGroups=function(ij){if(!arguments.length){return d3}d3=ij;id=ia=null;return ic};ic.sortSubgroups=function(ij){if(!arguments.length){return h8}h8=ij;id=null;return ic};ic.sortChords=function(ij){if(!arguments.length){return ib}ib=ij;if(id){ie()}return ic};ic.chords=function(){if(!id){ig()}return id};ic.groups=function(){if(!ia){ig()}return ia};return ic};hl.layout.force=function(){var h8={},io=hl.dispatch("start","tick","end"),ih=[1,1],iq,ib,ie=0.9,ir=fQ,ia=ct,im=-30,ik=cb,ic=0.1,ii=0.64,il=[],h9=[],id,d3,ig;function ip(it){return function(iA,iw,iz,iv){if(iA.point!==it){var iC=iA.cx-it.x,iB=iA.cy-it.y,iu=iv-iw,iy=iC*iC+iB*iB;if(iu*iu/ii<iy){if(iy<ik){var ix=iA.charge/iy;it.px-=iC*ix;it.py-=iB*ix}return true}if(iA.point&&iy&&iy<ik){var ix=iA.pointCharge/iy;it.px-=iC*ix;it.py-=iB*ix}}return !iA.charge}}h8.tick=function(){if((ib*=0.99)<0.005){io.end({type:"end",alpha:ib=0});return true}var iv=il.length,iw=h9.length,it,iz,iu,iD,iC,ix,iy,iB,iA;for(iz=0;iz<iw;++iz){iu=h9[iz];iD=iu.source;iC=iu.target;iB=iC.x-iD.x;iA=iC.y-iD.y;if(ix=iB*iB+iA*iA){ix=ib*d3[iz]*((ix=Math.sqrt(ix))-id[iz])/ix;iB*=ix;iA*=ix;iC.x-=iB*(iy=iD.weight/(iC.weight+iD.weight));iC.y-=iA*iy;iD.x+=iB*(iy=1-iy);iD.y+=iA*iy}}if(iy=ib*ic){iB=ih[0]/2;iA=ih[1]/2;iz=-1;if(iy){while(++iz<iv){iu=il[iz];iu.x+=(iB-iu.x)*iy;iu.y+=(iA-iu.y)*iy}}}if(im){gz(it=hl.geom.quadtree(il),ib,ig);iz=-1;while(++iz<iv){if(!(iu=il[iz]).fixed){it.visit(ip(iu))}}}iz=-1;while(++iz<iv){iu=il[iz];if(iu.fixed){iu.x=iu.px;iu.y=iu.py}else{iu.x-=(iu.px-(iu.px=iu.x))*ie;iu.y-=(iu.py-(iu.py=iu.y))*ie}}io.tick({type:"tick",alpha:ib})};h8.nodes=function(it){if(!arguments.length){return il}il=it;return h8};h8.links=function(it){if(!arguments.length){return h9}h9=it;return h8};h8.size=function(it){if(!arguments.length){return ih}ih=it;return h8};h8.linkDistance=function(it){if(!arguments.length){return ir}ir=typeof it==="function"?it:+it;return h8};h8.distance=h8.linkDistance;h8.linkStrength=function(it){if(!arguments.length){return ia}ia=typeof it==="function"?it:+it;return h8};h8.friction=function(it){if(!arguments.length){return ie}ie=+it;return h8};h8.charge=function(it){if(!arguments.length){return im}im=typeof it==="function"?it:+it;return h8};h8.chargeDistance=function(it){if(!arguments.length){return Math.sqrt(ik)}ik=it*it;return h8};h8.gravity=function(it){if(!arguments.length){return ic}ic=+it;return h8};h8.theta=function(it){if(!arguments.length){return Math.sqrt(ii)}ii=it*it;return h8};h8.alpha=function(it){if(!arguments.length){return ib}it=+it;if(ib){if(it>0){ib=it}else{ib=0}}else{if(it>0){io.start({type:"start",alpha:ib=it});hl.timer(h8.tick)}}return h8};h8.start=function(){var ix,iA=il.length,iu=h9.length,iv=ih[0],iy=ih[1],iw,iz;for(ix=0;ix<iA;++ix){(iz=il[ix]).index=ix;iz.weight=0}for(ix=0;ix<iu;++ix){iz=h9[ix];if(typeof iz.source=="number"){iz.source=il[iz.source]}if(typeof iz.target=="number"){iz.target=il[iz.target]}++iz.source.weight;++iz.target.weight}for(ix=0;ix<iA;++ix){iz=il[ix];if(isNaN(iz.x)){iz.x=it("x",iv)}if(isNaN(iz.y)){iz.y=it("y",iy)}if(isNaN(iz.px)){iz.px=iz.x}if(isNaN(iz.py)){iz.py=iz.y}}id=[];if(typeof ir==="function"){for(ix=0;ix<iu;++ix){id[ix]=+ir.call(this,h9[ix],ix)}}else{for(ix=0;ix<iu;++ix){id[ix]=ir}}d3=[];if(typeof ia==="function"){for(ix=0;ix<iu;++ix){d3[ix]=+ia.call(this,h9[ix],ix)}}else{for(ix=0;ix<iu;++ix){d3[ix]=ia}}ig=[];if(typeof im==="function"){for(ix=0;ix<iA;++ix){ig[ix]=+im.call(this,il[ix],ix)}}else{for(ix=0;ix<iA;++ix){ig[ix]=im}}function it(iG,iE){if(!iw){iw=new Array(iA);for(iD=0;iD<iA;++iD){iw[iD]=[]}for(iD=0;iD<iC;++iD){var iH=h9[iD];iw[iH.source.index].push(iH.target);iw[iH.target.index].push(iH.source)}}var iF=iw[ix],iD=-1,iC=iF.length,iB;while(++iD<iC){if(!isNaN(iB=iF[iD][iG])){return iB}}return Math.random()*iE}return h8.resume()};h8.resume=function(){return h8.alpha(0.1)};h8.stop=function(){return h8.alpha(0)};h8.drag=function(){if(!iq){iq=hl.behavior.drag().origin(gk).on("dragstart.force",r).on("drag.force",ij).on("dragend.force",eb)}if(!arguments.length){return iq}this.on("mouseover.force",cw).on("mouseout.force",ek).call(iq)};function ij(it){it.px=hl.event.x,it.py=hl.event.y;h8.resume()}return hl.rebind(h8,io,"on")};function r(d3){d3.fixed|=2}function eb(d3){d3.fixed&=~6}function cw(d3){d3.fixed|=4;d3.px=d3.x,d3.py=d3.y}function ek(d3){d3.fixed&=~4}function gz(ih,ib,ig){var ic=0,h9=0;ih.charge=0;if(!ih.leaf){var d3=ih.nodes,h8=d3.length,id=-1,ie;while(++id<h8){ie=d3[id];if(ie==null){continue}gz(ie,ib,ig);ih.charge+=ie.charge;ic+=ie.charge*ie.cx;h9+=ie.charge*ie.cy}}if(ih.point){if(!ih.leaf){ih.point.x+=Math.random()-0.5;ih.point.y+=Math.random()-0.5}var ia=ib*ig[ih.point.index];ih.charge+=ih.pointCharge=ia;ic+=ia*ih.point.x;h9+=ia*ih.point.y}ih.cx=ic/ih.charge;ih.cy=h9/ih.charge}var fQ=20,ct=1,cb=Infinity;hl.layout.hierarchy=function(){var h9=dP,h8=a7,ia=hI;function d3(ic){var ib=[ic],id=[],ie;ic.depth=0;while((ie=ib.pop())!=null){id.push(ie);if((ig=h8.call(d3,ie,ie.depth))&&(ii=ig.length)){var ii,ig,ih;while(--ii>=0){ib.push(ih=ig[ii]);ih.parent=ie;ih.depth=ie.depth+1}if(ia){ie.value=0}ie.children=ig}else{if(ia){ie.value=+ia.call(d3,ie,ie.depth)||0}delete ie.children}}gL(ic,function(ik){var il,ij;if(h9&&(il=ik.children)){il.sort(h9)}if(ia&&(ij=ik.parent)){ij.value+=ik.value}});return id}d3.sort=function(ib){if(!arguments.length){return h9}h9=ib;return d3};d3.children=function(ib){if(!arguments.length){return h8}h8=ib;return d3};d3.value=function(ib){if(!arguments.length){return ia}ia=ib;return d3};d3.revalue=function(ib){if(ia){eu(ib,function(ic){if(ic.children){ic.value=0}});gL(ib,function(id){var ic;if(!id.children){id.value=+ia.call(d3,id,id.depth)||0}if(ic=id.parent){ic.value+=id.value}})}return ib};return d3};function gr(h8,d3){hl.rebind(h8,d3,"sort","children","value");h8.nodes=h8;h8.links=gv;return h8}function eu(h9,ib){var d3=[h9];while((h9=d3.pop())!=null){ib(h9);if((h8=h9.children)&&(ia=h8.length)){var ia,h8;while(--ia>=0){d3.push(h8[ia])}}}}function gL(ib,id){var h8=[ib],d3=[];while((ib=h8.pop())!=null){d3.push(ib);if((h9=ib.children)&&(ic=h9.length)){var ia=-1,ic,h9;while(++ia<ic){h8.push(h9[ia])}}}while((ib=d3.pop())!=null){id(ib)}}function a7(d3){return d3.children}function hI(d3){return d3.value}function dP(h8,d3){return d3.value-h8.value}function gv(d3){return hl.merge(d3.map(function(h8){return(h8.children||[]).map(function(h9){return{source:h8,target:h9}})}))}hl.layout.partition=function(){var h9=hl.layout.hierarchy(),ia=[1,1];function d3(ie,ij,il,ik){var ic=ie.children;ie.x=ij;ie.y=ie.depth*ik;ie.dx=il;ie.dy=ik;if(ic&&(id=ic.length)){var ig=-1,id,ii,ih;il=ie.value?il/ie.value:0;while(++ig<id){d3(ii=ic[ig],ij,ih=ii.value*il,ik);ij+=ih}}}function ib(ie){var id=ie.children,ig=0;if(id&&(ih=id.length)){var ic=-1,ih;while(++ic<ih){ig=Math.max(ig,ib(id[ic]))}}return 1+ig}function h8(ie,id){var ic=h9.call(this,ie,id);d3(ic[0],0,ia[0],ia[1]/ib(ic[0]));return ic}h8.size=function(ic){if(!arguments.length){return ia}ia=ic;return h8};return gr(h8,h9)};hl.layout.pie=function(){var ic=Number,ia=U,h9=0,h8=f7,ib=0;function d3(ii){var ig=ii.length,io=ii.map(function(ir,iq){return +ic.call(d3,ir,iq)}),ik=+(typeof h9==="function"?h9.apply(this,arguments):h9),ip=(typeof h8==="function"?h8.apply(this,arguments):h8)-ik,ie=Math.min(Math.abs(ip)/ig,+(typeof ib==="function"?ib.apply(this,arguments):ib)),il=ie*(ip<0?-1:1),ih=(ip-ig*il)/hl.sum(io),ij=hl.range(ig),id=[],im;if(ia!=null){ij.sort(ia===U?function(ir,iq){return io[iq]-io[ir]}:function(ir,iq){return ia(ii[ir],ii[iq])})}ij.forEach(function(iq){id[iq]={data:ii[iq],value:im=io[iq],startAngle:ik,endAngle:ik+=im*ih+il,padAngle:ie}});return id}d3.value=function(id){if(!arguments.length){return ic}ic=id;return d3};d3.sort=function(id){if(!arguments.length){return ia}ia=id;return d3};d3.startAngle=function(id){if(!arguments.length){return h9}h9=id;return d3};d3.endAngle=function(id){if(!arguments.length){return h8}h8=id;return d3};d3.padAngle=function(id){if(!arguments.length){return ib}ib=id;return d3};return d3};var U={};hl.layout.stack=function(){var ia=gk,h9=bR,ic=fE,ib=fF,h8=an,id=al;function d3(im,ip){if(!(ig=im.length)){return im}var io=im.map(function(it,ir){return ia.call(d3,it,ir)});var iq=io.map(function(ir){return ir.map(function(it,iu){return[h8.call(d3,it,iu),id.call(d3,it,iu)]})});var ij=h9.call(d3,iq,ip);io=hl.permute(io,ij);iq=hl.permute(iq,ij);var ii=ic.call(d3,iq,ip);var ih=io[0].length,ig,il,ik,ie;for(ik=0;ik<ih;++ik){ib.call(d3,io[0][ik],ie=ii[ik],iq[0][ik][1]);for(il=1;il<ig;++il){ib.call(d3,io[il][ik],ie+=iq[il-1][ik][1],iq[il][ik][1])}}return im}d3.values=function(ie){if(!arguments.length){return ia}ia=ie;return d3};d3.order=function(ie){if(!arguments.length){return h9}h9=typeof ie==="function"?ie:a5.get(ie)||bR;return d3};d3.offset=function(ie){if(!arguments.length){return ic}ic=typeof ie==="function"?ie:ag.get(ie)||fE;return d3};d3.x=function(ie){if(!arguments.length){return h8}h8=ie;return d3};d3.y=function(ie){if(!arguments.length){return id}id=ie;return d3};d3.out=function(ie){if(!arguments.length){return ib}ib=ie;return d3};return d3};function an(d3){return d3.x}function al(d3){return d3.y}function fF(h8,d3,h9){h8.y0=d3;h8.y=h9}var a5=hl.map({"inside-out":function(ib){var h9=ib.length,ic,ia,ih=ib.map(bX),id=ib.map(dt),ie=hl.range(h9).sort(function(ik,ij){return ih[ik]-ih[ij]}),ig=0,d3=0,ii=[],h8=[];for(ic=0;ic<h9;++ic){ia=ie[ic];if(ig<d3){ig+=id[ia];ii.push(ia)}else{d3+=id[ia];h8.push(ia)}}return h8.reverse().concat(ii)},reverse:function(d3){return hl.range(d3.length).reverse()},"default":bR});var ag=hl.map({silhouette:function(ib){var h8=ib.length,h9=ib[0].length,id=[],ie=0,ic,ia,d3,ig=[];for(ia=0;ia<h9;++ia){for(ic=0,d3=0;ic<h8;ic++){d3+=ib[ic][ia][1]}if(d3>ie){ie=d3}id.push(d3)}for(ia=0;ia<h9;++ia){ig[ia]=(ie-id[ia])/2}return ig},wiggle:function(id){var h8=id.length,ih=id[0],h9=ih.length,ie,ic,ib,ik,ij,ig,il,d3,ia,ii=[];ii[0]=d3=ia=0;for(ic=1;ic<h9;++ic){for(ie=0,ik=0;ie<h8;++ie){ik+=id[ie][ic][1]}for(ie=0,ij=0,il=ih[ic][0]-ih[ic-1][0];ie<h8;++ie){for(ib=0,ig=(id[ie][ic][1]-id[ie][ic-1][1])/(2*il);ib<ie;++ib){ig+=(id[ib][ic][1]-id[ib][ic-1][1])/il}ij+=ig*id[ie][ic][1]}ii[ic]=d3-=ik?ij/ik*il:0;if(d3<ia){ia=d3}}for(ic=0;ic<h9;++ic){ii[ic]-=ia}return ii},expand:function(ic){var ie=ic.length,d3=ic[0].length,h8=1/ie,ia,h9,id,ib=[];for(h9=0;h9<d3;++h9){for(ia=0,id=0;ia<ie;ia++){id+=ic[ia][h9][1]}if(id){for(ia=0;ia<ie;ia++){ic[ia][h9][1]/=id}}else{for(ia=0;ia<ie;ia++){ic[ia][h9][1]=h8}}}for(h9=0;h9<d3;++h9){ib[h9]=0}return ib},zero:fE});function bR(d3){return hl.range(d3.length)}function fE(ia){var h8=-1,d3=ia[0].length,h9=[];while(++h8<d3){h9[h8]=0}return h9}function bX(ic){var ia=1,h9=0,h8=ic[0][1],d3,ib=ic.length;for(;ia<ib;++ia){if((d3=ic[ia][1])>h8){h9=ia;h8=d3}}return h9}function dt(d3){return d3.reduce(fD,0)}function fD(d3,h8){return d3+h8[1]}hl.layout.histogram=function(){var ib=true,h8=Number,d3=bj,h9=hu;function ia(ig,ih){var im=[],ik=ig.map(h8,this),ii=d3.call(this,ik,ih),il=h9.call(this,ii,ik,ih),io,ih=-1,ic=ik.length,id=il.length-1,ie=ib?1:1/ic,ij;while(++ih<id){io=im[ih]=[];io.dx=il[ih+1]-(io.x=il[ih]);io.y=0}if(id>0){ih=-1;while(++ih<ic){ij=ik[ih];if(ij>=ii[0]&&ij<=ii[1]){io=im[hl.bisect(il,ij,1,id)-1];io.y+=ie;io.push(ig[ih])}}}return im}ia.value=function(ic){if(!arguments.length){return h8}h8=ic;return ia};ia.range=function(ic){if(!arguments.length){return d3}d3=R(ic);return ia};ia.bins=function(ic){if(!arguments.length){return h9}h9=typeof ic==="number"?function(id){return j(id,ic)}:R(ic);return ia};ia.frequency=function(ic){if(!arguments.length){return ib}ib=!!ic;return ia};return ia};function hu(h8,d3){return j(h8,Math.ceil(Math.log(d3.length)/Math.LN2+1))}function j(ia,ic){var h9=-1,h8=+ia[0],d3=(ia[1]-h8)/ic,ib=[];while(++h9<=ic){ib[h9]=d3*h9+h8}return ib}function bj(d3){return[hl.min(d3),hl.max(d3)]}hl.layout.pack=function(){var h8=hl.layout.hierarchy().sort(eA),ib=0,ia=[1,1],d3;function h9(ik,ig){var ie=h8.call(this,ik,ig),id=ie[0],ic=ia[0],ih=ia[1],ii=d3==null?Math.sqrt:typeof d3==="function"?d3:function(){return d3};id.x=id.y=0;gL(id,function(il){il.r=+ii(il.value)});gL(id,T);if(ib){var ij=ib*(d3?1:Math.max(2*id.r/ic,2*id.r/ih))/2;gL(id,function(il){il.r+=ij});gL(id,T);gL(id,function(il){il.r-=ij})}fn(id,ic/2,ih/2,d3?1:1/Math.max(2*id.r/ic,2*id.r/ih));return ie}h9.size=function(ic){if(!arguments.length){return ia}ia=ic;return h9};h9.radius=function(ic){if(!arguments.length){return d3}d3=ic==null||typeof ic==="function"?ic:+ic;return h9};h9.padding=function(ic){if(!arguments.length){return ib}ib=+ic;return h9};return gr(h9,h8)};function eA(h8,d3){return h8.value-d3.value}function bQ(h8,d3){var h9=h8._pack_next;h8._pack_next=d3;d3._pack_prev=h8;d3._pack_next=h9;h9._pack_prev=d3}function be(h8,d3){h8._pack_next=d3;d3._pack_prev=h8}function el(h9,d3){var ia=d3.x-h9.x,h8=d3.y-h9.y,ib=h9.r+d3.r;return 0.999*ib*ib>ia*ia+h8*h8}function T(ij){if(!(ii=ij.children)||!(ih=ii.length)){return}var ii,io=Infinity,it=-Infinity,d3=Infinity,ib=-Infinity,ir,iq,ip,im,il,ik,ih;function h9(iu){io=Math.min(iu.x-iu.r,io);it=Math.max(iu.x+iu.r,it);d3=Math.min(iu.y-iu.r,d3);ib=Math.max(iu.y+iu.r,ib)}ii.forEach(aR);ir=ii[0];ir.x=-ir.r;ir.y=0;h9(ir);if(ih>1){iq=ii[1];iq.x=iq.r;iq.y=0;h9(iq);if(ih>2){ip=ii[2];bd(ir,iq,ip);h9(ip);bQ(ir,ip);ir._pack_prev=ip;bQ(ip,iq);iq=ir._pack_next;for(im=3;im<ih;im++){bd(ir,iq,ip=ii[im]);var h8=0,ic=1,ia=1;for(il=iq._pack_next;il!==iq;il=il._pack_next,ic++){if(el(il,ip)){h8=1;break}}if(h8==1){for(ik=ir._pack_prev;ik!==il._pack_prev;ik=ik._pack_prev,ia++){if(el(ik,ip)){break}}}if(h8){if(ic<ia||ic==ia&&iq.r<ir.r){be(ir,iq=il)}else{be(ir=ik,iq)}im--}else{bQ(ir,ip);iq=ip;h9(ip)}}}}var ie=(io+it)/2,id=(d3+ib)/2,ig=0;for(im=0;im<ih;im++){ip=ii[im];ip.x-=ie;ip.y-=id;ig=Math.max(ig,ip.r+Math.sqrt(ip.x*ip.x+ip.y*ip.y))}ij.r=ig;ii.forEach(eP)}function aR(d3){d3._pack_next=d3._pack_prev=d3}function eP(d3){delete d3._pack_next;delete d3._pack_prev}function fn(ib,d3,id,h8){var ia=ib.children;ib.x=d3+=h8*ib.x;ib.y=id+=h8*ib.y;ib.r*=h8;if(ia){var h9=-1,ic=ia.length;while(++h9<ic){fn(ia[h9],d3,id,h8)}}}function bd(ib,h9,d3){var id=ib.r+d3.r,ih=h9.x-ib.x,ie=h9.y-ib.y;if(id&&(ih||ie)){var ig=h9.r+d3.r,ic=ih*ih+ie*ie;ig*=ig;id*=id;var ia=0.5+(id-ig)/(2*ic),h8=Math.sqrt(Math.max(0,2*ig*(id+ic)-(id-=ic)*id-ig*ig))/(2*ic);d3.x=ib.x+ia*ih+h8*ie;d3.y=ib.y+ia*ie-h8*ih}else{d3.x=ib.x+id;d3.y=ib.y}}hl.layout.tree=function(){var ib=hl.layout.hierarchy().sort(null).value(null),h8=dy,ig=[1,1],ic=null;function ih(iq,im){var ij=ib.call(this,iq,im),it=ij[0],ir=ie(it);gL(ir,ia),ir.parent.m=-ir.z;eu(ir,id);if(ic){eu(it,h9)}else{var ik=it,iu=it,ii=it;eu(it,function(iv){if(iv.x<ik.x){ik=iv}if(iv.x>iu.x){iu=iv}if(iv.depth>ii.depth){ii=iv}});var il=h8(ik,iu)/2-ik.x,ip=ig[0]/(iu.x+h8(iu,ik)/2+il),io=ig[1]/(ii.depth||1);eu(it,function(iv){iv.x=(iv.x+il)*ip;iv.y=iv.depth*io})}return ij}function ie(il){var ij={A:null,children:[il]},ii=[ij],ik;while((ik=ii.pop())!=null){for(var io=ik.children,iq,im=0,ip=io.length;im<ip;++im){ii.push((io[im]=iq={_:io[im],parent:ik,children:(iq=io[im].children)&&iq.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:im}).a=iq)}}return ij.children[0]}function ia(ij){var il=ij.children,im=ij.parent.children,ii=ij.i?im[ij.i-1]:null;if(il.length){dB(ij);var ik=(il[0].z+il[il.length-1].z)/2;if(ii){ij.z=ii.z+h8(ij._,ii._);ij.m=ij.z-ik}else{ij.z=ik}}else{if(ii){ij.z=ii.z+h8(ij._,ii._)}}ij.parent.A=d3(ij,ii,ij.parent.A||im[0])}function id(ii){ii._.x=ii.z+ii.parent.m;ii.m+=ii.parent.m}function d3(iv,iu,io){if(iu){var ik=iv,ij=iv,im=iu,il=ik.parent.children[0],iq=ik.m,ip=ij.m,it=im.m,ir=il.m,ii;while(im=aB(im),ik=hU(ik),im&&ik){il=hU(il);ij=aB(ij);ij.a=iv;ii=im.z+it-ik.z-iq+h8(im._,ik._);if(ii>0){hW(fX(im,iv,io),iv,ii);iq+=ii;ip+=ii}it+=im.m;iq+=ik.m;ir+=il.m;ip+=ij.m}if(im&&!aB(ij)){ij.t=im;ij.m+=it-ip}if(ik&&!hU(il)){il.t=ik;il.m+=iq-ir;io=iv}}return io}function h9(ii){ii.x*=ig[0];ii.y=ii.depth*ig[1]}ih.separation=function(ii){if(!arguments.length){return h8}h8=ii;return ih};ih.size=function(ii){if(!arguments.length){return ic?null:ig}ic=(ig=ii)==null?h9:null;return ih};ih.nodeSize=function(ii){if(!arguments.length){return ic?ig:null}ic=(ig=ii)==null?null:h9;return ih};return gr(ih,ib)};function dy(h8,d3){return h8.parent==d3.parent?1:2}function hU(d3){var h8=d3.children;return h8.length?h8[0]:d3.t}function aB(d3){var h8=d3.children,h9;return(h9=h8.length)?h8[h9-1]:d3.t}function hW(h9,h8,d3){var ia=d3/(h8.i-h9.i);h8.c-=ia;h8.s+=d3;h9.c+=ia;h8.z+=d3;h8.m+=d3}function dB(h9){var h8=0,ic=0,ib=h9.children,ia=ib.length,d3;while(--ia>=0){d3=ib[ia];d3.z+=h8;d3.m+=h8;h8+=d3.s+(ic+=d3.c)}}function fX(h8,d3,h9){return h8.a.parent===d3.parent?h8.a:h9}hl.layout.cluster=function(){var h9=hl.layout.hierarchy().sort(null).value(null),ib=dy,ia=[1,1],h8=false;function d3(ii,ih){var ic=h9.call(this,ii,ih),ij=ic[0],ik,il=0;gL(ij,function(ip){var io=ip.children;if(io&&io.length){ip.x=bx(io);ip.y=bw(io)}else{ip.x=ik?il+=ib(ip,ik):0;ip.y=0;ik=ip}});var ig=eC(ij),im=dE(ij),ie=ig.x-ib(ig,im)/2,id=im.x+ib(im,ig)/2;gL(ij,h8?function(io){io.x=(io.x-ij.x)*ia[0];io.y=(ij.y-io.y)*ia[1]}:function(io){io.x=(io.x-ie)/(id-ie)*ia[0];io.y=(1-(ij.y?io.y/ij.y:1))*ia[1]});return ic}d3.separation=function(ic){if(!arguments.length){return ib}ib=ic;return d3};d3.size=function(ic){if(!arguments.length){return h8?null:ia}h8=(ia=ic)==null;return d3};d3.nodeSize=function(ic){if(!arguments.length){return h8?ia:null}h8=(ia=ic)!=null;return d3};return gr(d3,h9)};function bw(d3){return 1+hl.max(d3,function(h8){return h8.y})}function bx(d3){return d3.reduce(function(h8,h9){return h8+h9.x},0)/d3.length}function eC(h8){var d3=h8.children;return d3&&d3.length?eC(d3[0]):h8}function dE(h8){var d3=h8.children,h9;return d3&&(h9=d3.length)?dE(d3[h9-1]):h8}hl.layout.treemap=function(){var ig=hl.layout.hierarchy(),ik=Math.round,im=[1,1],ih=null,d3=e6,ii=false,id,ic="squarify",ie=0.5*(1+Math.sqrt(5));function h8(iq,io){var ip=-1,iu=iq.length,it,ir;while(++ip<iu){ir=(it=iq[ip]).value*(io<0?0:io);it.area=isNaN(ir)||ir<=0?0:ir}}function ia(it){var ip=it.children;if(ip&&ip.length){var iw=d3(it),iy=[],iv=ip.slice(),io,iu=Infinity,ir,ix=ic==="slice"?iw.dx:ic==="dice"?iw.dy:ic==="slice-dice"?it.depth&1?iw.dy:iw.dx:Math.min(iw.dx,iw.dy),iq;h8(iv,iw.dx*iw.dy/it.value);iy.area=0;while((iq=iv.length)>0){iy.push(io=iv[iq-1]);iy.area+=io.area;if(ic!=="squarify"||(ir=h9(iy,ix))<=iu){iv.pop();iu=ir}else{iy.area-=iy.pop().area;ib(iy,ix,iw,false);ix=Math.min(iw.dx,iw.dy);iy.length=iy.area=0;iu=Infinity}}if(iy.length){ib(iy,ix,iw,true);iy.length=iy.area=0}ip.forEach(ia)}}function il(ir){var io=ir.children;if(io&&io.length){var iq=d3(ir),ip=io.slice(),iu,it=[];h8(ip,iq.dx*iq.dy/ir.value);it.area=0;while(iu=ip.pop()){it.push(iu);it.area+=iu.area;if(iu.z!=null){ib(it,iu.z?iq.dx:iq.dy,iq,!ip.length);it.length=it.area=0}}io.forEach(il)}}function h9(iu,ip){var ir=iu.area,it,iw=0,io=Infinity,iq=-1,iv=iu.length;while(++iq<iv){if(!(it=iu[iq].area)){continue}if(it<io){io=it}if(it>iw){iw=it}}ir*=ir;ip*=ip;return ir?Math.max(ip*iw*ie/ir,ir/(ip*io*ie)):Infinity}function ib(iy,ix,it,iw){var iq=-1,ip=iy.length,iu=it.x,ir=it.y,iv=ix?ik(iy.area/ix):0,io;if(ix==it.dx){if(iw||iv>it.dy){iv=it.dy}while(++iq<ip){io=iy[iq];io.x=iu;io.y=ir;io.dy=iv;iu+=io.dx=Math.min(it.x+it.dx-iu,iv?ik(io.area/iv):0)}io.z=true;io.dx+=it.x+it.dx-iu;it.y+=iv;it.dy-=iv}else{if(iw||iv>it.dx){iv=it.dx}while(++iq<ip){io=iy[iq];io.x=iu;io.y=ir;io.dx=iv;ir+=io.dy=Math.min(it.y+it.dy-ir,iv?ik(io.area/iv):0)}io.z=false;io.dy+=it.y+it.dy-ir;it.x+=iv;it.dx-=iv}}function ij(iq){var ip=id||ig(iq),io=ip[0];io.x=0;io.y=0;io.dx=im[0];io.dy=im[1];if(id){ig.revalue(io)}h8([io],io.dx*io.dy/io.value);(id?il:ia)(io);if(ii){id=ip}return ip}ij.size=function(io){if(!arguments.length){return im}im=io;return ij};ij.padding=function(io){if(!arguments.length){return ih}function ir(it){var iu=io.call(ij,it,it.depth);return iu==null?e6(it):aZ(it,typeof iu==="number"?[iu,iu,iu,iu]:iu)}function iq(it){return aZ(it,io)}var ip;d3=(ih=io)==null?e6:(ip=typeof io)==="function"?ir:ip==="number"?(io=[io,io,io,io],iq):iq;return ij};ij.round=function(io){if(!arguments.length){return ik!=Number}ik=io?Math.round:Number;return ij};ij.sticky=function(io){if(!arguments.length){return ii}ii=io;id=null;return ij};ij.ratio=function(io){if(!arguments.length){return ie}ie=io;return ij};ij.mode=function(io){if(!arguments.length){return ic}ic=io+"";return ij};return gr(ij,ig)};function e6(d3){return{x:d3.x,y:d3.y,dx:d3.dx,dy:d3.dy}}function aZ(ia,ib){var d3=ia.x+ib[3],ic=ia.y+ib[0],h9=ia.dx-ib[1]-ib[3],h8=ia.dy-ib[0]-ib[2];if(h9<0){d3+=h9/2;h9=0}if(h8<0){ic+=h8/2;h8=0}return{x:d3,y:ic,dx:h9,dy:h8}}hl.random={normal:function(h8,d3){var h9=arguments.length;if(h9<2){d3=1}if(h9<1){h8=0}return function(){var ia,ic,ib;do{ia=Math.random()*2-1;ic=Math.random()*2-1;ib=ia*ia+ic*ic}while(!ib||ib>1);return h8+d3*ia*Math.sqrt(-2*Math.log(ib)/ib)}},logNormal:function(){var d3=hl.random.normal.apply(hl,arguments);return function(){return Math.exp(d3())}},bates:function(d3){var h8=hl.random.irwinHall(d3);return function(){return h8()/d3}},irwinHall:function(d3){return function(){for(var h9=0,h8=0;h8<d3;h8++){h9+=Math.random()}return h9}}};hl.scale={};function er(h8){var h9=h8[0],d3=h8[h8.length-1];return h9<d3?[h9,d3]:[d3,h9]}function aY(d3){return d3.rangeExtent?d3.rangeExtent():er(d3.range())}function aG(ib,d3,ic,h9){var h8=ic(ib[0],ib[1]),ia=h9(d3[0],d3[1]);return function(id){return ia(h8(id))}}function gh(id,ib){var ic=0,ia=id.length-1,h9=id[ic],h8=id[ia],d3;if(h8<h9){d3=ic,ic=ia,ia=d3;d3=h9,h9=h8,h8=d3}id[ic]=ib.floor(h9);id[ia]=ib.ceil(h8);return id}function a6(d3){return d3?{floor:function(h8){return Math.floor(h8/d3)*d3},ceil:function(h8){return Math.ceil(h8/d3)*d3}}:eB}var eB={floor:gk,ceil:gk};function M(id,h8,ie,ib){var ia=[],ic=[],h9=0,d3=Math.min(id.length,h8.length)-1;if(id[d3]<id[0]){id=id.slice().reverse();h8=h8.slice().reverse()}while(++h9<=d3){ia.push(ie(id[h9-1],id[h9]));ic.push(ib(h8[h9-1],h8[h9]))}return function(ig){var ih=hl.bisect(id,ig,1,d3)-1;return ic[ih](ia[ih](ig))}}hl.scale.linear=function(){return eh([0,1],[0,1],fC,false)};function eh(ic,ia,ib,ie){var h9,h8;function d3(){var ig=Math.min(ic.length,ia.length)>2?M:aG,ih=ie?az:ht;h9=ig(ic,ia,ih,ib);h8=ig(ia,ic,ih,fC);return id}function id(ig){return h9(ig)}id.invert=function(ig){return h8(ig)};id.domain=function(ig){if(!arguments.length){return ic}ic=ig.map(Number);return d3()};id.range=function(ig){if(!arguments.length){return ia}ia=ig;return d3()};id.rangeRound=function(ig){return id.range(ig).interpolate(fx)};id.clamp=function(ig){if(!arguments.length){return ie}ie=ig;return d3()};id.interpolate=function(ig){if(!arguments.length){return ib}ib=ig;return d3()};id.ticks=function(ig){return e1(ic,ig)};id.tickFormat=function(ig,ih){return e9(ic,ig,ih)};id.nice=function(ig){aM(ic,ig);return d3()};id.copy=function(){return eh(ic,ia,ib,ie)};return d3()}function f9(h8,d3){return hl.rebind(h8,d3,"range","rangeRound","interpolate","clamp")}function aM(h8,d3){return gh(h8,a6(q(h8,d3)[2]))}function q(ic,d3){if(d3==null){d3=10}var h9=er(ic),h8=h9[1]-h9[0],ib=Math.pow(10,Math.floor(Math.log(h8/d3)/Math.LN10)),ia=d3/h8*ib;if(ia<=0.15){ib*=10}else{if(ia<=0.35){ib*=5}else{if(ia<=0.75){ib*=2}}}h9[0]=Math.ceil(h9[0]/ib)*ib;h9[1]=Math.floor(h9[1]/ib)*ib+ib*0.5;h9[2]=ib;return h9}function e1(h8,d3){return hl.range.apply(hl,q(h8,d3))}function e9(ib,d3,ic){var h8=q(ib,d3);if(ic){var h9=cz.exec(ic);h9.shift();if(h9[8]==="s"){var ia=hl.formatPrefix(Math.max(cG(h8[0]),cG(h8[1])));if(!h9[7]){h9[7]="."+gW(ia.scale(h8[2]))}h9[8]="f";ic=hl.format(h9.join(""));return function(id){return ic(ia.scale(id))+ia.symbol}}if(!h9[7]){h9[7]="."+y(h9[8],h8)}ic=h9.join("")}else{ic=",."+gW(h8[2])+"f"}return hl.format(ic)}var hT={s:1,g:1,p:1,r:1,e:1};function gW(d3){return -Math.floor(Math.log(d3)/Math.LN10+0.01)}function y(h8,d3){var h9=gW(d3[2]);return h8 in hT?Math.abs(h9-gW(Math.max(cG(d3[0]),cG(d3[1]))))+ +(h8!=="e"):h9-(h8==="%")*2}hl.scale.log=function(){return gF(hl.scale.linear().domain([0,1]),10,true,[1,10])};function gF(h8,ic,d3,ib){function h9(ie){return(d3?Math.log(ie<0?0:ie):-Math.log(ie>0?0:-ie))/Math.log(ic)}function ia(ie){return d3?Math.pow(ic,ie):-Math.pow(ic,-ie)}function id(ie){return h8(h9(ie))}id.invert=function(ie){return ia(h8.invert(ie))};id.domain=function(ie){if(!arguments.length){return ib}d3=ie[0]>=0;h8.domain((ib=ie.map(Number)).map(h9));return id};id.base=function(ie){if(!arguments.length){return ic}ic=+ie;h8.domain(ib.map(h9));return id};id.nice=function(){var ie=gh(ib.map(h9),d3?Math:gK);h8.domain(ie);ib=ie.map(ia);return id};id.ticks=function(){var ik=er(ib),il=[],ii=ik[0],ig=ik[1],ij=Math.floor(h9(ii)),ih=Math.ceil(h9(ig)),im=ic%1?2:ic;if(isFinite(ih-ij)){if(d3){for(;ij<ih;ij++){for(var ie=1;ie<im;ie++){il.push(ia(ij)*ie)}}il.push(ia(ij))}else{il.push(ia(ij));for(;ij++<ih;){for(var ie=im-1;ie>0;ie--){il.push(ia(ij)*ie)}}}for(ij=0;il[ij]<ii;ij++){}for(ih=il.length;il[ih-1]>ig;ih--){}il=il.slice(ij,ih)}return il};id.tickFormat=function(ij,ii){if(!arguments.length){return ds}if(arguments.length<2){ii=ds}else{if(typeof ii!=="function"){ii=hl.format(ii)}}var ie=Math.max(0.1,ij/id.ticks().length),ig=d3?(ih=1e-12,Math.ceil):(ih=-1e-12,Math.floor),ih;return function(ik){return ik/ia(ig(h9(ik)+ih))<=ie?ii(ik):""}};id.copy=function(){return gF(h8.copy(),ic,d3,ib)};return f9(id,h8)}var ds=hl.format(".0e"),gK={floor:function(d3){return -Math.ceil(-d3)},ceil:function(d3){return -Math.floor(-d3)}};hl.scale.pow=function(){return gq(hl.scale.linear(),1,[0,1])};function gq(d3,ia,h9){var h8=fS(ia),ib=fS(1/ia);function ic(id){return d3(h8(id))}ic.invert=function(id){return ib(d3.invert(id))};ic.domain=function(id){if(!arguments.length){return h9}d3.domain((h9=id.map(Number)).map(h8));return ic};ic.ticks=function(id){return e1(h9,id)};ic.tickFormat=function(id,ie){return e9(h9,id,ie)};ic.nice=function(id){return ic.domain(aM(h9,id))};ic.exponent=function(id){if(!arguments.length){return ia}h8=fS(ia=id);ib=fS(1/ia);d3.domain(h9.map(h8));return ic};ic.copy=function(){return gq(d3.copy(),ia,h9)};return f9(ic,d3)}function fS(d3){return function(h8){return h8<0?-Math.pow(-h8,d3):Math.pow(h8,d3)}}hl.scale.sqrt=function(){return hl.scale.pow().exponent(0.5)};hl.scale.ordinal=function(){return cs([],{t:"range",a:[[]]})};function cs(ic,h9){var ib,h8,ia;function id(ie){return h8[((ib.get(ie)||(h9.t==="range"?ib.set(ie,ic.push(ie)):NaN))-1)%h8.length]}function d3(ig,ie){return hl.range(ic.length).map(function(ih){return ig+ie*ih})}id.domain=function(ie){if(!arguments.length){return ic}ic=[];ib=new aI();var ih=-1,ii=ie.length,ig;while(++ih<ii){if(!ib.has(ig=ie[ih])){ib.set(ig,ic.push(ig))}}return id[h9.t].apply(id,h9.a)};id.range=function(ie){if(!arguments.length){return h8}h8=ie;ia=0;h9={t:"range",a:arguments};return id};id.rangePoints=function(ie,ii){if(arguments.length<2){ii=0}var ij=ie[0],ig=ie[1],ih=ic.length<2?(ij=(ij+ig)/2,0):(ig-ij)/(ic.length-1+ii);h8=d3(ij+ih*ii/2,ih);ia=0;h9={t:"rangePoints",a:arguments};return id};id.rangeRoundPoints=function(ie,ii){if(arguments.length<2){ii=0}var ij=ie[0],ig=ie[1],ih=ic.length<2?(ij=ig=Math.round((ij+ig)/2),0):(ig-ij)/(ic.length-1+ii)|0;h8=d3(ij+Math.round(ih*ii/2+(ig-ij-(ic.length-1+ii)*ih)/2),ih);ia=0;h9={t:"rangeRoundPoints",a:arguments};return id};id.rangeBands=function(ig,ik,ie){if(arguments.length<2){ik=0}if(arguments.length<3){ie=ik}var ih=ig[1]<ig[0],il=ig[ih-0],ii=ig[1-ih],ij=(ii-il)/(ic.length-ik+2*ie);h8=d3(il+ij*ie,ij);if(ih){h8.reverse()}ia=ij*(1-ik);h9={t:"rangeBands",a:arguments};return id};id.rangeRoundBands=function(ig,ik,ie){if(arguments.length<2){ik=0}if(arguments.length<3){ie=ik}var ih=ig[1]<ig[0],il=ig[ih-0],ii=ig[1-ih],ij=Math.floor((ii-il)/(ic.length-ik+2*ie));h8=d3(il+Math.round((ii-il-(ic.length-ik)*ij)/2),ij);if(ih){h8.reverse()}ia=Math.round(ij*(1-ik));h9={t:"rangeRoundBands",a:arguments};return id};id.rangeBand=function(){return ia};id.rangeExtent=function(){return er(h9.a[0])};id.copy=function(){return cs(ic,h9)};return id.domain(ic)}hl.scale.category10=function(){return hl.scale.ordinal().range(cA)};hl.scale.category20=function(){return hl.scale.ordinal().range(ci)};hl.scale.category20b=function(){return hl.scale.ordinal().range(g9)};hl.scale.category20c=function(){return hl.scale.ordinal().range(g7)};var cA=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(dv);var ci=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(dv);var g9=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(dv);var g7=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(dv);hl.scale.quantile=function(){return C([],[])};function C(h9,h8){var ia;function d3(){var ic=0,id=h8.length;ia=[];while(++ic<id){ia[ic-1]=hl.quantile(h9,ic/id)}return ib}function ib(ic){if(!isNaN(ic=+ic)){return h8[hl.bisect(ia,ic)]}}ib.domain=function(ic){if(!arguments.length){return h9}h9=ic.map(hq).filter(bb).sort(fi);return d3()};ib.range=function(ic){if(!arguments.length){return h8}h8=ic;return d3()};ib.quantiles=function(){return ia};ib.invertExtent=function(ic){ic=h8.indexOf(ic);return ic<0?[NaN,NaN]:[ic>0?ia[ic-1]:h9[0],ic<ia.length?ia[ic]:h9[h9.length-1]]};ib.copy=function(){return C(h9,h8)};return d3()}hl.scale.quantize=function(){return dD(0,1,[0,1])};function dD(ib,h9,h8){var ic,ia;function id(ie){return h8[Math.max(0,Math.min(ia,Math.floor(ic*(ie-ib))))]}function d3(){ic=h8.length/(h9-ib);ia=h8.length-1;return id}id.domain=function(ie){if(!arguments.length){return[ib,h9]}ib=+ie[0];h9=+ie[ie.length-1];return d3()};id.range=function(ie){if(!arguments.length){return h8}h8=ie;return d3()};id.invertExtent=function(ie){ie=h8.indexOf(ie);ie=ie<0?NaN:ie/ic+ib;return[ie,ie+1/ic]};id.copy=function(){return dD(ib,h9,h8)};return d3()}hl.scale.threshold=function(){return f4([0.5],[0,1])};function f4(h8,d3){function h9(ia){if(ia<=ia){return d3[hl.bisect(h8,ia)]}}h9.domain=function(ia){if(!arguments.length){return h8}h8=ia;return h9};h9.range=function(ia){if(!arguments.length){return d3}d3=ia;return h9};h9.invertExtent=function(ia){ia=d3.indexOf(ia);return[h8[ia-1],h8[ia]]};h9.copy=function(){return f4(h8,d3)};return h9}hl.scale.identity=function(){return eT([0,1])};function eT(h8){function d3(h9){return +h9}d3.invert=d3;d3.domain=d3.range=function(h9){if(!arguments.length){return h8}h8=h9.map(d3);return d3};d3.ticks=function(h9){return e1(h8,h9)};d3.tickFormat=function(h9,ia){return e9(h8,h9,ia)};d3.copy=function(){return eT(h8)};return d3}hl.svg={};function dn(){return 0}hl.svg.arc=function(){var ie=bB,ia=cS,ib=dn,ig=fT,id=gf,h8=ao,h9=bL;function d3(){var ir=Math.max(0,+ie.apply(this,arguments)),iq=Math.max(0,+ia.apply(this,arguments)),iN=id.apply(this,arguments)-eo,iM=h8.apply(this,arguments)-eo,ix=Math.abs(iM-iN),iA=iN>iM?0:1;if(iq<ir){iK=iq,iq=ir,ir=iK}if(ix>=gE){return ic(iq,iA)+(ir?ic(ir,1-iA):"")+"Z"}var iK,iB,iE,im,iP=0,iO=0,iw,ih,iv,iU,iu,iT,it,iR,iL=[];if(im=(+h9.apply(this,arguments)||0)/2){iE=ig===fT?Math.sqrt(ir*ir+iq*iq):+ig.apply(this,arguments);if(!iA){iO*=-1}if(iq){iO=cf(iE/iq*Math.sin(im))}if(ir){iP=cf(iE/ir*Math.sin(im))}}if(iq){iw=iq*Math.cos(iN+iO);ih=iq*Math.sin(iN+iO);iv=iq*Math.cos(iM-iO);iU=iq*Math.sin(iM-iO);var io=Math.abs(iM-iN-2*iO)<=gd?0:1;if(iO&&hB(iw,ih,iv,iU)===iA^io){var iC=(iN+iM)/2;iw=iq*Math.cos(iC);ih=iq*Math.sin(iC);iv=iU=null}}else{iw=ih=0}if(ir){iu=ir*Math.cos(iM-iP);iT=ir*Math.sin(iM-iP);it=ir*Math.cos(iN+iP);iR=ir*Math.sin(iN+iP);var ip=Math.abs(iN-iM+2*iP)<=gd?0:1;if(iP&&hB(iu,iT,it,iR)===1-iA^ip){var iD=(iN+iM)/2;iu=ir*Math.cos(iD);iT=ir*Math.sin(iD);it=iR=null}}else{iu=iT=0}if((iK=Math.min(Math.abs(iq-ir)/2,+ib.apply(this,arguments)))>0.001){iB=ir<iq^iA?0:1;var iH=it==null?[iu,iT]:iv==null?[iw,ih]:gi([iw,ih],[it,iR],[iv,iU],[iu,iT]),il=iw-iH[0],ik=ih-iH[1],iJ=iv-iH[0],iI=iU-iH[1],ii=1/Math.sin(Math.acos((il*iJ+ik*iI)/(Math.sqrt(il*il+ik*ik)*Math.sqrt(iJ*iJ+iI*iI)))/2),iF=Math.sqrt(iH[0]*iH[0]+iH[1]*iH[1]);if(iv!=null){var iQ=Math.min(iK,(iq-iF)/(ii+1)),iz=fe(it==null?[iu,iT]:[it,iR],[iw,ih],iq,iQ,iA),ij=fe([iv,iU],[iu,iT],iq,iQ,iA);if(iK===iQ){iL.push("M",iz[0],"A",iQ,",",iQ," 0 0,",iB," ",iz[1],"A",iq,",",iq," 0 ",1-iA^hB(iz[1][0],iz[1][1],ij[1][0],ij[1][1]),",",iA," ",ij[1],"A",iQ,",",iQ," 0 0,",iB," ",ij[0])}else{iL.push("M",iz[0],"A",iQ,",",iQ," 0 1,",iB," ",ij[0])}}else{iL.push("M",iw,",",ih)}if(it!=null){var iS=Math.min(iK,(ir-iF)/(ii-1)),iy=fe([iw,ih],[it,iR],ir,-iS,iA),iG=fe([iu,iT],iv==null?[iw,ih]:[iv,iU],ir,-iS,iA);if(iK===iS){iL.push("L",iG[0],"A",iS,",",iS," 0 0,",iB," ",iG[1],"A",ir,",",ir," 0 ",iA^hB(iG[1][0],iG[1][1],iy[1][0],iy[1][1]),",",1-iA," ",iy[1],"A",iS,",",iS," 0 0,",iB," ",iy[0])}else{iL.push("L",iG[0],"A",iS,",",iS," 0 0,",iB," ",iy[0])}}else{iL.push("L",iu,",",iT)}}else{iL.push("M",iw,",",ih);if(iv!=null){iL.push("A",iq,",",iq," 0 ",io,",",iA," ",iv,",",iU)}iL.push("L",iu,",",iT);if(it!=null){iL.push("A",ir,",",ir," 0 ",ip,",",1-iA," ",it,",",iR)}}iL.push("Z");return iL.join("")}function ic(ii,ih){return"M0,"+ii+"A"+ii+","+ii+" 0 1,"+ih+" 0,"+-ii+"A"+ii+","+ii+" 0 1,"+ih+" 0,"+ii}d3.innerRadius=function(ih){if(!arguments.length){return ie}ie=R(ih);return d3};d3.outerRadius=function(ih){if(!arguments.length){return ia}ia=R(ih);return d3};d3.cornerRadius=function(ih){if(!arguments.length){return ib}ib=R(ih);return d3};d3.padRadius=function(ih){if(!arguments.length){return ig}ig=ih==fT?fT:R(ih);return d3};d3.startAngle=function(ih){if(!arguments.length){return id}id=R(ih);return d3};d3.endAngle=function(ih){if(!arguments.length){return h8}h8=R(ih);return d3};d3.padAngle=function(ih){if(!arguments.length){return h9}h9=R(ih);return d3};d3.centroid=function(){var ii=(+ie.apply(this,arguments)+ +ia.apply(this,arguments))/2,ih=(+id.apply(this,arguments)+ +h8.apply(this,arguments))/2-eo;return[Math.cos(ih)*ii,Math.sin(ih)*ii]};return d3};var fT="auto";function bB(d3){return d3.innerRadius}function cS(d3){return d3.outerRadius}function gf(d3){return d3.startAngle}function ao(d3){return d3.endAngle}function bL(d3){return d3&&d3.padAngle}function hB(h8,ia,d3,h9){return(h8-d3)*ia-(ia-h9)*h8>0?0:1}function fe(h8,d3,iw,iv,ie){var iu=h8[0]-d3[0],ih=h8[1]-d3[1],ij=(ie?iv:-iv)/Math.sqrt(iu*iu+ih*ih),ii=ij*ih,ig=-ij*iu,iz=h8[0]+ii,id=h8[1]+ig,iy=d3[0]+ii,ib=d3[1]+ig,ix=(iz+iy)/2,h9=(id+ib)/2,io=iy-iz,il=ib-id,iD=io*io+il*il,ir=iw-iv,ip=iz*ib-iy*id,iA=(il<0?-1:1)*Math.sqrt(ir*ir*iD-ip*ip),it=(ip*il-io*iA)/iD,iC=(-ip*io-il*iA)/iD,iq=(ip*il+io*iA)/iD,iB=(-ip*io+il*iA)/iD,ic=it-ix,im=iC-h9,ia=iq-ix,ik=iB-h9;if(ic*ic+im*im>ia*ia+ik*ik){it=iq,iC=iB}return[[it-ii,iC-ig],[it*iw/ir,iC*iw/ir]]}function e8(h8){var d3=hR,ie=hQ,id=ah,ia=hO,ic=ia.key,ib=0.7;function h9(ij){var il=[],ip=[],ik=-1,ig=ij.length,io,ii=R(d3),ih=R(ie);function im(){il.push("M",ia(h8(ip),ib))}while(++ik<ig){if(id.call(this,io=ij[ik],ik)){ip.push([+ii.call(this,io,ik),+ih.call(this,io,ik)])}else{if(ip.length){im();ip=[]}}}if(ip.length){im()}return il.length?il.join(""):null}h9.x=function(ig){if(!arguments.length){return d3}d3=ig;return h9};h9.y=function(ig){if(!arguments.length){return ie}ie=ig;return h9};h9.defined=function(ig){if(!arguments.length){return id}id=ig;return h9};h9.interpolate=function(ig){if(!arguments.length){return ic}if(typeof ig==="function"){ic=ia=ig}else{ic=(ia=ce.get(ig)||hO).key}return h9};h9.tension=function(ig){if(!arguments.length){return ib}ib=ig;return h9};return h9}hl.svg.line=function(){return e8(gk)};var ce=hl.map({linear:hO,"linear-closed":Z,step:c9,"step-before":bl,"step-after":hv,basis:fd,"basis-open":bi,"basis-closed":cN,bundle:cQ,cardinal:dQ,"cardinal-open":b4,"cardinal-closed":s,monotone:di});ce.forEach(function(d3,h8){h8.key=d3;h8.closed=/-closed$/.test(d3)});function hO(d3){return d3.join("L")}function Z(d3){return hO(d3)+"Z"}function c9(h8){var d3=0,ib=h8.length,ia=h8[0],h9=[ia[0],",",ia[1]];while(++d3<ib){h9.push("H",(ia[0]+(ia=h8[d3])[0])/2,"V",ia[1])}if(ib>1){h9.push("H",ia[0])}return h9.join("")}function bl(h8){var d3=0,ib=h8.length,ia=h8[0],h9=[ia[0],",",ia[1]];while(++d3<ib){h9.push("V",(ia=h8[d3])[1],"H",ia[0])}return h9.join("")}function hv(h8){var d3=0,ib=h8.length,ia=h8[0],h9=[ia[0],",",ia[1]];while(++d3<ib){h9.push("H",(ia=h8[d3])[0],"V",ia[1])}return h9.join("")}function b4(h8,d3){return h8.length<4?hO(h8):h8[1]+cX(h8.slice(1,-1),bW(h8,d3))}function s(h8,d3){return h8.length<3?hO(h8):h8[0]+cX((h8.push(h8[0]),h8),bW([h8[h8.length-2]].concat(h8,[h8[1]]),d3))}function dQ(h8,d3){return h8.length<3?hO(h8):h8[0]+cX(h8,bW(h8,d3))}function cX(id,ic){if(ic.length<1||id.length!=ic.length&&id.length!=ic.length+2){return hO(id)}var ie=id.length!=ic.length,ii="",ig=id[0],d3=id[1],ib=ic[0],ih=ib,h9=1;if(ie){ii+="Q"+(d3[0]-ib[0]*2/3)+","+(d3[1]-ib[1]*2/3)+","+d3[0]+","+d3[1];ig=id[1];h9=2}if(ic.length>1){ih=ic[1];d3=id[h9];h9++;ii+="C"+(ig[0]+ib[0])+","+(ig[1]+ib[1])+","+(d3[0]-ih[0])+","+(d3[1]-ih[1])+","+d3[0]+","+d3[1];for(var h8=2;h8<ic.length;h8++,h9++){d3=id[h9];ih=ic[h8];ii+="S"+(d3[0]-ih[0])+","+(d3[1]-ih[1])+","+d3[0]+","+d3[1]}}if(ie){var ia=id[h9];ii+="Q"+(d3[0]+ih[0]*2/3)+","+(d3[1]+ih[1]*2/3)+","+ia[0]+","+ia[1]}return ii}function bW(id,ib){var h9=[],ia=(1-ib)/2,ig,ie=id[0],ic=id[1],h8=1,d3=id.length;while(++h8<d3){ig=ie;ie=ic;ic=id[h8];h9.push([ia*(ic[0]-ig[0]),ia*(ic[1]-ig[1])])}return h9}function fd(ie){if(ie.length<3){return hO(ie)}var h9=1,h8=ie.length,ia=ie[0],d3=ia[0],ic=ia[1],id=[d3,d3,d3,(ia=ie[1])[0]],ib=[ic,ic,ic,ia[1]],ig=[d3,",",ic,"L",gl(hk,id),",",gl(hk,ib)];ie.push(ie[h8-1]);while(++h9<=h8){ia=ie[h9];id.shift();id.push(ia[0]);ib.shift();ib.push(ia[1]);bP(ig,id,ib)}ie.pop();ig.push("L",ia);return ig.join("")}function bi(ia){if(ia.length<4){return hO(ia)}var ic=[],h9=-1,id=ia.length,ib,h8=[0],d3=[0];while(++h9<3){ib=ia[h9];h8.push(ib[0]);d3.push(ib[1])}ic.push(gl(hk,h8)+","+gl(hk,d3));--h9;while(++h9<id){ib=ia[h9];h8.shift();h8.push(ib[0]);d3.shift();d3.push(ib[1]);bP(ic,h8,d3)}return ic.join("")}function cN(ib){var id,ia=-1,ie=ib.length,d3=ie+4,ic,h9=[],h8=[];while(++ia<4){ic=ib[ia%ie];h9.push(ic[0]);h8.push(ic[1])}id=[gl(hk,h9),",",gl(hk,h8)];--ia;while(++ia<d3){ic=ib[ia%ie];h9.shift();h9.push(ic[0]);h8.shift();h8.push(ic[1]);bP(id,h9,h8)}return id.join("")}function cQ(id,ic){var h9=id.length-1;if(h9){var h8=id[0][0],ib=id[0][1],ih=id[h9][0]-h8,ig=id[h9][1]-ib,ia=-1,d3,ie;while(++ia<=h9){d3=id[ia];ie=ia/h9;d3[0]=ic*d3[0]+(1-ic)*(h8+ie*ih);d3[1]=ic*d3[1]+(1-ic)*(ib+ie*ig)}}return fd(id)}function gl(h8,d3){return h8[0]*d3[0]+h8[1]*d3[1]+h8[2]*d3[2]+h8[3]*d3[3]}var ho=[0,2/3,1/3,0],hm=[0,1/3,2/3,0],hk=[0,1/6,2/3,1/6];function bP(h8,d3,h9){h8.push("C",gl(ho,d3),",",gl(ho,h9),",",gl(hm,d3),",",gl(hm,h9),",",gl(hk,d3),",",gl(hk,h9))}function h1(h8,d3){return(d3[1]-h8[1])/(d3[0]-h8[0])}function d7(ia){var h9=0,h8=ia.length-1,d3=[],id=ia[0],ic=ia[1],ib=d3[0]=h1(id,ic);while(++h9<h8){d3[h9]=(ib+(ib=h1(id=ic,ic=ia[h9+1])))/2}d3[h9]=ib;return d3}function au(ie){var ib=[],ia,id,ic,ig,d3=d7(ie),h9=-1,h8=ie.length-1;while(++h9<h8){ia=h1(ie[h9],ie[h9+1]);if(cG(ia)<gm){d3[h9]=d3[h9+1]=0}else{id=d3[h9]/ia;ic=d3[h9+1]/ia;ig=id*id+ic*ic;if(ig>9){ig=ia*3/Math.sqrt(ig);d3[h9]=ig*id;d3[h9+1]=ig*ic}}}h9=-1;while(++h9<=h8){ig=(ie[Math.min(h8,h9+1)][0]-ie[Math.max(0,h9-1)][0])/(6*(1+d3[h9]*d3[h9]));ib.push([ig||0,d3[h9]*ig||0])}return ib}function di(d3){return d3.length<3?hO(d3):d3[0]+cX(d3,au(d3))}hl.svg.line.radial=function(){var d3=e8(P);d3.radius=d3.x,delete d3.x;d3.angle=d3.y,delete d3.y;return d3};function P(ia){var d3,h9=-1,ic=ia.length,ib,h8;while(++h9<ic){d3=ia[h9];ib=d3[0];h8=d3[1]-eo;d3[0]=ib*Math.cos(h8);d3[1]=ib*Math.sin(h8)}return ia}function h3(ib){var h9=hR,h8=hR,ii=0,ig=hQ,ia=ah,ic=hO,ij=ic.key,ie=ic,id="L",ih=0.7;function d3(ip){var ir=[],ik=[],iz=[],iq=-1,il=ip.length,iu,io=R(h9),iy=R(ii),im=h9===h8?function(){return iw}:R(h8),ix=ii===ig?function(){return iv}:R(ig),iw,iv;function it(){ir.push("M",ic(ib(iz),ih),id,ie(ib(ik.reverse()),ih),"Z")}while(++iq<il){if(ia.call(this,iu=ip[iq],iq)){ik.push([iw=+io.call(this,iu,iq),iv=+iy.call(this,iu,iq)]);iz.push([+im.call(this,iu,iq),+ix.call(this,iu,iq)])}else{if(ik.length){it();ik=[];iz=[]}}}if(ik.length){it()}return ir.length?ir.join(""):null}d3.x=function(ik){if(!arguments.length){return h8}h9=h8=ik;return d3};d3.x0=function(ik){if(!arguments.length){return h9}h9=ik;return d3};d3.x1=function(ik){if(!arguments.length){return h8}h8=ik;return d3};d3.y=function(ik){if(!arguments.length){return ig}ii=ig=ik;return d3};d3.y0=function(ik){if(!arguments.length){return ii}ii=ik;return d3};d3.y1=function(ik){if(!arguments.length){return ig}ig=ik;return d3};d3.defined=function(ik){if(!arguments.length){return ia}ia=ik;return d3};d3.interpolate=function(ik){if(!arguments.length){return ij}if(typeof ik==="function"){ij=ic=ik}else{ij=(ic=ce.get(ik)||hO).key}ie=ic.reverse||ic;id=ic.closed?"M":"L";return d3};d3.tension=function(ik){if(!arguments.length){return ih}ih=ik;return d3};return d3}bl.reverse=hv;hv.reverse=bl;hl.svg.area=function(){return h3(gk)};hl.svg.area.radial=function(){var d3=h3(P);d3.radius=d3.x,delete d3.x;d3.innerRadius=d3.x0,delete d3.x0;d3.outerRadius=d3.x1,delete d3.x1;d3.angle=d3.y,delete d3.y;d3.startAngle=d3.y0,delete d3.y0;d3.endAngle=d3.y1,delete d3.y1;return d3};hl.svg.chord=function(){var d3=hG,ie=hN,id=H,ig=gf,ib=ao;function ic(il,ij){var ik=ih(this,d3,il,ij),ii=ih(this,ie,il,ij);return"M"+ik.p0+h8(ik.r,ik.p1,ik.a1-ik.a0)+(h9(ik,ii)?ia(ik.r,ik.p1,ik.r,ik.p0):ia(ik.r,ik.p1,ii.r,ii.p0)+h8(ii.r,ii.p1,ii.a1-ii.a0)+ia(ii.r,ii.p1,ik.r,ik.p0))+"Z"}function ih(il,ip,iq,im){var ik=ip.call(il,iq,im),io=id.call(il,ik,im),ij=ig.call(il,ik,im)-eo,ii=ib.call(il,ik,im)-eo;return{r:io,a0:ij,a1:ii,p0:[io*Math.cos(ij),io*Math.sin(ij)],p1:[io*Math.cos(ii),io*Math.sin(ii)]}}function h9(ij,ii){return ij.a0==ii.a0&&ij.a1==ii.a1}function h8(ij,ik,ii){return"A"+ij+","+ij+" 0 "+ +(ii>gd)+",1 "+ik}function ia(ij,il,ii,ik){return"Q 0,0 "+ik}ic.radius=function(ii){if(!arguments.length){return id}id=R(ii);return ic};ic.source=function(ii){if(!arguments.length){return d3}d3=R(ii);return ic};ic.target=function(ii){if(!arguments.length){return ie}ie=R(ii);return ic};ic.startAngle=function(ii){if(!arguments.length){return ig}ig=R(ii);return ic};ic.endAngle=function(ii){if(!arguments.length){return ib}ib=R(ii);return ic};return ic};function H(d3){return d3.radius}hl.svg.diagonal=function(){var h9=hG,ia=hN,d3=n;function h8(ig,ic){var ih=h9.call(this,ig,ic),id=ia.call(this,ig,ic),ib=(ih.y+id.y)/2,ie=[ih,{x:ih.x,y:ib},{x:id.x,y:ib},id];ie=ie.map(d3);return"M"+ie[0]+"C"+ie[1]+" "+ie[2]+" "+ie[3]}h8.source=function(ib){if(!arguments.length){return h9}h9=R(ib);return h8};h8.target=function(ib){if(!arguments.length){return ia}ia=R(ib);return h8};h8.projection=function(ib){if(!arguments.length){return d3}d3=ib;return h8};return h8};function n(d3){return[d3.x,d3.y]}hl.svg.diagonal.radial=function(){var h9=hl.svg.diagonal(),d3=n,h8=h9.projection;h9.projection=function(ia){return arguments.length?h8(o(d3=ia)):d3};return h9};function o(d3){return function(){var ia=d3.apply(this,arguments),h9=ia[0],h8=ia[1]-eo;return[h9*Math.cos(h8),h9*Math.sin(h8)]}}hl.svg.symbol=function(){var h8=aU,d3=e4;function h9(ib,ia){return(hL.get(h8.call(this,ib,ia))||cg)(d3.call(this,ib,ia))}h9.type=function(ia){if(!arguments.length){return h8}h8=R(ia);return h9};h9.size=function(ia){if(!arguments.length){return d3}d3=R(ia);return h9};return h9};function e4(){return 64}function aU(){return"circle"}function cg(d3){var h8=Math.sqrt(d3/gd);return"M0,"+h8+"A"+h8+","+h8+" 0 1,1 0,"+-h8+"A"+h8+","+h8+" 0 1,1 0,"+h8+"Z"}var hL=hl.map({circle:cg,cross:function(d3){var h8=Math.sqrt(d3/5)/2;return"M"+-3*h8+","+-h8+"H"+-h8+"V"+-3*h8+"H"+h8+"V"+-h8+"H"+3*h8+"V"+h8+"H"+h8+"V"+3*h8+"H"+-h8+"V"+h8+"H"+-3*h8+"Z"},diamond:function(d3){var h8=Math.sqrt(d3/(2*cm)),h9=h8*cm;return"M0,"+-h8+"L"+h9+",0 0,"+h8+" "+-h9+",0Z"},square:function(d3){var h8=Math.sqrt(d3)/2;return"M"+-h8+","+-h8+"L"+h8+","+-h8+" "+h8+","+h8+" "+-h8+","+h8+"Z"},"triangle-down":function(d3){var h9=Math.sqrt(d3/b8),h8=h9*b8/2;return"M0,"+h8+"L"+h9+","+-h8+" "+-h9+","+-h8+"Z"},"triangle-up":function(d3){var h9=Math.sqrt(d3/b8),h8=h9*b8/2;return"M0,"+-h8+"L"+h9+","+h8+" "+-h9+","+h8+"Z"}});hl.svg.symbolTypes=hL.keys();var b8=Math.sqrt(3),cm=Math.tan(30*J);function gQ(d3,h8,h9){h2(d3,ev);d3.namespace=h8;d3.id=h9;return d3}var ev=[],g8=0,ar,d2;ev.call=dX.call;ev.empty=dX.empty;ev.node=dX.node;ev.size=dX.size;hl.transition=function(d3){return arguments.length?ar?d3.transition():d3:gS.transition()};hl.transition.prototype=ev;ev.select=function(ie){var d3=this.id,ii=this.namespace,ia=[],ik,h8,ic;ie=z(ie);for(var ig=-1,ib=this.length;++ig<ib;){ia.push(ik=[]);for(var ij=this[ig],ih=-1,h9=ij.length;++ih<h9;){if((ic=ij[ih])&&(h8=ie.call(ic,ic.__data__,ih,ig))){if("__data__" in ic){h8.__data__=ic.__data__}fB(h8,ih,ii,d3,ic[ii][d3]);ik.push(h8)}else{ik.push(null)}}}return gQ(ia,ii,d3)};ev.selectAll=function(ih){var h8=this.id,im=this.namespace,ic=[],ip,d3,ig,h9,il;ih=c1(ih);for(var ij=-1,ie=this.length;++ij<ie;){for(var io=this[ij],ik=-1,ib=io.length;++ik<ib;){if(ig=io[ik]){il=ig[im][h8];d3=ih.call(ig,ig.__data__,ik,ij);ic.push(ip=[]);for(var ii=-1,ia=d3.length;++ii<ia;){if(h9=d3[ii]){fB(h9,ii,im,h8,il)}ip.push(h9)}}}}return gQ(ic,im,h8)};ev.filter=function(d3){var h9=[],ig,ie,ia;if(typeof d3!=="function"){d3=a8(d3)}for(var ic=0,ib=this.length;ic<ib;ic++){h9.push(ig=[]);for(var ie=this[ic],id=0,h8=ie.length;id<h8;id++){if((ia=ie[id])&&d3.call(ia,ia.__data__,id,ic)){ig.push(ia)}}}return gQ(h9,this.namespace,this.id)};ev.tween=function(d3,h8){var ia=this.id,h9=this.namespace;if(arguments.length<2){return this.node()[h9][ia].tween.get(d3)}return cI(this,h8==null?function(ib){ib[h9][ia].tween.remove(d3)}:function(ib){ib[h9][ia].tween.set(d3,h8)})};function hK(d3,h8,ib,h9){var ic=d3.id,ia=d3.namespace;return cI(d3,typeof ib==="function"?function(ig,ie,id){ig[ia][ic].tween.set(h8,h9(ib.call(ig,ig.__data__,ie,id)))}:(ib=h9(ib),function(id){id[ia][ic].tween.set(h8,ib)}))}ev.attr=function(d3,ic){if(arguments.length<2){for(ic in d3){this.attr(ic,d3[ic])}return this}var ia=d3=="transform"?ef:fC,h9=hl.ns.qualify(d3);function h8(){this.removeAttribute(h9)}function ie(){this.removeAttributeNS(h9.space,h9.local)}function ib(ig){return ig==null?h8:(ig+="",function(){var ih=this.getAttribute(h9),ii;return ih!==ig&&(ii=ia(ih,ig),function(ij){this.setAttribute(h9,ii(ij))})})}function id(ig){return ig==null?ie:(ig+="",function(){var ih=this.getAttributeNS(h9.space,h9.local),ii;return ih!==ig&&(ii=ia(ih,ig),function(ij){this.setAttributeNS(h9.space,h9.local,ii(ij))})})}return hK(this,"attr."+d3,ic,h9.local?id:ib)};ev.attrTween=function(d3,h9){var h8=hl.ns.qualify(d3);function ia(ie,ic){var id=h9.call(this,ie,ic,this.getAttribute(h8));return id&&function(ig){this.setAttribute(h8,id(ig))}}function ib(ie,ic){var id=h9.call(this,ie,ic,this.getAttributeNS(h8.space,h8.local));return id&&function(ig){this.setAttributeNS(h8.space,h8.local,id(ig))}}return this.tween("attr."+d3,h8.local?ib:ia)};ev.style=function(h9,ib,ia){var ic=arguments.length;if(ic<3){if(typeof h9!=="string"){if(ic<2){ib=""}for(ia in h9){this.style(ia,h9[ia],ib)}return this}ia=""}function h8(){this.style.removeProperty(h9)}function d3(id){return id==null?h8:(id+="",function(){var ie=fy.getComputedStyle(this,null).getPropertyValue(h9),ig;return ie!==id&&(ig=fC(ie,id),function(ih){this.style.setProperty(h9,ig(ih),ia)})})}return hK(this,"style."+h9,ib,d3)};ev.styleTween=function(d3,h9,h8){if(arguments.length<3){h8=""}function ia(id,ib){var ic=h9.call(this,id,ib,fy.getComputedStyle(this,null).getPropertyValue(d3));return ic&&function(ie){this.style.setProperty(d3,ic(ie),h8)}}return this.tween("style."+d3,ia)};ev.text=function(d3){return hK(this,"text",d3,h7)};function h7(d3){if(d3==null){d3=""}return function(){this.textContent=d3}}ev.remove=function(){var d3=this.namespace;return this.each("end.transition",function(){var h8;if(this[d3].count<2&&(h8=this.parentNode)){h8.removeChild(this)}})};ev.ease=function(h8){var h9=this.id,d3=this.namespace;if(arguments.length<1){return this.node()[d3][h9].ease}if(typeof h8!=="function"){h8=hl.ease.apply(hl,arguments)}return cI(this,function(ia){ia[d3][h9].ease=h8})};ev.delay=function(h8){var h9=this.id,d3=this.namespace;if(arguments.length<1){return this.node()[d3][h9].delay}return cI(this,typeof h8==="function"?function(ic,ib,ia){ic[d3][h9].delay=+h8.call(ic,ic.__data__,ib,ia)}:(h8=+h8,function(ia){ia[d3][h9].delay=h8}))};ev.duration=function(h8){var h9=this.id,d3=this.namespace;if(arguments.length<1){return this.node()[d3][h9].duration}return cI(this,typeof h8==="function"?function(ic,ib,ia){ic[d3][h9].duration=Math.max(1,h8.call(ic,ic.__data__,ib,ia))}:(h8=Math.max(1,h8),function(ia){ia[d3][h9].duration=h8}))};ev.each=function(h9,ia){var ic=this.id,h8=this.namespace;if(arguments.length<2){var d3=d2,ib=ar;ar=ic;cI(this,function(ig,ie,id){d2=ig[h8][ic];h9.call(ig,ig.__data__,ie,id)});d2=d3;ar=ib}else{cI(this,function(id){var ie=id[h8][ic];(ie.event||(ie.event=hl.dispatch("start","end","interrupt"))).on(h9,ia)})}return this};ev.transition=function(){var ij=this.id,ii=++g8,ie=this.namespace,h8=[],ih,ig,ia,id;for(var ib=0,h9=this.length;ib<h9;ib++){h8.push(ih=[]);for(var ig=this[ib],ic=0,d3=ig.length;ic<d3;ic++){if(ia=ig[ic]){id=ia[ie][ij];fB(ia,ic,ie,ii,{time:id.time,ease:id.ease,delay:id.delay+id.duration,duration:id.duration})}ih.push(ia)}}return gQ(h8,ie,ii)};function gy(d3){return d3==null?"__transition__":"__transition_"+d3+"__"}function fB(ib,h9,ia,ig,d3){var h8=ib[ia]||(ib[ia]={active:0,count:0}),ie=h8[ig];if(!ie){var ic=d3.time;ie=h8[ig]={tween:new aI(),time:ic,delay:d3.delay,duration:d3.duration,ease:d3.ease};d3=null;++h8.count;hl.timer(function(iq){var im=ib.__data__,ik=ie.delay,ij,ii,id=dj,ip=[];id.t=ik+ic;if(ik<=iq){return ih(iq-ik)}id.c=ih;function ih(ir){if(h8.active>ig){return io(false)}h8.active=ig;ie.event&&ie.event.start.call(ib,im,h9);ie.tween.forEach(function(it,iu){if(iu=iu.call(ib,im,h9)){ip.push(iu)}});ii=ie.ease;ij=ie.duration;hl.timer(function(){id.c=il(ir||1)?ah:il;return 1},0,ic)}function il(ir){if(h8.active!==ig){return io(false)}var it=ir/ij,iu=ii(it),iv=ip.length;while(iv>0){ip[--iv].call(ib,iu)}if(it>=1){return io(true)}}function io(ir){if(ie.event){ie.event[ir?"end":"interrupt"].call(ib,im,h9)}if(--h8.count){delete h8[ig]}else{delete ib[ia]}return 1}},0,ic)}}hl.svg.axis=function(){var h9=hl.scale.linear(),ib=hS,d3=6,ic=6,ig=3,ie=[10],ia=null,id;function h8(ih){ih.each(function(){var iF=hl.select(this);var iA=this.__chart__||h9,iz=this.__chart__=h9.copy();var iI=ia==null?iz.ticks?iz.ticks.apply(iz,ie):iz.domain():ia,iy=id==null?iz.tickFormat?iz.tickFormat.apply(iz,ie):gk:id,iC=iF.selectAll(".tick").data(iI,iz),iv=iC.enter().insert("g",".domain").attr("class","tick").style("opacity",gm),ix=hl.transition(iC.exit()).style("opacity",gm).remove(),ip=hl.transition(iC.order()).style("opacity",1),ii=Math.max(d3,0)+ig,ij;var iu=aY(iz),iw=iF.selectAll(".domain").data([0]),iJ=(iw.enter().append("path").attr("class","domain"),hl.transition(iw));iv.append("line");iv.append("text");var im=iv.select("line"),iH=ip.select("line"),it=iC.select("text").text(iy),io=iv.select("text"),iE=ip.select("text"),iG=ib==="top"||ib==="left"?-1:1,iD,iB,il,ik;if(ib==="bottom"||ib==="top"){ij=fm,iD="x",il="y",iB="x2",ik="y2";it.attr("dy",iG<0?"0em":".71em").style("text-anchor","middle");iJ.attr("d","M"+iu[0]+","+iG*ic+"V0H"+iu[1]+"V"+iG*ic)}else{ij=fl,iD="y",il="x",iB="y2",ik="x2";it.attr("dy",".32em").style("text-anchor",iG<0?"end":"start");iJ.attr("d","M"+iG*ic+","+iu[0]+"H0V"+iu[1]+"H"+iG*ic)}im.attr(ik,iG*d3);io.attr(il,iG*ii);iH.attr(iB,0).attr(ik,iG*d3);iE.attr(iD,0).attr(il,iG*ii);if(iz.rangeBand){var iq=iz,ir=iq.rangeBand()/2;iA=iz=function(iK){return iq(iK)+ir}}else{if(iA.rangeBand){iA=iz}else{ix.call(ij,iz,iA)}}iv.call(ij,iA,iz);ip.call(ij,iz,iz)})}h8.scale=function(ih){if(!arguments.length){return h9}h9=ih;return h8};h8.orient=function(ih){if(!arguments.length){return ib}ib=ih in e2?ih+"":hS;return h8};h8.ticks=function(){if(!arguments.length){return ie}ie=arguments;return h8};h8.tickValues=function(ih){if(!arguments.length){return ia}ia=ih;return h8};h8.tickFormat=function(ih){if(!arguments.length){return id}id=ih;return h8};h8.tickSize=function(ih){var ii=arguments.length;if(!ii){return d3}d3=+ih;ic=+arguments[ii-1];return h8};h8.innerTickSize=function(ih){if(!arguments.length){return d3}d3=+ih;return h8};h8.outerTickSize=function(ih){if(!arguments.length){return ic}ic=+ih;return h8};h8.tickPadding=function(ih){if(!arguments.length){return ig}ig=+ih;return h8};h8.tickSubdivide=function(){return arguments.length&&h8};return h8};var hS="bottom",e2={top:1,right:1,bottom:1,left:1};function fm(h9,h8,d3){h9.attr("transform",function(ib){var ia=h8(ib);return"translate("+(isFinite(ia)?ia:d3(ib))+",0)"})}function fl(h8,h9,d3){h8.attr("transform",function(ib){var ia=h9(ib);return"translate(0,"+(isFinite(ia)?ia:d3(ib))+")"})}hl.svg.brush=function(){var h8=hf(ig,"brushstart","brush","brushend"),ij=null,ih=null,h9=[0,0],ie=[0,0],ii,ib,d3=true,id=true,ik=at[0];function ig(io){io.each(function(){var iv=hl.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",il).on("touchstart.brush",il);var iu=iv.selectAll(".background").data([0]);iu.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");iv.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var it=iv.selectAll(".resize").data(ik,gk);it.exit().remove();it.enter().append("g").attr("class",function(iw){return"resize "+iw}).style("cursor",function(iw){return eV[iw]}).append("rect").attr("x",function(iw){return/[ew]$/.test(iw)?-3:null}).attr("y",function(iw){return/^[ns]/.test(iw)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");it.style("display",ig.empty()?"none":null);var ir=hl.transition(iv),ip=hl.transition(iu),iq;if(ij){iq=aY(ij);ip.attr("x",iq[0]).attr("width",iq[1]-iq[0]);ic(ir)}if(ih){iq=aY(ih);ip.attr("y",iq[0]).attr("height",iq[1]-iq[0]);ia(ir)}im(ir)})}ig.event=function(io){io.each(function(){var ip=h8.of(this,arguments),iq={x:h9,y:ie,i:ii,j:ib},ir=this.__chart__||iq;this.__chart__=iq;if(ar){hl.select(this).transition().each("start.brush",function(){ii=ir.i;ib=ir.j;h9=ir.x;ie=ir.y;ip({type:"brushstart"})}).tween("brush:brush",function(){var it=eO(h9,iq.x),iu=eO(ie,iq.y);ii=ib=null;return function(iv){h9=iq.x=it(iv);ie=iq.y=iu(iv);ip({type:"brush",mode:"resize"})}}).each("end.brush",function(){ii=iq.i;ib=iq.j;ip({type:"brush",mode:"resize"});ip({type:"brushend"})})}else{ip({type:"brushstart"});ip({type:"brush",mode:"resize"});ip({type:"brushend"})}})};function im(io){io.selectAll(".resize").attr("transform",function(ip){return"translate("+h9[+/e$/.test(ip)]+","+ie[+/^s/.test(ip)]+")"})}function ic(io){io.select(".extent").attr("x",h9[0]);io.selectAll(".extent,.n>rect,.s>rect").attr("width",h9[1]-h9[0])}function ia(io){io.select(".extent").attr("y",ie[0]);io.selectAll(".extent,.e>rect,.w>rect").attr("height",ie[1]-ie[0])}function il(){var iI=this,ip=hl.select(hl.event.target),ix=h8.of(iI,arguments),iD=hl.select(iI),iF=ip.datum(),iB=!/^(n|s)$/.test(iF)&&ij,iz=!/^(e|w)$/.test(iF)&&ih,iA=ip.classed("extent"),ir=bK(),iG,iH=hl.mouse(iI),iq;var iv=hl.select(fy).on("keydown.brush",iy).on("keyup.brush",iu);if(hl.event.changedTouches){iv.on("touchmove.brush",iw).on("touchend.brush",io)}else{iv.on("mousemove.brush",iw).on("mouseup.brush",io)}iD.interrupt().selectAll("*").interrupt();if(iA){iH[0]=h9[0]-iH[0];iH[1]=ie[0]-iH[1]}else{if(iF){var iE=+/w$/.test(iF),iC=+/^n/.test(iF);iq=[h9[1-iE]-iH[0],ie[1-iC]-iH[1]];iH[0]=h9[iE];iH[1]=ie[iC]}else{if(hl.event.altKey){iG=iH.slice()}}}iD.style("pointer-events","none").selectAll(".resize").style("display",null);hl.select("body").style("cursor",ip.style("cursor"));ix({type:"brushstart"});iw();function iy(){if(hl.event.keyCode==32){if(!iA){iG=null;iH[0]-=h9[1];iH[1]-=ie[1];iA=2}w()}}function iu(){if(hl.event.keyCode==32&&iA==2){iH[0]+=h9[1];iH[1]+=ie[1];iA=0;w()}}function iw(){var iJ=hl.mouse(iI),iK=false;if(iq){iJ[0]+=iq[0];iJ[1]+=iq[1]}if(!iA){if(hl.event.altKey){if(!iG){iG=[(h9[0]+h9[1])/2,(ie[0]+ie[1])/2]}iH[0]=h9[+(iJ[0]<iG[0])];iH[1]=ie[+(iJ[1]<iG[1])]}else{iG=null}}if(iB&&it(iJ,ij,0)){ic(iD);iK=true}if(iz&&it(iJ,ih,1)){ia(iD);iK=true}if(iK){im(iD);ix({type:"brush",mode:iA?"move":"resize"})}}function it(iR,iL,iN){var iO=aY(iL),iK=iO[0],iJ=iO[1],iP=iH[iN],iS=iN?ie:h9,iT=iS[1]-iS[0],iM,iQ;if(iA){iK-=iP;iJ-=iT+iP}iM=(iN?id:d3)?Math.max(iK,Math.min(iJ,iR[iN])):iR[iN];if(iA){iQ=(iM+=iP)+iT}else{if(iG){iP=Math.max(iK,Math.min(iJ,2*iG[iN]-iM))}if(iP<iM){iQ=iM;iM=iP}else{iQ=iP}}if(iS[0]!=iM||iS[1]!=iQ){if(iN){ib=null}else{ii=null}iS[0]=iM;iS[1]=iQ;return true}}function io(){iw();iD.style("pointer-events","all").selectAll(".resize").style("display",ig.empty()?"none":null);hl.select("body").style("cursor",null);iv.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);ir();ix({type:"brushend"})}}ig.x=function(io){if(!arguments.length){return ij}ij=io;ik=at[!ij<<1|!ih];return ig};ig.y=function(io){if(!arguments.length){return ih}ih=io;ik=at[!ij<<1|!ih];return ig};ig.clamp=function(io){if(!arguments.length){return ij&&ih?[d3,id]:ij?d3:ih?id:null}if(ij&&ih){d3=!!io[0],id=!!io[1]}else{if(ij){d3=!!io}else{if(ih){id=!!io}}}return ig};ig.extent=function(iu){var iq,io,it,ir,ip;if(!arguments.length){if(ij){if(ii){iq=ii[0],io=ii[1]}else{iq=h9[0],io=h9[1];if(ij.invert){iq=ij.invert(iq),io=ij.invert(io)}if(io<iq){ip=iq,iq=io,io=ip}}}if(ih){if(ib){it=ib[0],ir=ib[1]}else{it=ie[0],ir=ie[1];if(ih.invert){it=ih.invert(it),ir=ih.invert(ir)}if(ir<it){ip=it,it=ir,ir=ip}}}return ij&&ih?[[iq,it],[io,ir]]:ij?[iq,io]:ih&&[it,ir]}if(ij){iq=iu[0],io=iu[1];if(ih){iq=iq[0],io=io[0]}ii=[iq,io];if(ij.invert){iq=ij(iq),io=ij(io)}if(io<iq){ip=iq,iq=io,io=ip}if(iq!=h9[0]||io!=h9[1]){h9=[iq,io]}}if(ih){it=iu[0],ir=iu[1];if(ij){it=it[1],ir=ir[1]}ib=[it,ir];if(ih.invert){it=ih(it),ir=ih(ir)}if(ir<it){ip=it,it=ir,ir=ip}if(it!=ie[0]||ir!=ie[1]){ie=[it,ir]}}return ig};ig.clear=function(){if(!ig.empty()){h9=[0,0],ie=[0,0];ii=ib=null}return ig};ig.empty=function(){return !!ij&&h9[0]==h9[1]||!!ih&&ie[0]==ie[1]};return hl.rebind(ig,h8,"on")};var eV={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var at=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var h6=fG.format=dh.timeFormat;var df=h6.utc;var dO=df("%Y-%m-%dT%H:%M:%S.%LZ");h6.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?dw:dO;function dw(d3){return d3.toISOString()}dw.parse=function(h8){var d3=new Date(h8);return isNaN(d3)?null:d3};dw.toString=dO.toString;fG.second=c0(function(d3){return new hp(Math.floor(d3/1000)*1000)},function(d3,h8){d3.setTime(d3.getTime()+Math.floor(h8)*1000)},function(d3){return d3.getSeconds()});fG.seconds=fG.second.range;fG.seconds.utc=fG.second.utc.range;fG.minute=c0(function(d3){return new hp(Math.floor(d3/60000)*60000)},function(d3,h8){d3.setTime(d3.getTime()+Math.floor(h8)*60000)},function(d3){return d3.getMinutes()});fG.minutes=fG.minute.range;fG.minutes.utc=fG.minute.utc.range;fG.hour=c0(function(d3){var h8=d3.getTimezoneOffset()/60;return new hp((Math.floor(d3/3600000-h8)+h8)*3600000)},function(d3,h8){d3.setTime(d3.getTime()+Math.floor(h8)*3600000)},function(d3){return d3.getHours()});fG.hours=fG.hour.range;fG.hours.utc=fG.hour.utc.range;fG.month=c0(function(d3){d3=fG.day(d3);d3.setDate(1);return d3},function(d3,h8){d3.setMonth(d3.getMonth()+h8)},function(d3){return d3.getMonth()});fG.months=fG.month.range;fG.months.utc=fG.month.utc.range;function bq(d3,h8,h9){function ia(ic){return d3(ic)}ia.invert=function(ic){return fZ(d3.invert(ic))};ia.domain=function(ic){if(!arguments.length){return d3.domain().map(fZ)}d3.domain(ic);return ia};function ib(ie,ig){var id=ie[1]-ie[0],ih=id/ig,ic=hl.bisect(fa,ih);return ic==fa.length?[h8.year,q(ie.map(function(ii){return ii/31536000000}),ig)[2]]:!ic?[cy,q(ie,ig)[2]]:h8[ih/fa[ic-1]<fa[ic]/ih?ic-1:ic]}ia.nice=function(id,ig){var ih=ia.domain(),ie=er(ih),ii=id==null?ib(ie,10):typeof id==="number"&&ib(ie,id);if(ii){id=ii[0],ig=ii[1]}function ic(ij){return !isNaN(ij)&&!id.range(ij,fZ(+ij+1),ig).length}return ia.domain(gh(ih,ig>1?{floor:function(ij){while(ic(ij=id.floor(ij))){ij=fZ(ij-1)}return ij},ceil:function(ij){while(ic(ij=id.ceil(ij))){ij=fZ(+ij+1)}return ij}}:id))};ia.ticks=function(ic,ie){var id=er(ia.domain()),ig=ic==null?ib(id,10):typeof ic==="number"?ib(id,ic):!ic.range&&[{range:ic},ie];if(ig){ic=ig[0],ie=ig[1]}return ic.range(id[0],fZ(+id[1]+1),ie<1?1:ie)};ia.tickFormat=function(){return h9};ia.copy=function(){return bq(d3.copy(),h8,h9)};return f9(ia,d3)}function fZ(d3){return new Date(d3)}var fa=[1000,5000,15000,30000,60000,300000,900000,1800000,3600000,10800000,21600000,43200000,86400000,172800000,604800000,2592000000,7776000000,31536000000];var cC=[[fG.second,1],[fG.second,5],[fG.second,15],[fG.second,30],[fG.minute,1],[fG.minute,5],[fG.minute,15],[fG.minute,30],[fG.hour,1],[fG.hour,3],[fG.hour,6],[fG.hour,12],[fG.day,1],[fG.day,2],[fG.week,1],[fG.month,1],[fG.month,3],[fG.year,1]];var S=h6.multi([[".%L",function(d3){return d3.getMilliseconds()}],[":%S",function(d3){return d3.getSeconds()}],["%I:%M",function(d3){return d3.getMinutes()}],["%I %p",function(d3){return d3.getHours()}],["%a %d",function(d3){return d3.getDay()&&d3.getDate()!=1}],["%b %d",function(d3){return d3.getDate()!=1}],["%B",function(d3){return d3.getMonth()}],["%Y",ah]]);var cy={range:function(h9,d3,h8){return hl.range(Math.ceil(h9/h8)*h8,+d3,h8).map(fZ)},floor:gk,ceil:gk};cC.year=fG.year;fG.scale=function(){return bq(hl.scale.linear(),cC,S)};var f2=cC.map(function(d3){return[d3[0].utc,d3[1]]});var fr=df.multi([[".%L",function(d3){return d3.getUTCMilliseconds()}],[":%S",function(d3){return d3.getUTCSeconds()}],["%I:%M",function(d3){return d3.getUTCMinutes()}],["%I %p",function(d3){return d3.getUTCHours()}],["%a %d",function(d3){return d3.getUTCDay()&&d3.getUTCDate()!=1}],["%b %d",function(d3){return d3.getUTCDate()!=1}],["%B",function(d3){return d3.getUTCMonth()}],["%Y",ah]]);f2.year=fG.year.utc;fG.scale.utc=function(){return bq(hl.scale.linear(),f2,fr)};hl.text=X(function(d3){return d3.responseText});hl.json=function(d3,h8){return hV(d3,"application/json",dK,h8)};function dK(d3){return JSON.parse(d3.responseText)}hl.html=function(d3,h8){return hV(d3,"text/html",h5,h8)};function h5(h8){var d3=bN.createRange();d3.selectNode(bN.body);return d3.createContextualFragment(h8.responseText)}hl.xml=X(function(d3){return d3.responseXML});if(typeof define==="function"&&define.amd){define(hl)}else{if(typeof c==="object"&&c.exports){c.exports=hl}}this.d3=hl}()},{}],31:[function(b,c,a){arguments[4][30][0].apply(a,arguments)},{dup:30}]},{},[14]);